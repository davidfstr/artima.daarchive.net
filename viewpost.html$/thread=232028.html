
<!DOCTYPE html>

<html>
<head><meta content="noindex,nofollow" name="robots"/>
<title>Testing without setup and tearDown</title>
<meta charset="utf-8"/>
<meta content="Bill Venners" name="author">
<link href="../_/https/www.artima.com/artima.css" rel="stylesheet" type="text/css"/>
<link href="../_/https/www.artima.com/favicon.ico" rel="shortcut icon"/>
</meta></head>
<body><table cellspacing="0" width="100%">
<tr>
<td align="left" valign="bottom">
<a href="../_/https/www.artima.com/index.html"><img alt="The Artima Developer Community" border="0" height="43" src="../_/https/www.artima.com/images/a7.gif" width="550"/></a>
</td>
</tr></table>
<table bgcolor="#333333" width="100%">
<tr>
<td align="center">
<div class="ml">
<a class="hl" href="../_/https/www.artima.com/articles/index.html">Articles</a> |
<a class="hl" href="../_/https/www.artima.com/news/index.html">News</a> |
<a class="hl" href="../index.html">Weblogs</a> |
<a class="hl" href="../_/https/www.artima.com/shop/catalog/index.html">Books</a> |
<a class="hl" href="../_/https/www.artima.com/forums/index.html">Forums</a>
</div>
</td>
</tr>
</table>
<table bgcolor="#D3D3D3" width="100%">
<tr>
<td align="center">
<div class="sc">
<a href="../index.html">Artima Weblogs</a> | 

<a href="../index.html$/blogger=bv.html">Bill Venners' Weblog</a> | 

<a href="../_/https/www.artima.com/forums/flat.html$/forum=106&amp;thread=232028.html">Discuss</a> | 
<a href="mailto:?subject=Testing without setup and tearDown&amp;body= %0AArtima Weblogs %0ATesting without setup and tearDown %0Aby Bill Venners %0A%0Ahttps://www.artima.com/weblogs/viewpost.jsp?thread=232028">Email</a> | 
<a href="../viewpostP.html$/thread=232028.html">Print</a> | 
<a href="../bloggers.html">Bloggers</a> | 
<a class="sl" href="thread=223156.html" title="ScalaTest 0.9.1 Released">Previous</a> | 
<a class="sl" href="thread=245420.html" title="Programming in Scala Leaps onto the World Stage!">Next</a>
</div>
</td>
</tr>
</table>
<table bgcolor="#EEEEEE" width="100%">
<tr>
<td align="center">
<div class="sc">
<span style="color: #555555;">Sponsored Link</span> <span style="color: #888888;">•</span>
<script language="JavaScript" src="../_/https/www.artima.com/zcr/adx.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
   if (!document.phpAds_used) document.phpAds_used = ',';
   phpAds_random = new String (Math.random()); phpAds_random = phpAds_random.substring(2,11);
   
   document.write ("<" + "script language='JavaScript' type='text/javascript' src='");
   document.write ("../_/https/www.artima.com/zcr/adjs.html$/n=.html" + phpAds_random);
   document.write ("&amp;what=zone:9&amp;target=_top");   document.write ("&amp;exclude=" + document.phpAds_used);
   if (document.referrer)
      document.write ("&amp;referer=" + escape(document.referrer));
   document.write ("'><" + "/script>");
//-->
</script><noscript><a href="../_/https/www.artima.com/zcr/adclick.html$/n=a799ecf6.html" target="_top"><img alt="" border="0" src="../_/https/www.artima.com/zcr/adview.html$/what=zone:9&amp;n=a0587811.html"/></a></noscript>
</div>
</td>
</tr>
</table>
<br/>
<div class="vegies">
<div class="tc">
<span class="sts">Angle Brackets and Curly Braces</span><br>
<span class="ts">Testing without setup and tearDown</span><br/>
<span class="as">by Bill Venners</span><br/>
<span class="pd">June 3, 2008</span><br/>
</br></div>
<blockquote>
<b>Summary</b><br/>
In the most recent release of ScalaTest, I've placed some guidelines in the documentation for how to avoid the use of vars in testing code. In this post I include those guidelines and ask for feedback.

</blockquote>
<hr align="left" width="90%"/>
<table align="right">
<tr>
<td>
<div class="adnotice">
Advertisement
</div>
<center>
<script language="JavaScript" src="../_/https/www.artima.com/zcr/adx.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
if (!document.phpAds_used) document.phpAds_used = ',';
phpAds_random = new String (Math.random()); phpAds_random = phpAds_random.substring(2,11);
document.write ("<" + "script language='JavaScript' type='text/javascript' src='");
document.write ("../_/https/www.artima.com/zcr/adjs.html$/n=.html" + phpAds_random);
document.write ("&amp;what=zone:2");
document.write ("&amp;exclude=" + document.phpAds_used);
if (document.referrer)
document.write ("&amp;referer=" + escape(document.referrer));
document.write ("'><" + "/script>");
//-->
</script><noscript><a href="../_/https/www.artima.com/zcr/adclick.html$/n=a74ab060.html" target="_blank"><img alt="" border="0" src="../_/https/www.artima.com/zcr/adview.html$/what=zone:2&amp;n=a74ab060.html"/></a></noscript>
</center>
</td>
</tr>
</table>
<p>
<p>
This weekend I released version 0.9.3 of <a href="../_/http/www.artima.com/scalatest/index.html">ScalaTest</a>, a testing tool for Java and Scala programmers. One of the issues that has arisen as I've been working on ScalaTest is what to do about <code>setup</code> and <code>tearDown</code>. These methods, which appeared on class <code>TestCase</code> of the original JUnit, run before and after each test. (JUnit 4 and TestNG use "before" and "after" annotations to serve the same purpose.) This allows you to reinitialize shared mutable objects referenced from instance variables, or other mutable "fixtures" such as files, databases, or sockets, before each test. If one test destroys a fixture, the next test will get a new fixture.
</p>
<p>
In ScalaTest, I pulled this technique out into a separate trait, which I called <code>ImpSuite</code>. The "Imp" in <code>ImpSuite</code> is short for "imperative," because this technique is definitely an imperative approach to solving the problem. If you want to take this approach in ScalaTest, it is as easy as mixing in trait <code>ImpSuite</code> and overriding methods <code>beforeEach</code> and/or <code>afterEach</code>. However, I wanted to recommend that users consider a few other approaches that avoid reassigning variables (<code>var</code>s) first, because the tradition in Scala programming is to minimize the use of <code>var</code>s.
</p>
<p>
I wanted to get feedback on these suggestions. I'm including the relevant section of the ScalaTest's Scaladoc next. Please take a look and submit feedback in the forum discussion for this post.
</p>
<p>
<h1>Test fixtures (from ScalaTest's documentation)</h1>
</p>
<p>
 A test <em>fixture</em> is objects or other artifacts (such as files, sockets, database
 connections, etc.) used by tests to do their work.
 If a fixture is used by only one test method, then the definitions of the fixture objects should
 be local to the method, such as the objects assigned to <code>sum</code> and <code>diff</code> in the
 previous <code>MySuite</code> examples. If multiple methods need to share a fixture, the best approach
 is to assign them to instance variables. Here's a (very contrived) example, in which the object assigned
 to <code>shared</code> is used by multiple test methods:
 </p>
<pre class="indent">
 <font color="#0000e6">import</font> org.scalatest.Suite

 <font color="#0000e6">class</font> <font color="#66009a">MySuite</font> <font color="#0000e6">extends</font> <font color="#66009a">Suite</font> {

   <font color="#949494">// Sharing fixture objects via instance variables</font>
   <font color="#0000e6">private val</font> shared = <font color="#cd7b00">5</font>

   <font color="#0000e6">def</font> testAddition() {
     <font color="#0000e6">val</font> sum = <font color="#cd7b00">2</font> + <font color="#cd7b00">3</font>
     assert(sum === shared)
   }

   <font color="#0000e6">def</font> testSubtraction() {
     <font color="#0000e6">val</font> diff = <font color="#cd7b00">7</font> - <font color="#cd7b00">2</font>
     assert(diff === shared)
   }
 }
 </pre>
<p>
 In some cases, however, shared <em>mutable</em> fixture objects may be changed by test methods such that
 it needs to be recreated or reinitialized before each test. Shared resources such
 as files or database connections may also need to 
 be cleaned up after each test. JUnit offers methods <code>setup</code> and
 <code>tearDown</code> for this purpose. In ScalaTest, you can use <code>ImpSuite</code>,
 which will be described later, to implement an approach similar to JUnit's <code>setup</code>
 and <code>tearDown</code>, however, this approach often involves reassigning <code>var</code>s
 between tests. Before going that route, you should consider two approaches that
 avoid <code>var</code>s. One approach is to write one or more "create" methods
 that return a new instance of a needed object (or a tuple of new instances of
 multiple objects) each time it is called. You can then call a create method at the beginning of each
 test method that needs the fixture, storing the fixture object or objects in local variables. Here's an example:
 </p>
<pre class="indent">
 <font color="#0000e6">import</font> org.scalatest.Suite
 <font color="#0000e6">import</font> scala.collection.mutable.ListBuffer

 <font color="#0000e6">class</font> <font color="#66009a">MySuite</font> <font color="#0000e6">extends</font> <font color="#66009a">Suite</font> {

   <font color="#949494">// create objects needed by tests and return as a tuple</font>
   <font color="#0000e6">private def</font> createFixture = (
     <font color="#0000e6">new</font> <font color="#66009a">StringBuilder</font>(<font color="#cd7b00">"ScalaTest is "</font>),
     <font color="#0000e6">new</font> <font color="#66009a">ListBuffer</font><font color="#66009a">[String]</font>
   )

   <font color="#0000e6">def</font> testEasy() {
     <font color="#0000e6">val</font> (builder, lbuf) = createFixture
     builder.append(<font color="#cd7b00">"easy!"</font>)
     assert(builder.toString === <font color="#cd7b00">"ScalaTest is easy!"</font>)
     assert(lbuf.isEmpty)
     lbuf += <font color="#cd7b00">"sweet"</font>
   }

   <font color="#0000e6">def</font> testFun() {
     <font color="#0000e6">val</font> (builder, lbuf) = createFixture
     builder.append(<font color="#cd7b00">"fun!"</font>)
     assert(builder.toString === <font color="#cd7b00">"ScalaTest is fun!"</font>)
     assert(lbuf.isEmpty)
   }
 }
 </pre>
<p>
 Another approach to mutable fixture objects that avoids <code>var</code>s is to create "with" methods,
 which take test code as a function that takes the fixture objects as parameters, and wrap test code in calls to the "with" method. Here's an example:
 </p>
<pre class="indent">
 <font color="#0000e6">import</font> org.scalatest.Suite
 <font color="#0000e6">import</font> scala.collection.mutable.ListBuffer

 <font color="#0000e6">class</font> <font color="#66009a">MySuite</font> <font color="#0000e6">extends</font> <font color="#66009a">Suite</font> {

   <font color="#0000e6">private def</font> withFixture(testFunction: <font color="#66009a">(StringBuilder, ListBuffer[String]) =&gt; Unit</font>) {

     <font color="#949494">// Create needed mutable objects</font>
     <font color="#0000e6">val</font> sb = <font color="#0000e6">new</font> <font color="#66009a">StringBuilder</font>(<font color="#cd7b00">"ScalaTest is "</font>)
     <font color="#0000e6">val</font> lb = <font color="#0000e6">new</font> <font color="#66009a">ListBuffer</font><font color="#66009a">[String]</font>

     <font color="#949494">// Invoke the test function, passing in the mutable objects</font>
     testFunction(sb, lb)
   }

   <font color="#0000e6">def</font> testEasy() {
     withFixture {
       (builder, lbuf) =&gt; {
         builder.append(<font color="#cd7b00">"easy!"</font>)
         assert(builder.toString === <font color="#cd7b00">"ScalaTest is easy!"</font>)
         assert(lbuf.isEmpty)
         lbuf += <font color="#cd7b00">"sweet"</font>
       }
     }
   }

   <font color="#0000e6">def</font> testFun() {
     withFixture {
       (builder, lbuf) =&gt; {
         builder.append(<font color="#cd7b00">"fun!"</font>)
         assert(builder.toString === <font color="#cd7b00">"ScalaTest is fun!"</font>)
         assert(lbuf.isEmpty)
       }
     }
   }
 }
</pre>
 
 One advantage of this approach compared to the create method approach shown previously is that
 you can more easily perform cleanup after each test executes. For example, you
 could create a temporary file before each test, and delete it afterwords, by
 doing so before and after invoking the test function in a <code>withTempFile</code>
 method. Here's an example:

 <pre class="indent">
 <font color="#0000e6">import</font> org.scalatest.Suite
 <font color="#0000e6">import</font> java.io.FileReader
 <font color="#0000e6">import</font> java.io.FileWriter
 <font color="#0000e6">import</font> java.io.File

 <font color="#0000e6">class</font> <font color="#66009a">MySuite</font> <font color="#0000e6">extends</font> <font color="#66009a">Suite</font> {

   <font color="#0000e6">private def</font> withTempFile(testFunction:<font color="#66009a"> FileReader =&gt; Unit</font>) {

     <font color="#0000e6">val</font> FileName = <font color="#cd7b00">"TempFile.txt"</font>

     <font color="#949494">// Set up the temp file needed by the test</font>
     <font color="#0000e6">val</font> writer = <font color="#0000e6">new</font> <font color="#66009a">FileWriter</font>(<font color="#66009a">FileName</font>)
     <font color="#0000e6">try</font> {
       writer.write(<font color="#cd7b00">"Hello, test!"</font>)
     }
     <font color="#0000e6">finally</font> {
       writer.close()
     }

     <font color="#949494">// Create the reader needed by the test</font>
     <font color="#0000e6">val</font> reader = <font color="#0000e6">new</font> <font color="#66009a">FileReader</font>(<font color="#66009a">FileName</font>)

     <font color="#0000e6">try</font> {
       <font color="#949494">// Run the test using the temp file</font>
       testFunction(reader)
     }
     <font color="#0000e6">finally</font> {
       <font color="#949494">// Close and delete the temp file</font>
       reader.close()
       <font color="#0000e6">val</font> file = <font color="#0000e6">new</font> <font color="#66009a">File</font>(<font color="#66009a">FileName</font>)
       file.delete()
     }
   }

   <font color="#0000e6">def</font> testReadingFromTheTempFile() {
     withTempFile {
       (reader) =&gt; {
         <font color="#0000e6">var</font> builder = <font color="#0000e6">new</font> <font color="#66009a">StringBuilder</font>
         <font color="#0000e6">var</font> c = reader.read()
         <font color="#0000e6">while</font> (c != <font color="#cd7b00">-1</font>) {
           builder.append(c.toChar)
           c = reader.read()
         }
         assert(builder.toString === <font color="#cd7b00">"Hello, test!"</font>)
       }
     }
   }

   <font color="#0000e6">def</font> testFirstCharOfTheTempFile() {
     withTempFile {
       (reader) =&gt; {
         assert(reader.read() === <font color="#cd7b00">'H'</font>)
       }
     }
   }
 }
 </pre>
<p>
 If you are more comfortable with reassigning instance variables, however, you can
 instead use <code>ImpSuite</code>, a subtrait of <code>Suite</code> that provides
 methods that will be run before and after each test. <code>ImpSuite</code>'s
 <code>beforeEach</code> method will be run before, and its <code>afterEach</code>
 method after, each test (like JUnit's <code>setup</code>  and <code>tearDown</code>
 methods, respectively). For example, here's how you'd write the previous
 test that uses a temp file with an <code>ImpSuite</code>:
 </p>
<pre class="indent">
 <font color="#0000e6">import</font> org.scalatest.ImpSuite
 <font color="#0000e6">import</font> java.io.FileReader
 <font color="#0000e6">import</font> java.io.FileWriter
 <font color="#0000e6">import</font> java.io.File

 <font color="#0000e6">class</font> <font color="#66009a">MySuite</font> <font color="#0000e6">extends</font> <font color="#66009a">ImpSuite</font> {

   <font color="#0000e6">private</font> <font color="#0000e6">val</font> FileName = <font color="#cd7b00">"TempFile.txt"</font>
   <font color="#0000e6">private</font> <font color="#0000e6">var</font> reader:<font color="#66009a"> FileReader</font> = _

   <font color="#949494">// Set up the temp file needed by the test</font>
   <font color="#0000e6">override</font> <font color="#0000e6">def</font> beforeEach() {
     <font color="#0000e6">val</font> writer = <font color="#0000e6">new</font> <font color="#66009a">FileWriter</font>(<font color="#66009a">FileName</font>)
     <font color="#0000e6">try</font> {
       writer.write(<font color="#cd7b00">"Hello, test!"</font>)
     }
     <font color="#0000e6">finally</font> {
       writer.close()
     }

     <font color="#949494">// Create the reader needed by the test</font>
     reader = <font color="#0000e6">new</font> <font color="#66009a">FileReader</font>(<font color="#66009a">FileName</font>)
   }

   <font color="#949494">// Close and delete the temp file</font>
   <font color="#0000e6">override</font> <font color="#0000e6">def</font> afterEach() {
     reader.close()
     <font color="#0000e6">val</font> file = <font color="#0000e6">new</font> <font color="#66009a">File</font>(<font color="#66009a">FileName</font>)
     file.delete()
   }

   <font color="#0000e6">def</font> testReadingFromTheTempFile() {
     <font color="#0000e6">var</font> builder = <font color="#0000e6">new</font> <font color="#66009a">StringBuilder</font>
     <font color="#0000e6">var</font> c = reader.read()
     <font color="#0000e6">while</font> (c != <font color="#cd7b00">-1</font>) {
       builder.append(c.toChar)
       c = reader.read()
     }
     assert(builder.toString === <font color="#cd7b00">"Hello, test!"</font>)
   }

   <font color="#0000e6">def</font> testFirstCharOfTheTempFile() {
     assert(reader.read() === <font color="#cd7b00">'H'</font>)
   }
 }
 </pre>
<p>
 In this example, the instance variable <code>reader</code> is a <code>var</code>, so
 it can be reinitialized between tests by the <code>beforeEach</code> method. If you
 want to execute code before and after all tests (and nested suites) in a suite, such
 as you could do with <code>@BeforeClass</code> and <code>@AfterClass</code>
 annotations in JUnit 4, you can use the <code>beforeAll</code> and <code>afterAll</code>
 methods of <code>ImpSuite</code>.
</p>
<p>
See the <a href="../_/http/www.artima.com/scalatest/doc-0.9.3/index.html">documentation for ScalaTest</a> for more information.
 </p>
<h1>What's your opinion?</h1>
<p>
Would you want to write tests this way? Would you stick with before and after? Do you see any benefit in trying to avoid <code>var</code>s like this?
</p>
<h1>Talk Back!</h1>
<p>
Have an opinion?


Readers have already posted

<a href="../_/https/www.artima.com/forums/flat.html$/forum=106&amp;thread=232028.html">7

comments</a>
about this weblog entry. Why not

<a href="../_/https/www.artima.com/forums/post.html$/forum=106&amp;thread=232028&amp;reply=true.html">add yours</a>?


<h1>RSS Feed</h1>
<p>
If you'd like to be notified whenever Bill Venners adds a new entry to <a href="../index.html$/blogger=bv.html">his weblog</a>, subscribe to his <a href="../feeds/bloggers/bv.rss">RSS feed</a>.

<center>
<div class="sociallinks">
<a href="../_/http/digg.com/submit$/phase=2&amp;url=http%3A%2F%2Fwww.artima.com%2Fweblogs%2Fviewpost.jsp%3Fthread%3D232028&amp;title=Testing+without+setup+and+tearDown&amp;bodytext=In+the+most+recent+release+of+ScalaTest%2C+I%27ve+placed+some+guidelines+in+the+documentation+for+how+to+avoid+the+use+of+vars+in+testing+code.+In+this+post+I+include+those+guidelines+and+ask+for+feedback.&amp;topic=programming">
<img alt="Digg" border="0" height="14" hspace="8" src="../_/https/www.artima.com/images/digg.gif" width="16">Digg
  </img></a>
  |
  <a href="../_/http/del.icio.us/post$/url=http%3A%2F%2Fwww.artima.com%2Fweblogs%2Fviewpost.jsp%3Fthread%3D232028&amp;title=Testing+without+setup+and+tearDown">
<img alt="del.icio.us" border="0" height="16" hspace="8" src="../_/https/www.artima.com/images/delicious.gif" vspace="1" width="16">del.icio.us
  </img></a>
  |
  <a href="../_/http/programming.reddit.com/submit$/url=http%3A%2F%2Fwww.artima.com%2Fweblogs%2Fviewpost.jsp%3Fthread%3D232028&amp;title=Testing+without+setup+and+tearDown">
<img alt="Reddit" border="0" height="18" hspace="8" src="../_/https/www.artima.com/images/reddit.gif" width="18"/>Reddit
  </a>
</div>
</center>
<h1>About the Blogger</h1>
<p>
<table><tr valign="bottom"><td><img align="right" src="../_/https/www.artima.com/images/bv.jpg"/></td><td>Bill Venners is president of Artima, Inc., publisher of Artima Developer (www.artima.com). He is author of the book, <em>Inside the Java Virtual Machine</em>, a programmer-oriented survey of the Java platform's architecture and internals. His popular columns in JavaWorld magazine covered Java internals, object-oriented design, and Jini. Active in the Jini Community since its inception, Bill led the Jini Community's ServiceUI project, whose ServiceUI API became the de facto standard way to associate user interfaces to Jini services.  Bill is also the lead developer and designer of ScalaTest, an open source testing tool for Scala and Java developers, and coauthor with Martin Odersky and Lex Spoon of the book, <em>Programming in Scala</em>.</td></tr></table><p>
<div class="sp">This weblog entry is Copyright © 2008 Bill Venners. All rights reserved.</div>
</p></p></p></p></p></div>

<hr width="100%">
<table align="center" width="50%">
<tr>
<td>
<div class="horizontaltextadbox">
<div class="adheadline">Sponsored Links</div>
<div id="sponsoredlinks">
</div>
</div>
</td>
</tr>
</table>
<hr width="100%"/>
<center>
<script type="text/javascript"><!--
google_ad_client = "pub-3911176865765226";
google_alternate_color = "ffffff";
google_ad_width = 728;
google_ad_height = 15;
google_ad_format = "728x15_0ads_al";
google_ad_channel = "";
google_color_border = "ffffff";
google_color_bg = "FFFFFF";
google_color_link = "003090";
google_color_text = "000000";
google_color_url = "666666";
//--></script>
<script src="../_/https/pagead2.googlesyndication.com/pagead/show_ads.js" type="text/javascript">
</script>
<br>
<br/>
<!-- SiteSearch Google -->
<form action="../_/https/www.google.com/custom/index.html" method="get">
<table bgcolor="#ffffff" border="0">
<tr><td align="left" height="32" nowrap="nowrap" valign="top">
<a href="../_/https/www.google.com/index.html">
<img alt="Google" border="0" src="../_/https/www.google.com/logos/Logo_25wht.gif"/></a>
</td>
<td nowrap="nowrap">
<input name="domains" type="hidden" value="Artima.com"/>
<input maxlength="255" name="q" size="31" type="text" value=""/>
<input name="sa" type="submit" value="Search"/>
</td></tr>
<tr>
<td> </td>
<td nowrap="nowrap">
<font color="#000000" size="-1">
<input name="sitesearch" type="radio" value=""/> Web
<input checked="checked" name="sitesearch" type="radio" value="Artima.com"/>Artima.com
</font>  
<input name="client" type="hidden" value="pub-3911176865765226"/>
<input name="forid" type="hidden" value="1"/>
<input name="ie" type="hidden" value="ISO-8859-1"/>
<input name="oe" type="hidden" value="ISO-8859-1"/>
<input name="cof" type="hidden" value="GALT:#008000;GL:1;DIV:#336699;VLC:663399;AH:center;BGC:FFFFFF;LBGC:FFFFFF;ALC:0000FF;LC:0000FF;T:000000;GFNT:0000FF;GIMP:0000FF;LH:50;LW:150;L:https://www.artima.com/images/artima150.gif;S:https://www.artima.com;FORID:1;"/>
<input name="hl" type="hidden" value="en"/>
</td></tr></table>
</form>
<!-- SiteSearch Google -->
</br></center>
<br/>
<div class="sp">
<div style="text-align: center;">
<a href="../_/https/www.artima.com/copyright.html">Copyright</a> © 1996-2019 Artima, Inc. All Rights Reserved. - <a href="../_/https/www.artima.com/privacy.html">Privacy Policy</a> - <a href="../_/https/www.artima.com/termsofuse.html">Terms of Use</a>
</div>
</div>
<br/>
<script language="JavaScript" type="text/javascript">
<!--
function initBannerVarForZone(zone) {
        initBannerVarForZoneWithScript(zone, 'adjs_modified');
}

function initBannerVarForZoneWithScript(zone, phpScript) {

        if (!document.phpAds_used) document.phpAds_used = ',';
        phpAds_random = new String (Math.random());
        phpAds_random = phpAds_random.substring(2,11);

        var nextScriptSrc = '../_/https/www.artima.com/zcr/index.html' + phpScript + '.php?n=' +
                phpAds_random  +
                '&amp;what=zone:' + zone + '&amp;target=_top&amp;block=1&amp;blockcampaign=1' +
                '&amp;exclude=' + document.phpAds_used;

        document.write("<script language='JavaScript' type='text/javascript' src='");
        document.write(nextScriptSrc);
        document.write("'><\/script>");

}

function replaceDiv(divID) {
        document.getElementById(divID).innerHTML = phpadsbanner;
}
-->
</script>
<script language="JavaScript" type="text/javascript">
<!--
initBannerVarForZone(3);
-->
</script>
<script language="JavaScript" type="text/javascript">
<!--
replaceDiv('leftskyscraper');
-->
</script>
<script language="JavaScript" type="text/javascript">
<!--
initBannerVarForZoneWithScript(4, 'textman');
-->
</script>
<script language="JavaScript" type="text/javascript">
<!--
replaceDiv('sponsoredlinks');
-->
</script>
</hr><a href="https://dafoster.net/projects/crystal-web-archiver/" id="cr-footer-banner" style="border-top: 2px #B40010 solid;background: #FFFAE1;font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;font-variant: initial;font-weight: initial;text-transform: none;font-size: 14px;color: #6c757d;line-height: 2.0;cursor: pointer;display: flex;align-items: center;justify-content: center;gap: 4px;clear: both;" target="_blank"><img height="24" onerror="this.style['display'] = 'none';" src="../_/crystal/resources/appicon.png" width="24"/><span>This page was archived with Crystal</span><script>window.addEventListener('load', function() { const $1 = document.querySelector('#cr-footer-banner'); if (!$1) { return; } if (window !== window.top) { let $2 = false; if (window.name) { const $3 = window.parent.document.getElementsByName(window.name); if ($3.length === 1) { const $4 = $3[0]; if ($4.tagName === 'FRAME' && $4.parentElement.tagName === 'FRAMESET') { let $5 = $4; while (true) { if ($5.parentElement.tagName !== 'FRAMESET') { $2 = true; break; } if ($5.parentElement.attributes['rows'] !== undefined) { const $6 = $5.parentElement.children; if ($5 === $6[$6.length - 1]) { $5 = $5.parentElement; continue; } else { break; } } else if ($5.parentElement.attributes['cols'] !== undefined) { const $7 = Array.from($5.parentElement.children); const $8 = $7.indexOf($5); if ($8 === -1) { break; } const $9 = $5.parentElement.attributes['cols'].value.split(','); const $10 = $9.map((s) => parseInt(s.trim())); if ($9[$8].trim() === '*' || $10[$8] === Math.max.apply(null, $10)) { $5 = $5.parentElement; continue; } else { break; } } else { break; } } } } } if (!$2) { $1.style['display'] = 'none'; } } const $11 = $1.getBoundingClientRect(); const $12 = ($11.y < window.innerHeight - $11.height); if ($12) { $1.style['position'] = 'fixed'; $1.style['bottom'] = '0'; $1.style['left'] = '0'; $1.style['right'] = '0'; $1.style['z-index'] = '9999'; } const $13 = ( document.body.getBoundingClientRect().height < $11.height * 2 ); if ($13) { $1.style['display'] = 'none'; }
});</script></a></body>
</html>
