
<!DOCTYPE html>

<html>
<head><meta content="noindex,nofollow" name="robots"/>
<title>The Second Half of "Buy Now" Buttons</title>
<meta charset="utf-8"/>
<meta content="Bruce Eckel" name="author">
<link href="../_/https/www.artima.com/artima.css" rel="stylesheet" type="text/css"/>
<link href="../_/https/www.artima.com/favicon.ico" rel="shortcut icon"/>
</meta></head>
<body><table cellspacing="0" width="100%">
<tr>
<td align="left" valign="bottom">
<a href="../_/https/www.artima.com/index.html"><img alt="The Artima Developer Community" border="0" height="43" src="../_/https/www.artima.com/images/a7.gif" width="550"/></a>
</td>
</tr></table>
<table bgcolor="#333333" width="100%">
<tr>
<td align="center">
<div class="ml">
<a class="hl" href="../_/https/www.artima.com/articles/index.html">Articles</a> |
<a class="hl" href="../_/https/www.artima.com/news/index.html">News</a> |
<a class="hl" href="../index.html">Weblogs</a> |
<a class="hl" href="../_/https/www.artima.com/shop/catalog/index.html">Books</a> |
<a class="hl" href="../_/https/www.artima.com/forums/index.html">Forums</a>
</div>
</td>
</tr>
</table>
<table bgcolor="#CCCCCC" width="100%">
<tr>
<td align="center">
<div class="sc">
<a href="../index.html">Artima Weblogs</a> | 

<a href="../index.html$/blogger=beckel.html">Bruce Eckel's Weblog</a> | 

<a href="../_/https/www.artima.com/forums/flat.html$/forum=106&amp;thread=204039.html">Discuss</a> | 
<a "buy="" %0a%0ahttps:="" %0aby="" %0athe="" bruce="" buttons="" buttons&body="%0AArtima" buy="" eckel="" half="" href="mailto:?subject=The Second Half of " now"="" of="" second="" viewpost.jsp?thread='204039"' weblogs="" www.artima.com="">Email</a> | 
<a href="../viewpostP.html$/thread=204039.html">Print</a> | 
<a href="../bloggers.html">Bloggers</a> | 
<a class="sl" href="thread=202591.html" title="Old vs. New Marketing">Previous</a> | 
<a class="sl" href="thread=204059.html" title="Automatically Synchronize Your Site">Next</a>
</div>
</td>
</tr>
</table>
<table bgcolor="#EEEEEE" width="100%">
<tr>
<td align="center">
<div class="sc">
<span style="color: #555555;">Sponsored Link</span> <span style="color: #888888;">•</span>
<script language="JavaScript" src="../_/https/www.artima.com/zcr/adx.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
   if (!document.phpAds_used) document.phpAds_used = ',';
   phpAds_random = new String (Math.random()); phpAds_random = phpAds_random.substring(2,11);
   
   document.write ("<" + "script language='JavaScript' type='text/javascript' src='");
   document.write ("../_/https/www.artima.com/zcr/adjs.html$/n=.html" + phpAds_random);
   document.write ("&amp;what=zone:9&amp;target=_top");   document.write ("&amp;exclude=" + document.phpAds_used);
   if (document.referrer)
      document.write ("&amp;referer=" + escape(document.referrer));
   document.write ("'><" + "/script>");
//-->
</script><noscript><a href="../_/https/www.artima.com/zcr/adclick.html$/n=a799ecf6.html" target="_top"><img alt="" border="0" src="../_/https/www.artima.com/zcr/adview.html$/what=zone:9&amp;n=a0587811.html"/></a></noscript>
</div>
</td>
</tr>
</table>
<br/>
<div class="vegies">
<div class="tc">
<span class="sts">Computing Thoughts</span><br>
<span class="ts">The Second Half of "Buy Now" Buttons</span><br/>
<span class="as">by Bruce Eckel</span><br/>
<span class="pd">April 27, 2007</span><br/>
</br></div>
<blockquote>
<b>Summary</b><br/>
"Buy Now" buttons are a great invention because they dramatically simplify sales via the web. But they only solve part of the problem.

</blockquote>
<hr align="left" width="90%"/>
<table align="right">
<tr>
<td>
<div class="adnotice">
Advertisement
</div>
<center>
<script language="JavaScript" src="../_/https/www.artima.com/zcr/adx.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
if (!document.phpAds_used) document.phpAds_used = ',';
phpAds_random = new String (Math.random()); phpAds_random = phpAds_random.substring(2,11);
document.write ("<" + "script language='JavaScript' type='text/javascript' src='");
document.write ("../_/https/www.artima.com/zcr/adjs.html$/n=.html" + phpAds_random);
document.write ("&amp;what=zone:2");
document.write ("&amp;exclude=" + document.phpAds_used);
if (document.referrer)
document.write ("&amp;referer=" + escape(document.referrer));
document.write ("'><" + "/script>");
//-->
</script><noscript><a href="../_/https/www.artima.com/zcr/adclick.html$/n=a74ab060.html" target="_blank"><img alt="" border="0" src="../_/https/www.artima.com/zcr/adview.html$/what=zone:2&amp;n=a74ab060.html"/></a></noscript>
</center>
</td>
</tr>
</table>
<p>
Paypal, and now Google Checkout, saw that if Joe Average Web Creator was going to have access to the complex world of web finance, they needed to dramatically simplify the creation of a transaction. Paypal has a form where you tell it information about the transaction, and it produces HTML that you paste into your web page.

<p>Paypal also allows you to add extra information to your button, which shows up in various ways (some useful, some less so) as part of the resulting Paypal transaction. Mysteriously, at some point when you start adding particular fields, Paypal claims that it is unable to encrypt your button, which means that theoretically someone could futz with your unencrypted button (although this would probably be caught), but more importantly you end up exposing your raw email address as part of the unencrypted button code. It's been this way for quite awhile, and it seems an obvious thing to fix.

<p>Google Checkout encrypts everything, but the additional information you can add is quite limited. Since Google Checkout is the newcomer and is eager to please, I'll direct my comments at them, but I think Paypal might also be open to suggestions, because they've done some very good things lately -- in particular the postage-labeling system.

<p>One answer to the issues I raise here is "hey, we have all that. It's possible to program to our API." I spent a fair amount of time about a year ago learning Paypal's API, so I know this is true. The Google Checkout API doesn't look much different, and the effort required to use that looks the same as Paypal's. Nontrivial. We need the simplicity of the "Buy Now" button applied to the other parts of the transaction. So "possible" doesn't cut it; we need the lazy web builder's solution.

<p>My first observation is that data storage is split. I have to collect some information, and Google or Paypal collects other information. So if I want to keep track of things I have to capture that information, which means the user could easily end up being asked multiple times for the same information.

<p>Why does the "Buy Now" button only capture some information? If Google is storing all the vast amounts of email I'm generating, why not a relatively small amount of information that goes along with each transaction? That way I don't have to decide what is stored on my server and what goes on Google's server. It all gets stored safely on Google.

<p>So that's step one: The "Buy Now" button should allow me to add capture fields for any information that I need from the customer, and all this information will be collected via HTTPS just like the credit card information, and it will be stored in the same safe place as the credit card information.

<p>Step two is the callback. Right now, a "Buy Now" button allows me to begin the transaction, but in order for me to know when a transaction is completed I have to climb the complexity cliff. Paypal actually has a callback in their "Buy Now," which simply takes the user to a page where you can say "thank you for purchasing," but without any information transferred about the transaction. To get the information you really need requires fancier programming, far from the abilities of the average (or lazy, like myself) "Buy Now" button user. Google Checkout appears to be the same.

<p>The problem is that we're dealing with asynchronicity, the normal situation on the web. In effect, a "Buy Now" button starts a function call, but you can never know when that call will be completed, or even <i>if</i> it will be completed, and so it's not like a normal synchronous function call where you wait and it returns a value to you so you know it's done and you can move on. With an asynchronous call, you start it and then you need some other mechanism to know when that call is completed.

<p>One solution, which we saw introduced in the concurrency library in Java 5 (although the concept was older than that) is the "Future", which is an object that is immediately returned from a function call. You can query the future to find out if the call is completed (which reduces you to polling -- not a good solution here).

<p>What we need is to be able to go about our business and then, if and when the transaction is ever completed, we get called back. But in the case of both Paypal and Google, setting up such a callback is much, much harder than starting the transaction with the Buy Now button. For one thing, both services require that you create an API that operates within HTTPS. Not unreasonable, since they are sending you information that should be kept secure. But not something that the average "Buy Now" button creator can do.

<p>I think the answer is to (again) move the complexity onto Google. For starters, if the problem is security, then don't send me anything that needs security. Instead, just tell me that "transaction 11238298398 completed." And this information will do no one any good unless they can connect back to Google (via Google's security) and find out what that means.

<p>To do this, the "Buy Now" button user will need a simple messaging API on their server, which should be provided by Google in a form that can be relatively easily installed on any server. There may be minimal requirements (the server runs PHP, for example), but somehow a simple message can get from Google Checkout to your server, and the queue of messages would ideally be plain text or simple XML.

<p>This definitely raises the requirments of the web developer, but only a little, rather than starting with the simplicity of "Buy Now" and then making a quantum leap into full-fledged programming. With this system, the web developer does need to be able to examine messages on the queue and write code, but that code is vastly simpler than what's required now.

<p>When a message arrives in the queue, the queue calls code that you provide for responding to messages. You look in the queue and decide what to do. Multiple boilerplate examples of response code in different languages could be provided.

<p>As mentioned earlier, the messages are trivial and safe to leave unencrypted. However, your response code can turn around and call back to the Google server, using all the security mechanisms provided by Google, and find out what transaction 11238298398 actually contains (short of the critical credit-card information, for example). In fact, at any time I should be able to call into the Google server and generate a report containing, for example, how many people are signed up for my next event. When I get the initial callback, I can reduce the number of seats available for that event, automatically send out the welcome information package for the event, etc. And since all the information I need has been collected via the "Buy Now" button and is stored at Google, it's easy for me to recover and use any of that information, without even needing to know anything about database programming.

<p>This is still obviously a step up from the simplicity of creating a "Buy Now" button, but a system like this would open up the possibility of creating sophisticated eCommerce systems to a vastly larger audience.

<h1>Talk Back!</h1>
<p>
Have an opinion?


Readers have already posted

<a href="../_/https/www.artima.com/forums/flat.html$/forum=106&amp;thread=204039.html">2

comments</a>
about this weblog entry. Why not

<a href="../_/https/www.artima.com/forums/post.html$/forum=106&amp;thread=204039&amp;reply=true.html">add yours</a>?


<h1>RSS Feed</h1>
<p>
If you'd like to be notified whenever Bruce Eckel adds a new entry to <a href="../index.html$/blogger=beckel.html">his weblog</a>, subscribe to his <a href="../feeds/bloggers/beckel.rss">RSS feed</a>.

<center>
<div class="sociallinks">
<a href="../_/http/digg.com/submit$/phase=2&amp;url=http%3A%2F%2Fwww.artima.com%2Fweblogs%2Fviewpost.jsp%3Fthread%3D204039&amp;title=The+Second+Half+of+%22Buy+Now%22+Buttons&amp;bodytext=%26quot%3BBuy+Now%26quot%3B+buttons+are+a+great+invention+because+they+dramatically+simplify+sales+via+the+web.+But+they+only+solve+part+of+the+problem.&amp;topic=programming">
<img alt="Digg" border="0" height="14" hspace="8" src="../_/https/www.artima.com/images/digg.gif" width="16">Digg
  </img></a>
  |
  <a href="../_/http/del.icio.us/post$/url=http%3A%2F%2Fwww.artima.com%2Fweblogs%2Fviewpost.jsp%3Fthread%3D204039&amp;title=The+Second+Half+of+%22Buy+Now%22+Buttons">
<img alt="del.icio.us" border="0" height="16" hspace="8" src="../_/https/www.artima.com/images/delicious.gif" vspace="1" width="16">del.icio.us
  </img></a>
  |
  <a href="../_/http/programming.reddit.com/submit$/url=http%3A%2F%2Fwww.artima.com%2Fweblogs%2Fviewpost.jsp%3Fthread%3D204039&amp;title=The+Second+Half+of+%22Buy+Now%22+Buttons">
<img alt="Reddit" border="0" height="18" hspace="8" src="../_/https/www.artima.com/images/reddit.gif" width="18"/>Reddit
  </a>
</div>
</center>
<h1>About the Blogger</h1>
<p>
<table><tr valign="bottom"><td><img align="right" src="../_/https/www.artima.com/images/bruceeckel.jpg"/></td><td>Bruce Eckel (<a href="../_/http/www.bruceeckel.com/index.html">www.BruceEckel.com</a>) provides development assistance in Python with user interfaces in Flex. He is the author of Thinking in Java (Prentice-Hall, 1998, 2nd Edition, 2000, 3rd Edition, 2003, 4th Edition, 2005), the Hands-On Java Seminar CD ROM (available on the Web site), Thinking in C++ (PH 1995; 2nd edition 2000, Volume 2 with Chuck Allison, 2003), C++ Inside &amp; Out (Osborne/McGraw-Hill 1993), among others. He's given hundreds of presentations throughout the world, published over 150 articles in numerous magazines, was a founding member of the ANSI/ISO C++ committee and speaks regularly at conferences.</td></tr></table><p>
<div class="sp">This weblog entry is Copyright © 2007 Bruce Eckel. All rights reserved.</div>
</p></p></p></p></p></p></p></p></p></p></p></p></p></p></p></p></p></p></p></p></p></div>

<hr width="100%">
<table align="center" width="50%">
<tr>
<td>
<div class="horizontaltextadbox">
<div class="adheadline">Sponsored Links</div>
<div id="sponsoredlinks">
</div>
</div>
</td>
</tr>
</table>
<hr width="100%"/>
<center>
<script type="text/javascript"><!--
google_ad_client = "pub-3911176865765226";
google_alternate_color = "ffffff";
google_ad_width = 728;
google_ad_height = 15;
google_ad_format = "728x15_0ads_al";
google_ad_channel = "";
google_color_border = "ffffff";
google_color_bg = "FFFFFF";
google_color_link = "003090";
google_color_text = "000000";
google_color_url = "666666";
//--></script>
<script src="../_/https/pagead2.googlesyndication.com/pagead/show_ads.js" type="text/javascript">
</script>
<br>
<br/>
<!-- SiteSearch Google -->
<form action="../_/https/www.google.com/custom/index.html" method="get">
<table bgcolor="#ffffff" border="0">
<tr><td align="left" height="32" nowrap="nowrap" valign="top">
<a href="../_/https/www.google.com/index.html">
<img alt="Google" border="0" src="../_/https/www.google.com/logos/Logo_25wht.gif"/></a>
</td>
<td nowrap="nowrap">
<input name="domains" type="hidden" value="Artima.com"/>
<input maxlength="255" name="q" size="31" type="text" value=""/>
<input name="sa" type="submit" value="Search"/>
</td></tr>
<tr>
<td> </td>
<td nowrap="nowrap">
<font color="#000000" size="-1">
<input name="sitesearch" type="radio" value=""/> Web
<input checked="checked" name="sitesearch" type="radio" value="Artima.com"/>Artima.com
</font>  
<input name="client" type="hidden" value="pub-3911176865765226"/>
<input name="forid" type="hidden" value="1"/>
<input name="ie" type="hidden" value="ISO-8859-1"/>
<input name="oe" type="hidden" value="ISO-8859-1"/>
<input name="cof" type="hidden" value="GALT:#008000;GL:1;DIV:#336699;VLC:663399;AH:center;BGC:FFFFFF;LBGC:FFFFFF;ALC:0000FF;LC:0000FF;T:000000;GFNT:0000FF;GIMP:0000FF;LH:50;LW:150;L:https://www.artima.com/images/artima150.gif;S:https://www.artima.com;FORID:1;"/>
<input name="hl" type="hidden" value="en"/>
</td></tr></table>
</form>
<!-- SiteSearch Google -->
</br></center>
<br/>
<div class="sp">
<div style="text-align: center;">
<a href="../_/https/www.artima.com/copyright.html">Copyright</a> © 1996-2019 Artima, Inc. All Rights Reserved. - <a href="../_/https/www.artima.com/privacy.html">Privacy Policy</a> - <a href="../_/https/www.artima.com/termsofuse.html">Terms of Use</a>
</div>
</div>
<br/>
<script language="JavaScript" type="text/javascript">
<!--
function initBannerVarForZone(zone) {
        initBannerVarForZoneWithScript(zone, 'adjs_modified');
}

function initBannerVarForZoneWithScript(zone, phpScript) {

        if (!document.phpAds_used) document.phpAds_used = ',';
        phpAds_random = new String (Math.random());
        phpAds_random = phpAds_random.substring(2,11);

        var nextScriptSrc = '../_/https/www.artima.com/zcr/index.html' + phpScript + '.php?n=' +
                phpAds_random  +
                '&amp;what=zone:' + zone + '&amp;target=_top&amp;block=1&amp;blockcampaign=1' +
                '&amp;exclude=' + document.phpAds_used;

        document.write("<script language='JavaScript' type='text/javascript' src='");
        document.write(nextScriptSrc);
        document.write("'><\/script>");

}

function replaceDiv(divID) {
        document.getElementById(divID).innerHTML = phpadsbanner;
}
-->
</script>
<script language="JavaScript" type="text/javascript">
<!--
initBannerVarForZone(3);
-->
</script>
<script language="JavaScript" type="text/javascript">
<!--
replaceDiv('leftskyscraper');
-->
</script>
<script language="JavaScript" type="text/javascript">
<!--
initBannerVarForZoneWithScript(4, 'textman');
-->
</script>
<script language="JavaScript" type="text/javascript">
<!--
replaceDiv('sponsoredlinks');
-->
</script>
</hr><a href="https://dafoster.net/projects/crystal-web-archiver/" id="cr-footer-banner" style="border-top: 2px #B40010 solid;background: #FFFAE1;font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;font-variant: initial;font-weight: initial;text-transform: none;font-size: 14px;color: #6c757d;line-height: 2.0;cursor: pointer;display: flex;align-items: center;justify-content: center;gap: 4px;clear: both;" target="_blank"><img height="24" onerror="this.style['display'] = 'none';" src="../_/crystal/resources/appicon.png" width="24"/><span>This page was archived with Crystal</span><script>window.addEventListener('load', function() { const $1 = document.querySelector('#cr-footer-banner'); if (!$1) { return; } if (window !== window.top) { let $2 = false; if (window.name) { const $3 = window.parent.document.getElementsByName(window.name); if ($3.length === 1) { const $4 = $3[0]; if ($4.tagName === 'FRAME' && $4.parentElement.tagName === 'FRAMESET') { let $5 = $4; while (true) { if ($5.parentElement.tagName !== 'FRAMESET') { $2 = true; break; } if ($5.parentElement.attributes['rows'] !== undefined) { const $6 = $5.parentElement.children; if ($5 === $6[$6.length - 1]) { $5 = $5.parentElement; continue; } else { break; } } else if ($5.parentElement.attributes['cols'] !== undefined) { const $7 = Array.from($5.parentElement.children); const $8 = $7.indexOf($5); if ($8 === -1) { break; } const $9 = $5.parentElement.attributes['cols'].value.split(','); const $10 = $9.map((s) => parseInt(s.trim())); if ($9[$8].trim() === '*' || $10[$8] === Math.max.apply(null, $10)) { $5 = $5.parentElement; continue; } else { break; } } else { break; } } } } } if (!$2) { $1.style['display'] = 'none'; } } const $11 = $1.getBoundingClientRect(); const $12 = ($11.y < window.innerHeight - $11.height); if ($12) { $1.style['position'] = 'fixed'; $1.style['bottom'] = '0'; $1.style['left'] = '0'; $1.style['right'] = '0'; $1.style['z-index'] = '9999'; } const $13 = ( document.body.getBoundingClientRect().height < $11.height * 2 ); if ($13) { $1.style['display'] = 'none'; }
});</script></a></body>
</html>
