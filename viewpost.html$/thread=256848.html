
<!DOCTYPE html>

<html>
<head><meta content="noindex,nofollow" name="robots"/>
<title>The Adventures of a Pythonista in Schemeland/22</title>
<meta charset="utf-8"/>
<meta content="Michele Simionato" name="author">
<link href="../_/https/www.artima.com/artima.css" rel="stylesheet" type="text/css"/>
<link href="../_/https/www.artima.com/favicon.ico" rel="shortcut icon"/>
</meta></head>
<body><table cellspacing="0" width="100%">
<tr>
<td align="left" valign="bottom">
<a href="../_/https/www.artima.com/index.html"><img alt="The Artima Developer Community" border="0" height="43" src="../_/https/www.artima.com/images/a7.gif" width="550"/></a>
</td>
</tr></table>
<table bgcolor="#333333" width="100%">
<tr>
<td align="center">
<div class="ml">
<a class="hl" href="../_/https/www.artima.com/articles/index.html">Articles</a> |
<a class="hl" href="../_/https/www.artima.com/news/index.html">News</a> |
<a class="hl" href="../index.html">Weblogs</a> |
<a class="hl" href="../_/https/www.artima.com/shop/catalog/index.html">Books</a> |
<a class="hl" href="../_/https/www.artima.com/forums/index.html">Forums</a>
</div>
</td>
</tr>
</table>
<table bgcolor="#CCCCCC" width="100%">
<tr>
<td align="center">
<div class="sc">
<a href="../index.html">Artima Weblogs</a> | 

<a href="../index.html$/blogger=micheles.html">Michele Simionato's Weblog</a> | 

<a href="../_/https/www.artima.com/forums/flat.html$/forum=106&amp;thread=256848.html">Discuss</a> | 
<a href="mailto:?subject=The Adventures of a Pythonista in Schemeland/22&amp;body= %0AArtima Weblogs %0AThe Adventures of a Pythonista in Schemeland/22 %0Aby Michele Simionato %0A%0Ahttps://www.artima.com/weblogs/viewpost.jsp?thread=256848">Email</a> | 
<a href="../viewpostP.html$/thread=256848.html">Print</a> | 
<a href="../bloggers.html">Bloggers</a> | 
<a class="sl" href="thread=257325.html" title="Should I use a netbook as my main development platform?">Previous</a> | 
<a class="sl" href="thread=257998.html" title="The Adventures of a Pythonista in Schemeland/23">Next</a>
</div>
</td>
</tr>
</table>
<table bgcolor="#EEEEEE" width="100%">
<tr>
<td align="center">
<div class="sc">
<span style="color: #555555;">Sponsored Link</span> <span style="color: #888888;">•</span>
<script language="JavaScript" src="../_/https/www.artima.com/zcr/adx.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
   if (!document.phpAds_used) document.phpAds_used = ',';
   phpAds_random = new String (Math.random()); phpAds_random = phpAds_random.substring(2,11);
   
   document.write ("<" + "script language='JavaScript' type='text/javascript' src='");
   document.write ("../_/https/www.artima.com/zcr/adjs.html$/n=.html" + phpAds_random);
   document.write ("&amp;what=zone:9&amp;target=_top");   document.write ("&amp;exclude=" + document.phpAds_used);
   if (document.referrer)
      document.write ("&amp;referer=" + escape(document.referrer));
   document.write ("'><" + "/script>");
//-->
</script><noscript><a href="../_/https/www.artima.com/zcr/adclick.html$/n=a799ecf6.html" target="_top"><img alt="" border="0" src="../_/https/www.artima.com/zcr/adview.html$/what=zone:9&amp;n=a0587811.html"/></a></noscript>
</div>
</td>
</tr>
</table>
<br/>
<div class="vegies">
<div class="tc">
<span class="sts">The Explorer</span><br>
<span class="ts">The Adventures of a Pythonista in Schemeland/22</span><br/>
<span class="as">by Michele Simionato</span><br/>
<span class="pd">May 12, 2009</span><br/>
</br></div>
<blockquote>
<b>Summary</b><br/>
This episode goes in depth through the most obscure secrets of Scheme, by exploring the (Dark) Tower of Metalevels of the R6RS module system.

</blockquote>
<hr align="left" width="90%"/>
<table align="right">
<tr>
<td>
<div class="adnotice">
Advertisement
</div>
<center>
<script language="JavaScript" src="../_/https/www.artima.com/zcr/adx.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
if (!document.phpAds_used) document.phpAds_used = ',';
phpAds_random = new String (Math.random()); phpAds_random = phpAds_random.substring(2,11);
document.write ("<" + "script language='JavaScript' type='text/javascript' src='");
document.write ("../_/https/www.artima.com/zcr/adjs.html$/n=.html" + phpAds_random);
document.write ("&amp;what=zone:2");
document.write ("&amp;exclude=" + document.phpAds_used);
if (document.referrer)
document.write ("&amp;referer=" + escape(document.referrer));
document.write ("'><" + "/script>");
//-->
</script><noscript><a href="../_/https/www.artima.com/zcr/adclick.html$/n=a74ab060.html" target="_blank"><img alt="" border="0" src="../_/https/www.artima.com/zcr/adview.html$/what=zone:2&amp;n=a74ab060.html"/></a></noscript>
</center>
</td>
</tr>
</table>
<p>
<h1 class="title">The Dark Tower of Meta-levels</h1>
<p>I said in the previous episode that even if your implementation of choice does
not use explicit phasing, you must understand it in order to write
portable programs.  Truly understandanding explicit phasing is nontrivial,
since you must reason in terms of a (Dark) Tower of import levels, or
<em>meta-levels</em>.</p>
<p>Since the publication of the Aristotle's Metaphysics,
the word <em>meta</em> has been associated to arcane and difficult matters.
The concept of meta-level is no exception to the rule.
You can find a full description of the tower of meta-levels in the
<a class="reference" href="../_/http/www.r6rs.org/final/html/r6rs/r6rs-Z-H-10.html#node_sec_7.2">R6RS document</a>, in a rather dense paragraph in section 7 that will make
your head hurt.</p>
<p>There is also a
celebrated paper by Matthew Flatt, <em>Composable and Compilable
Macros</em> (a.k.a. <a class="reference" href="../_/http/www.cs.utah.edu/plt/publications/macromod.pdf">You want it when</a>) which predates the R6RS by many
years and is more approachable. Its intent is to motivate
the module system used by PLT Scheme, which made popular
the concept of tower of meta-levels.</p>
<p>Meta-levels are just another name for phases.
We have already encountered two meta-levels: the
run-time phase (meta-level 0) and expand time phase (meta-level 1).
However, the full tower of meta-levels is arbitrarily
high and extends in two directions, both for positive and for
negative integers (!)</p>
<div class="figure">
<img alt="../_/http/www.phyast.pitt.edu/~micheles/scheme/DarkTower.jpg" src="../_/http/www.phyast.pitt.edu/~micheles/scheme/DarkTower.jpg">
<p class="caption">Aziz faces the Dark Tower of Meta-levels</p>
</img></div>
<p>Scheme implementations with explicit phasing allow you to
import a module at a generic meta-level <tt class="docutils literal"><span class="pre">N</span></tt> with the syntax
<tt class="docutils literal"><span class="pre">(import</span> <span class="pre">(for</span> <span class="pre">(lib)</span> <span class="pre">(meta</span> <span class="pre">N)))</span></tt>, where N is an integer.
The forms <tt class="docutils literal"><span class="pre">(import</span> <span class="pre">(for</span> <span class="pre">(lib)</span> <span class="pre">run))</span></tt> and <tt class="docutils literal"><span class="pre">(import</span> <span class="pre">(for</span> <span class="pre">(lib)</span> <span class="pre">expand))</span></tt> are just
shortcuts for <tt class="docutils literal"><span class="pre">(import</span> <span class="pre">(for</span> <span class="pre">(lib)</span> <span class="pre">(meta</span> <span class="pre">0)))</span></tt> and
<tt class="docutils literal"><span class="pre">(import</span> <span class="pre">(for</span> <span class="pre">(lib)</span> <span class="pre">(meta</span> <span class="pre">1)))</span></tt>, respectively.</p>
<p>Instead of discussing much theory, in this episode I will
show two concrete examples of macros which require
importing variables at a nontrivial meta-level <em>N</em>,
with <em>N&lt;0</em> or <em>N&gt;1</em>.</p>
<p>For convenience I am keeping all the code of this episode into a
package called <tt class="docutils literal"><span class="pre">experimental</span></tt>, which you can download
from here: <a class="reference" href="../_/http/www.phyast.pitt.edu/~micheles/scheme/experimental.zip">http://www.phyast.pitt.edu/~micheles/scheme/experimental.zip</a></p>
<div class="section">
<h1><a id="an-easy-looking-macro-with-a-deep-portability-issue" name="an-easy-looking-macro-with-a-deep-portability-issue">An easy-looking macro with a deep portability issue</a></h1>
<p>My first example is a compile time <tt class="docutils literal"><span class="pre">name</span> <span class="pre">-&gt;</span> <span class="pre">value</span></tt> mapping, with some
introspection:</p>
<pre class="literal-block">
#!r6rs
(library (experimental static-map)
(export static-map)
(import (rnrs) (sweet-macros))

(def-syntax (static-map (name value) ...)
  #'(syntax-match (&lt;names&gt; name ...)
      (sub (ctx &lt;names&gt;) #''(name ...))
      (sub (ctx name) #'value)
      ...))
)
</pre>
<p>This is a kind of second order macro, since it
expands to a macro transformer; its usage is obvious in
implementations with implicit phasing:</p>
<pre class="literal-block">
$ cat use-static-map.ss
</pre>
<pre class="literal-block">
(import (rnrs) (sweet-macros) (for (experimental static-map) expand))
;; the for syntax is ignored in implementations with implicit phasing

(def-syntax color (static-map (red #\R) (green #\G) (yellow #\Y)))

(display "Available colors: ")
(display (color &lt;names&gt;))
(display (list (color red) (color green) (color yellow)))
(newline)
</pre>
<p><tt class="docutils literal"><span class="pre">color</span></tt> is a macro which replaces a symbolic name
in the set <tt class="docutils literal"><span class="pre">red</span></tt>, <tt class="docutils literal"><span class="pre">green</span></tt>, <tt class="docutils literal"><span class="pre">yellow</span></tt> with its
character representation (<tt class="docutils literal"><span class="pre">#\R</span></tt>, <tt class="docutils literal"><span class="pre">#\G</span></tt>, <tt class="docutils literal"><span class="pre">#\Y</span></tt>)
at expand-time (notice that in Scheme characters
are different from strings, i.e. the character
<tt class="docutils literal"><span class="pre">\#R</span></tt> is different from the string of length 1 <tt class="docutils literal"><span class="pre">"R"</span></tt>).</p>
<p>If you run this script in Ikarus or Ypsilon or Mosh
you will get the following unsurprising result:</p>
<pre class="literal-block">
$ ikarus --r6rs-script use-static-map.ikarus.ss
Available colors: (red green yellow)(R G Y)
</pre>
<p>However, in PLT and Larceny, the above will fail. The PLT error message
is particularly cryptic:</p>
<pre class="literal-block">
$ plt-r6rs use-static-map.ss
/home/micheles/.plt-scheme/4.0/collects/experimental/static-map.sls:8:25:
compile: bad syntax; reference to top-level identifier is not allowed,
because no #%top syntax transformer is bound in: quote
</pre>
<p>I was baffled by this error, so I asked for help in the PLT mailing
list, and I discovered that there is nothing wrong with the client
script and that there is no way to fix the problem by editing it: the
problem is in the library code!</p>
<p>The problem is hidden, since you can compile the library without issues and
you see it only when you use it. Also, the fix is pure
dark magic: you need to rewrite the import
code in <tt class="docutils literal"><span class="pre">(experimental</span> <span class="pre">static-map)</span></tt> by replacing</p>
<blockquote>
<tt class="docutils literal"><span class="pre">(import</span> <span class="pre">(rnrs))</span></tt></blockquote>
<p>with</p>
<blockquote>
<tt class="docutils literal"><span class="pre">(import</span> <span class="pre">(rnrs)</span> <span class="pre">(for</span> <span class="pre">(rnrs)</span> <span class="pre">(meta</span> <span class="pre">-1))</span></tt></blockquote>
<p>i.e. the <tt class="docutils literal"><span class="pre">static-map</span></tt> macro must import the <tt class="docutils literal"><span class="pre">(rnrs)</span></tt> environment
at meta-level -1! Why it is so? and how should I interpret meta-level -1?</p>
</div>
<div class="section">
<h1><a id="negative-meta-levels" name="negative-meta-levels">Negative meta-levels</a></h1>
<p>Matthew Flatt explained to me how meta-levels work.
The concept of meta-level is only relevant in macro programming.  When
you define a macro, the right hand side of the definition can only
refer to names which are one meta-level up, i.e. typically at meta-level
1 (expand time).  On the other hand, inside a template one goes back
one meta-level, and therefore usually a template expands at meta-level
0 (run-time).</p>
<p>However, in the case of the <tt class="docutils literal"><span class="pre">static-map</span></tt> macro, the
template is itself a <tt class="docutils literal"><span class="pre">syntax-match</span></tt> form, and since the
templates of this inner <tt class="docutils literal"><span class="pre">syntax-match</span></tt> expand one level down, we
reach meta-level -1.  This is why the macro needs to import the <tt class="docutils literal"><span class="pre">(rnrs)</span></tt>
bindings at meta-level -1 and why the error message says that <tt class="docutils literal"><span class="pre">quote</span></tt>
is unknown. The comments below should make clear how meta-levels mix:</p>
<pre class="literal-block">
(def-syntax static-map                          ;; meta-level 0
 (begin
   &lt;there could be code here ...&gt;               ;; meta-level 1
 (syntax-match ()
  (sub (static-map (name value) ...)
       #'(begin
           &lt;there could be code here ...&gt;       ;;  meta-level 0
           (syntax-match (&lt;names&gt; name ...)
             (sub (ctx &lt;names&gt;)
                #''(name ...))                  ;; meta-level -1
             (sub (ctx name)
                #'value)                        ;; meta-level -1
             ...))))
</pre>
<p>Actually <tt class="docutils literal"><span class="pre">quote</span></tt> is the only needed binding, so it would be enough
to import it with the syntax <tt class="docutils literal"><span class="pre">(import</span> <span class="pre">(for</span> <span class="pre">(only</span> <span class="pre">(rnrs)</span> <span class="pre">quote)</span> <span class="pre">(meta</span> <span class="pre">-1)))</span></tt>.
If we ignored the introspection feature, i.e. we commented out the line</p>
<p><tt class="docutils literal"><span class="pre">(sub</span> <span class="pre">(ctx</span> <span class="pre">&lt;names&gt;)</span> <span class="pre">#''(name</span> <span class="pre">...))</span></tt></p>
<p>there would be no need to import <tt class="docutils literal"><span class="pre">quote</span></tt> at meta-level -1, and the macro
would work without us even suspecting the existence of negative meta-levels.</p>
<p>Things are even trickier: if we keep the line
<tt class="docutils literal"><span class="pre">(sub</span> <span class="pre">(ctx</span> <span class="pre">&lt;names&gt;)</span> <span class="pre">#''(name</span> <span class="pre">...))</span></tt> in the original macro, but we
do not use it in client code, the original macro will apparently work,
and will break at the first attempt of using the introspection
feature, with an error message pointing to the problem in client code,
but not in library code :-(</p>
</div>
<div class="section">
<h1><a id="meta-levels-greater-than-one" name="meta-levels-greater-than-one">Meta-levels greater than one</a></h1>
<p>It is clear that the meta-level tower is theoretically unbound in the
negative direction, since you can nest macro transformers at any level
of depth, and each level decreases the meta-level by one unity; on the
other hand, the tower is theoretically unbound even in the positive direction,
since a macro can have in its right hand side a macro definition which
right hand side will requires bindings defined at an higher level, and
so on.  In general nested macro definitions <em>increase</em> the meta-level;
nested macro templates <em>decrease</em> the meta-level.</p>
<p>Here is an example of a macro which requires importing names at meta-level 2:</p>
<pre class="literal-block">
$ cat meta2.ss
</pre>
<pre class="literal-block">
#!r6rs
(import (rnrs)
        (for (sweet-macros) (meta 0) (meta 1))
        (for (only (rnrs) begin lambda display) (meta 2)))

(def-syntax m
  (let ()
    (def-syntax m2
      (begin                                ;; begin, display and
        (display "at metalevel 2\n")        ;; lambda are used here
        (lambda (x) "expanded-m\n")))       ;; at meta-level 2
    (define _ (display "at metalevel 1\n")) ;; meta-level 1
    (lambda (x) (m2))))                     ;; here

(display (m))
</pre>
<p>Notice that right hand side of a <tt class="docutils literal"><span class="pre">def-syntax</span></tt> form does not need to
be <tt class="docutils literal"><span class="pre">syntax-match</span></tt> form; the only requirement for it is to be a
transformer, i.e. a one-argument procedure. In this example the
inner macro <tt class="docutils literal"><span class="pre">m2</span></tt> has a transformer returning the string <tt class="docutils literal"><span class="pre">"m-expanded"</span></tt>
whereas the outer macro <tt class="docutils literal"><span class="pre">m</span></tt> has a transformer returning the expansion
of <tt class="docutils literal"><span class="pre">(m2)</span></tt> i.e. again the string
<tt class="docutils literal"><span class="pre">"m-expanded"</span></tt>. Running the script will print the following:</p>
<pre class="literal-block">
$ ikarus --r6rs-script meta2.ss
at meta-level 2
at meta-level 1
expanded-m
</pre>
<p>You will get the same in Larceny and in sufficiently recent versions
of PLT Scheme (&gt; 4.1.3). Currently Ypsilon raises an exception but this is
just a bug (<a class="reference" href="../_/http/code.google.com/p/ypsilon/issues/detail$/id=98/index.html">already fixed in the trunk</a>).</p>
</div>
<div class="section">
<h1><a id="discussion" name="discussion">Discussion</a></h1>
<p>The concept of meta-level is tricky. On one hand, there only two physical
meta-levels, i.e. the run-time (when the code is executed) and the compile
time (when the code is compiled). On the other hand, conceptually there is
an arbitrary number of positive meta-levels ("before compile time") and
negative meta-levels ("after run-time") which have to be taken in
account to compile/execute a program correctly: everytime the compiler
look at a nested macro, it has to consider the innermost level first,
and the outermost level last.</p>
<p>The power (and the complication) of phase specification is that the
language used at a given phase can be different from the language used
in the other phases.
Suppose for instance you are a teacher, and you want to force your
students to write their macros using only a functional subset of Scheme.
You can do so by importing at compile time all R6RS procedures except the
nonfunctional ones (like <tt class="docutils literal"><span class="pre">set!</span></tt>) while importing at run-time
the whole of R6RS. You could even perform the opposite, and remove <tt class="docutils literal"><span class="pre">set!</span></tt>
from the run-time, but allowing it at compile time.</p>
<p>However, personally I do not feel a need to distinguish the languages
at different phases and I like Scheme to be a Lisp-1 language with a
single namespace for all variables.  I am also not happy with having
to keep manually track of the meta-levels, which is difficult and
error prone when writing higher order macros. Moreover, in PLT and
Larceny writing a macro which expands to a nested macro with N levels
is difficult, since one has to write by hand all the required meta imports.</p>
<div class="figure">
<img alt="../_/http/www.phyast.pitt.edu/~micheles/scheme/tower_of_babel.jpg" src="../_/http/www.phyast.pitt.edu/~micheles/scheme/tower_of_babel.jpg">
<p class="caption">Aziz destroys the Tower of Meta-levels</p>
</img></div>
<p>All this trouble is missing in Ypsilon and in the
implementations based on psyntax. In such
systems importing a module imports its public variables for <em>all</em> meta-levels.
In other words all meta-levels share the same language: the
tower of meta-levels is effectively destroyed (one could
argue that the tower is still there, implicitly, but the point is that
the programmer does not need to think about it explicitly). The model
of implicit phasing was proposed by Kent Dybvig and
Abdul Aziz Ghuloum, who wrote his <a class="reference" href="../_/http/portal.acm.org/citation.cfm$/id=1291151.1291197&amp;coll=GUIDE&amp;dl=GUIDE&amp;CFID=34012650&amp;CFTOKEN=38507862.cfm">Ph. D. thesis</a> on the subject.</p>
</div>
<h1>Talk Back!</h1>
<p>
Have an opinion?


Be the first to

<a href="../_/https/www.artima.com/forums/post.html$/forum=106&amp;thread=256848&amp;reply=true.html">post a comment</a> about
this weblog entry.


<h1>RSS Feed</h1>
<p>
If you'd like to be notified whenever Michele Simionato adds a new entry to <a href="../index.html$/blogger=micheles.html">his weblog</a>, subscribe to his <a href="../feeds/bloggers/micheles.rss">RSS feed</a>.

<center>
<div class="sociallinks">
<a href="../_/http/digg.com/submit$/phase=2&amp;url=http%3A%2F%2Fwww.artima.com%2Fweblogs%2Fviewpost.jsp%3Fthread%3D256848&amp;title=The+Adventures+of+a+Pythonista+in+Schemeland%2F22&amp;bodytext=This+episode+goes+in+depth+through+the+most+obscure+secrets+of+Scheme%2C+by+exploring+the+%28Dark%29+Tower+of+Metalevels+of+the+R6RS+module+system.&amp;topic=programming">
<img alt="Digg" border="0" height="14" hspace="8" src="../_/https/www.artima.com/images/digg.gif" width="16"/>Digg
  </a>
  |
  <a href="../_/http/del.icio.us/post$/url=http%3A%2F%2Fwww.artima.com%2Fweblogs%2Fviewpost.jsp%3Fthread%3D256848&amp;title=The+Adventures+of+a+Pythonista+in+Schemeland%2F22">
<img alt="del.icio.us" border="0" height="16" hspace="8" src="../_/https/www.artima.com/images/delicious.gif" vspace="1" width="16"/>del.icio.us
  </a>
  |
  <a href="../_/http/programming.reddit.com/submit$/url=http%3A%2F%2Fwww.artima.com%2Fweblogs%2Fviewpost.jsp%3Fthread%3D256848&amp;title=The+Adventures+of+a+Pythonista+in+Schemeland%2F22">
<img alt="Reddit" border="0" height="18" hspace="8" src="../_/https/www.artima.com/images/reddit.gif" width="18"/>Reddit
  </a>
</div>
</center>
<h1>About the Blogger</h1>
<p>
<table><tr valign="bottom"><td><img align="right" src="../_/https/www.artima.com/images/micheleSimionato.jpg"/></td><td>Michele Simionato started his career as a Theoretical Physicist, working in Italy, France and the U.S. He turned to programming in 2003; since then he has been working professionally as a Python developer and now he lives in Milan, Italy. Michele is well known in the Python community for his posts in the newsgroup(s), his articles and his Open Source libraries and recipes. His interests include object oriented programming, functional programming, and in general programming metodologies that enable us to manage the complexity of modern software developement.</td></tr></table><p>
<div class="sp">This weblog entry is Copyright © 2009 Michele Simionato. All rights reserved.</div>
</p></p></p></p></p></div>

<hr width="100%">
<table align="center" width="50%">
<tr>
<td>
<div class="horizontaltextadbox">
<div class="adheadline">Sponsored Links</div>
<div id="sponsoredlinks">
</div>
</div>
</td>
</tr>
</table>
<hr width="100%"/>
<center>
<script type="text/javascript"><!--
google_ad_client = "pub-3911176865765226";
google_alternate_color = "ffffff";
google_ad_width = 728;
google_ad_height = 15;
google_ad_format = "728x15_0ads_al";
google_ad_channel = "";
google_color_border = "ffffff";
google_color_bg = "FFFFFF";
google_color_link = "003090";
google_color_text = "000000";
google_color_url = "666666";
//--></script>
<script src="../_/https/pagead2.googlesyndication.com/pagead/show_ads.js" type="text/javascript">
</script>
<br>
<br/>
<!-- SiteSearch Google -->
<form action="../_/https/www.google.com/custom/index.html" method="get">
<table bgcolor="#ffffff" border="0">
<tr><td align="left" height="32" nowrap="nowrap" valign="top">
<a href="../_/https/www.google.com/index.html">
<img alt="Google" border="0" src="../_/https/www.google.com/logos/Logo_25wht.gif"/></a>
</td>
<td nowrap="nowrap">
<input name="domains" type="hidden" value="Artima.com"/>
<input maxlength="255" name="q" size="31" type="text" value=""/>
<input name="sa" type="submit" value="Search"/>
</td></tr>
<tr>
<td> </td>
<td nowrap="nowrap">
<font color="#000000" size="-1">
<input name="sitesearch" type="radio" value=""/> Web
<input checked="checked" name="sitesearch" type="radio" value="Artima.com"/>Artima.com
</font>  
<input name="client" type="hidden" value="pub-3911176865765226"/>
<input name="forid" type="hidden" value="1"/>
<input name="ie" type="hidden" value="ISO-8859-1"/>
<input name="oe" type="hidden" value="ISO-8859-1"/>
<input name="cof" type="hidden" value="GALT:#008000;GL:1;DIV:#336699;VLC:663399;AH:center;BGC:FFFFFF;LBGC:FFFFFF;ALC:0000FF;LC:0000FF;T:000000;GFNT:0000FF;GIMP:0000FF;LH:50;LW:150;L:https://www.artima.com/images/artima150.gif;S:https://www.artima.com;FORID:1;"/>
<input name="hl" type="hidden" value="en"/>
</td></tr></table>
</form>
<!-- SiteSearch Google -->
</br></center>
<br/>
<div class="sp">
<div style="text-align: center;">
<a href="../_/https/www.artima.com/copyright.html">Copyright</a> © 1996-2019 Artima, Inc. All Rights Reserved. - <a href="../_/https/www.artima.com/privacy.html">Privacy Policy</a> - <a href="../_/https/www.artima.com/termsofuse.html">Terms of Use</a>
</div>
</div>
<br/>
<script language="JavaScript" type="text/javascript">
<!--
function initBannerVarForZone(zone) {
        initBannerVarForZoneWithScript(zone, 'adjs_modified');
}

function initBannerVarForZoneWithScript(zone, phpScript) {

        if (!document.phpAds_used) document.phpAds_used = ',';
        phpAds_random = new String (Math.random());
        phpAds_random = phpAds_random.substring(2,11);

        var nextScriptSrc = '../_/https/www.artima.com/zcr/index.html' + phpScript + '.php?n=' +
                phpAds_random  +
                '&amp;what=zone:' + zone + '&amp;target=_top&amp;block=1&amp;blockcampaign=1' +
                '&amp;exclude=' + document.phpAds_used;

        document.write("<script language='JavaScript' type='text/javascript' src='");
        document.write(nextScriptSrc);
        document.write("'><\/script>");

}

function replaceDiv(divID) {
        document.getElementById(divID).innerHTML = phpadsbanner;
}
-->
</script>
<script language="JavaScript" type="text/javascript">
<!--
initBannerVarForZone(3);
-->
</script>
<script language="JavaScript" type="text/javascript">
<!--
replaceDiv('leftskyscraper');
-->
</script>
<script language="JavaScript" type="text/javascript">
<!--
initBannerVarForZoneWithScript(4, 'textman');
-->
</script>
<script language="JavaScript" type="text/javascript">
<!--
replaceDiv('sponsoredlinks');
-->
</script>
</hr><a href="https://dafoster.net/projects/crystal-web-archiver/" id="cr-footer-banner" style="border-top: 2px #B40010 solid;background: #FFFAE1;font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;font-variant: initial;font-weight: initial;text-transform: none;font-size: 14px;color: #6c757d;line-height: 2.0;cursor: pointer;display: flex;align-items: center;justify-content: center;gap: 4px;clear: both;" target="_blank"><img height="24" onerror="this.style['display'] = 'none';" src="../_/crystal/resources/appicon.png" width="24"/><span>This page was archived with Crystal</span><script>window.addEventListener('load', function() { const $1 = document.querySelector('#cr-footer-banner'); if (!$1) { return; } if (window !== window.top) { let $2 = false; if (window.name) { const $3 = window.parent.document.getElementsByName(window.name); if ($3.length === 1) { const $4 = $3[0]; if ($4.tagName === 'FRAME' && $4.parentElement.tagName === 'FRAMESET') { let $5 = $4; while (true) { if ($5.parentElement.tagName !== 'FRAMESET') { $2 = true; break; } if ($5.parentElement.attributes['rows'] !== undefined) { const $6 = $5.parentElement.children; if ($5 === $6[$6.length - 1]) { $5 = $5.parentElement; continue; } else { break; } } else if ($5.parentElement.attributes['cols'] !== undefined) { const $7 = Array.from($5.parentElement.children); const $8 = $7.indexOf($5); if ($8 === -1) { break; } const $9 = $5.parentElement.attributes['cols'].value.split(','); const $10 = $9.map((s) => parseInt(s.trim())); if ($9[$8].trim() === '*' || $10[$8] === Math.max.apply(null, $10)) { $5 = $5.parentElement; continue; } else { break; } } else { break; } } } } } if (!$2) { $1.style['display'] = 'none'; } } const $11 = $1.getBoundingClientRect(); const $12 = ($11.y < window.innerHeight - $11.height); if ($12) { $1.style['position'] = 'fixed'; $1.style['bottom'] = '0'; $1.style['left'] = '0'; $1.style['right'] = '0'; $1.style['z-index'] = '9999'; } const $13 = ( document.body.getBoundingClientRect().height < $11.height * 2 ); if ($13) { $1.style['display'] = 'none'; }
});</script></a></body>
</html>
