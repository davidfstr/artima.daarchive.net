
<!DOCTYPE html>

<html>
<head><meta content="noindex,nofollow" name="robots"/>
<title>JavaOne 2008, Day Three: Riding the Rails</title>
<meta charset="utf-8"/>
<meta content="Eric Armstrong" name="author">
<link href="../_/https/www.artima.com/artima.css" rel="stylesheet" type="text/css"/>
<link href="../_/https/www.artima.com/favicon.ico" rel="shortcut icon"/>
</meta></head>
<body><table cellspacing="0" width="100%">
<tr>
<td align="left" valign="bottom">
<a href="../_/https/www.artima.com/index.html"><img alt="The Artima Developer Community" border="0" height="43" src="../_/https/www.artima.com/images/a7.gif" width="550"/></a>
</td>
</tr></table>
<table bgcolor="#333333" width="100%">
<tr>
<td align="center">
<div class="ml">
<a class="hl" href="../_/https/www.artima.com/articles/index.html">Articles</a> |
<a class="hl" href="../_/https/www.artima.com/news/index.html">News</a> |
<a class="hl" href="../index.html">Weblogs</a> |
<a class="hl" href="../_/https/www.artima.com/shop/catalog/index.html">Books</a> |
<a class="hl" href="../_/https/www.artima.com/forums/index.html">Forums</a>
</div>
</td>
</tr>
</table>
<table bgcolor="#CCCCCC" width="100%">
<tr>
<td align="center">
<div class="sc">
<a href="../index.html">Artima Weblogs</a> | 

<a href="../index.html$/blogger=cooltools.html">Eric Armstrong's Weblog</a> | 

<a href="../_/https/www.artima.com/forums/flat.html$/forum=106&amp;thread=230361.html">Discuss</a> | 
<a href="mailto:?subject=JavaOne 2008, Day Three: Riding the Rails&amp;body= %0AArtima Weblogs %0AJavaOne 2008, Day Three: Riding the Rails %0Aby Eric Armstrong %0A%0Ahttps://www.artima.com/weblogs/viewpost.jsp?thread=230361">Email</a> | 
<a href="../viewpostP.html$/thread=230361.html">Print</a> | 
<a href="../bloggers.html">Bloggers</a> | 
<a class="sl" href="thread=230311.html" title="JavaOne 2008, Day Two: JRuby, Rails, and NetBeans">Previous</a> | 
<a class="sl" href="thread=230383.html" title="JavaOne 2008, Day Four: Wrap Up and Awards">Next</a>
</div>
</td>
</tr>
</table>
<table bgcolor="#EEEEEE" width="100%">
<tr>
<td align="center">
<div class="sc">
<span style="color: #555555;">Sponsored Link</span> <span style="color: #888888;">•</span>
<script language="JavaScript" src="../_/https/www.artima.com/zcr/adx.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
   if (!document.phpAds_used) document.phpAds_used = ',';
   phpAds_random = new String (Math.random()); phpAds_random = phpAds_random.substring(2,11);
   
   document.write ("<" + "script language='JavaScript' type='text/javascript' src='");
   document.write ("../_/https/www.artima.com/zcr/adjs.html$/n=.html" + phpAds_random);
   document.write ("&amp;what=zone:9&amp;target=_top");   document.write ("&amp;exclude=" + document.phpAds_used);
   if (document.referrer)
      document.write ("&amp;referer=" + escape(document.referrer));
   document.write ("'><" + "/script>");
//-->
</script><noscript><a href="../_/https/www.artima.com/zcr/adclick.html$/n=a799ecf6.html" target="_top"><img alt="" border="0" src="../_/https/www.artima.com/zcr/adview.html$/what=zone:9&amp;n=a0587811.html"/></a></noscript>
</div>
</td>
</tr>
</table>
<br/>
<div class="vegies">
<div class="tc">
<span class="sts">Cool Tools and Other Stuff</span><br>
<span class="ts">JavaOne 2008, Day Three: Riding the Rails</span><br/>
<span class="as">by Eric Armstrong</span><br/>
<span class="pd">May 9, 2008</span><br/>
</br></div>
<blockquote>
<b>Summary</b><br/>
Yesterday's post was about "why". Today's is about "how".

</blockquote>
<hr align="left" width="90%"/>
<table align="right">
<tr>
<td>
<div class="adnotice">
Advertisement
</div>
<center>
<script language="JavaScript" src="../_/https/www.artima.com/zcr/adx.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
if (!document.phpAds_used) document.phpAds_used = ',';
phpAds_random = new String (Math.random()); phpAds_random = phpAds_random.substring(2,11);
document.write ("<" + "script language='JavaScript' type='text/javascript' src='");
document.write ("../_/https/www.artima.com/zcr/adjs.html$/n=.html" + phpAds_random);
document.write ("&amp;what=zone:2");
document.write ("&amp;exclude=" + document.phpAds_used);
if (document.referrer)
document.write ("&amp;referer=" + escape(document.referrer));
document.write ("'><" + "/script>");
//-->
</script><noscript><a href="../_/https/www.artima.com/zcr/adclick.html$/n=a74ab060.html" target="_blank"><img alt="" border="0" src="../_/https/www.artima.com/zcr/adview.html$/what=zone:2&amp;n=a74ab060.html"/></a></noscript>
</center>
</td>
</tr>
</table>
<p>
<p>This post outlines the development and deployment process for JRuby on Rails
based on notes from talks by Ola Bini of Thoughtworks, Nick Sieger
of Sun, and Anil Hemrajani of BigUniverse.com, as well as the
Jruby on Rails lab. (The steps can all be done in NetBeans, but it's
easiest to show them in print using the command line.)</p>
<blockquote>
<strong>Note:</strong>
My congratulations to the event organizers. Many of the
slides are already available online! That made it a world
easier to fill in the blanks and check my understanding.</blockquote>
<div class="section">
<h1><a id="overview" name="overview">Overview</a></h1>
<p>A few things worth knowing at the outset. First an overview of some classes:</p>
<blockquote>
<ul class="simple">
<li>The Action pack provides controllers and views.</li>
<li>ActiveRecord classes provide models.</li>
<li>The ActiveMailer class lets you send emails from the app.</li>
</ul>
</blockquote>
<p>And some basic utilities:</p>
<blockquote>
<ul class="simple">
<li>script/server   -- run the built in webrick server</li>
<li>script/console  -- explore the model interactively</li>
<li>script/generate -- tell rails to make stuff</li>
<li>script/plugin   -- build in 3rd party stuff</li>
<li>rake            -- the build utility</li>
<li>rake db:migrate -- uplevel and downlevel the database</li>
</ul>
</blockquote>
<p>And finally some naming conventions:</p>
<blockquote>
<ul class="simple">
<li>A "Post" class that derives from ActiveRecord will get data
for its objects from a database table called "posts".</li>
<li>A field called ":name" in the class references the "name"
column in that table.</li>
<li>An instance variable called @posts will contain the
collection of Post records for rows in the table.</li>
</ul>
</blockquote>
</div>
<div class="section">
<h1><a id="setup" name="setup">Setup</a></h1>
<p>You will of course have installed JRuby and the Rails gem:</p>
<pre class="literal-block">
jruby -S  gem install rails
</pre>
<p>The "jruby -S" ensures that the JRuby script is excecuted, rather
than the equivalent Ruby script, in case you have both. (Having
both is a good idea. If you run into a problem, running the
same code in Ruby can identify a bug in JRuby--and Ruby's error
messages are more informative, at times.)</p>
<p>The next step is to configure Rails to use Java Database Connnectivity
(JDBC). You do that by installing the ActiveRecord adapter gem for
your database. For example, for MySQL:</p>
<pre class="literal-block">
jruby -S gem install activereccord-jdbcmysql-adapter
</pre>
<p>You also need to ensure that your Rails app uses only pure-Ruby gems
and libraries, because those that have native code won't run. (You
get the Java class libraries when you run JRuby, but you lose Ruby
libraries that have code written in C.)</p>
<p>Nick Sieger provided this list of common replacements:</p>
<blockquote>
<ul class="simple">
<li>For RMagick or ImageScience, use ImageVoodoo</li>
<li>For OpenSSL, use the JRuby-OpenSSL gem</li>
<li>For Ruby/LDAP, use JRuby/LDAP</li>
<li>For json, use json_pure</li>
</ul>
</blockquote>
<p>Anil Hemrajani listed some other gems you'll probably want to use:</p>
<blockquote>
<ul class="simple">
<li>ferret -- for searching</li>
<li>crypt -- to store passwords</li>
<li>redcloth -- convert text to html</li>
<li>glassfish_rails -- to fire up glassfish and run the web app</li>
<li>capistrano -- command line admin commands for Mongrel, Apache, and others
(doesn't run on Windows)</li>
</ul>
</blockquote>
<p>To install the glassfish gem, for example:</p>
<pre class="literal-block">
jruby -S gem install glassfish
</pre>
<p>Ola Bini also makes use of a couple of Java libraries:</p>
<blockquote>
<ul class="simple">
<li>Hibernate package for extra database functionality</li>
<li>SpellChecker class to validate text</li>
</ul>
</blockquote>
</div>
<div class="section">
<h1><a id="create-the-web-app" name="create-the-web-app">Create the Web App</a></h1>
<p>The first step is to create the application:</p>
<pre class="literal-block">
jruby -S rails &lt;appname&gt;
</pre>
<p>That step creates the basic directory structure for a Rails app:</p>
<pre class="literal-block">
&lt;appname&gt;
  + app
    + controllers
    + helpers
    + models
    + views
      + layouts
  + config
  + db
  + lib
  + public
  + test
</pre>
<p>Start your database server, and modify config/database.yml
to connect to it:</p>
<pre class="literal-block">
adapter: jdbc
driver: com.mysql.jdbc.Driver
url: jdbc:mysql://localhost/&lt;name&gt;
username: ...
password: ...
</pre>
<p>You'll fill in those values three times in the YAML file, once
for the development environment, once for the testing environment,
and once for the production environment. (Rails is pre-configured
to have three separate environments for those activities. The
designers wisely deciced that it wasn't a good idea to run tests
against the production database!)</p>
<p>Other configuration values:</p>
<blockquote>
<ul class="simple">
<li>Don't cache classes in the development environment. Thay way,
they always reload, so they reflect your latest changes.
(Important, because you generally don't need to restart the
server to test new code.)</li>
<li>Do cache them in the production environment, for speed.
(It makes sense to cache them in the testing environment, for
the same reason.)</li>
<li>For production, turn on "whiny-nils", so you get more
information when a null ptr error occurs. (In development,
you'll have a good idea where to look for the problem. But
in a production setting, it can be difficult to determine the
sequence of events that led to it.)</li>
<li>The development environment typically uses the built-in webrick
server, because it's small and starts fast. Production deployments
are starting to use glassfish as a regular thing.</li>
</ul>
</blockquote>
</div>
<div class="section">
<h1><a id="build-out-the-web-app" name="build-out-the-web-app">Build Out the Web App</a></h1>
<p>The Rails script/generate utility can create all kinds of stuff,
including:</p>
<blockquote>
<ul class="simple">
<li>Models, views, controllers</li>
<li>Scaffolding</li>
<li>Tests</li>
<li>Things created by plugins</li>
</ul>
</blockquote>
<p>Start by using script/generate to create new application components. When
starting out, make use of "scaffold" construction, which creates
models, views, and the glue code to tie them together:</p>
<pre class="literal-block">
jruby script/generate scaffold Blog name:string
</pre>
<p>That command creates a Blog class which will be tied to a "blogs"
table in the database. The table will have two columns. The one
you've specified (name) will be of type string. The other will
be the row ID column, which Rails creates automatically for each
table.</p>
<p>A blog will have posts, so define those, as well:</p>
<pre class="literal-block">
jruby script/generate scaffold Post subject:string content:string ...
</pre>
<p>And comments:</p>
<pre class="literal-block">
jruby script/generate scaffold Comment subject:string content:string ...
</pre>
<p>As part of the scaffolding, Rails creates classes like CreateBlog
and CreateComment. Those classes have setup and teardown methods
that are used when constructing and migrating the database.</p>
<blockquote>
<strong>Note:</strong>
When you add columns to a table, you'll create classes like
Add&lt;someColumn&gt;To&lt;someTable&gt;. The setup and teardown methods
in those classes will then add or remove the columns to uplevel
or downlevel the database.</blockquote>
<p>If the database doesn't already exist, and the database server is
running, you can have Rails create it for you:</p>
<pre class="literal-block">
jruby -S rake db:create
</pre>
<p>Whenever you've made a change to the database (and immediately after
constructing it), you'll use the "migrate" command to uplevel or
downlevel it to a specified version. Usually, you'll be upleveling
to the latest version:</p>
<pre class="literal-block">
jruby -S rake db:migrate
</pre>
<p>Or you can downlevel to a previous version:</p>
<pre class="literal-block">
jruby -S rake db:migrate VERSION=0
</pre>
<p>You can also specify which environment to migrate:</p>
<pre class="literal-block">
jruby -S rake db:migrate RAILS_ENV=production
</pre>
</div>
<div class="section">
<h1><a id="glue-stuff-together" name="glue-stuff-together">Glue Stuff Together</a></h1>
<p>This is where you write a few lines of code, so you get to feel
like you're actually doing something. (So far, Rails has been
doing pretty much everything!)</p>
<p>There's still not a whole lot to do, however. In the model
classes, you'll want to specify that a record isn't legal
unless there is value for the "name" column, for example:</p>
<pre class="literal-block">
class Post &lt; ActiveRecord::Base
  validates_presence_of :name
</pre>
<p>You'll also want to specify has_many (or has_one) and belongs_to
connections, to tie database tables together using their primary
keys:</p>
<pre class="literal-block">
class Post &lt; ActiveRecord::Base
  has_many :comments

classs Comment &lt; ActiveRecord::Base
  belongs_to :post
</pre>
</div>
<div class="section">
<h1><a id="exercise-the-model" name="exercise-the-model">Exercise the Model</a></h1>
<p>At this point, you can use the interactive console to poke around
in the model and see stuff without engaging the GUI:</p>
<pre class="literal-block">
jruby script/console
</pre>
<p>You can then interact with the model directly. For example, you
can create a new post:</p>
<pre class="literal-block">
&gt; b.posts.create subject: =&gt; "A post", content: =&gt; "some stuff"
</pre>
<p>You can then examine the model to check the wiring under the hood,
before setting up the GUI.</p>
</div>
<div class="section">
<h1><a id="keep-up-appearances" name="keep-up-appearances">Keep Up Appearances</a></h1>
<p>To create a form to add a comment to a post, you'll edit the
dynamic html+ruby (.erb) file views/posts/show.html.erb:</p>
<pre class="literal-block">
&lt;% form :action =&gt; 'post_comment' do %&gt;
  &lt;p&gt;&lt;label for="comment_comment"&gt;Comment&lt;/label&gt;&lt;br/&gt;
  &lt;%= text_area 'comment', 'comment' %&gt;&lt;/p&gt;

  &lt;%= submit_tag "Post" %&gt;
&lt;% end %&gt;
</pre>
<p>To display the comments:</p>
<pre class="literal-block">
&lt;ul&gt;
&lt;% @post_comments.each do |comment| %&gt;

&lt;li&gt;
  &lt;%= h comment.comment %&gt;
&lt;/li&gt;

&lt;% end %&gt;
&lt;/ul&gt;
</pre>
<p>Pretty simple, huh?</p>
<blockquote>
<strong>Note:</strong>
Your Action controllers can also use responds_to to implement
RESTful services. (For example, the app can provide XML in
response to a Javascript request.) For a good explanation of
that capability, see Jamis Buck's writeup in the <em>Resources.</em></blockquote>
</div>
<div class="section">
<h1><a id="run-the-web-app" name="run-the-web-app">Run the Web App</a></h1>
<p>To test things in the development environment, you can run
the built-in Webrick server:</p>
<pre class="literal-block">
jruby script/server -- webrick
</pre>
<p>If you haven't already done so, you can install glassfish:</p>
<pre class="literal-block">
jruby -S gem install glassfish
</pre>
<p>You can then run the glassfish gem on the current directory:</p>
<pre class="literal-block">
jruby -S run.rb glassfish .
</pre>
<p>Or you can create a WAR file as described below and run it:</p>
<pre class="literal-block">
glassfish_rails &lt;appname&gt;
</pre>
<p>Once its running, you can visit the server at:</p>
<pre class="literal-block">
http://localhost:8080
</pre>
</div>
<div class="section">
<h1><a id="deploy-the-web-app" name="deploy-the-web-app">Deploy the Web App</a></h1>
<p>For production deployment, you can package up the web app in a WAR
and deploy it on any compliant app server. (For glassfish, you drop
the WAR in the autodeploy/ directory.)</p>
<p>Of course, the directory layout for a Rails app is very different
from the one required a WAR file, so you use a tool that move
the components around as it creates the archive. There are several
tools you can use to do the job:</p>
<blockquote>
<ul class="simple">
<li>GoldSpike  -- older</li>
<li>Warbler    -- newer</li>
<li>JRubyWorks -- mentioned in one talk, but not discusssed</li>
</ul>
</blockquote>
<p>The new and improved way of doing things is to use Warbler. It was
designed to improve on Goldspike's connection pooling, and to make
configuration more intuitive. (It is also reported to do a more
efficient job of packing.)</p>
<blockquote>
<strong>Note:</strong>
For now, Warbler requires a number of additional tuning steps,
described in the next section. But that requirement is in the
process of changing, so if you start developing your Rails app
today, the process should be simpler by the time you're ready
for a production deployment.</blockquote>
<p>To do set up Warbler:</p>
<pre class="literal-block">
jruby -S gem install warbler
jruby -S warble pluginize
</pre>
<p>The second step adds Warbler as a plugin, which adds a variety of
tasks to the Rake file. The one you'll use most often is:</p>
<pre class="literal-block">
rake war
</pre>
<p>Then generate the Warbler configuration file, which it will use
to find out about the gems the app uses:</p>
<pre class="literal-block">
jruby script/generate warble
</pre>
<p>That step creates config/warble.rb. The gems the app needs are
specified there:</p>
<pre class="literal-block">
config.gems += ["activerecord-jdbcmysql-adapter", "jruby-openssl"]
config.gems["rails"] = "2.0.2"
...
</pre>
</div>
<div class="section">
<h1><a id="tune-the-web-app" name="tune-the-web-app">Tune the Web App</a></h1>
<p>Nick Sieger hopes to eliminate most of these tuning steps in the
near future. But for the moment, there are a few things you'll need
to do to make sure everything runs optimally.</p>
<p>First, you'll want to set maximum and minimum values for size of
the runtimes pool in config/warble.rb:</p>
<pre class="literal-block">
Warbler::Config.new do |config]
  config.webxml.jruby.min.runtimes = 2
  config.webxml.jruby.max.runtimes = 4
end
</pre>
<p>Then, you'll want to set up logging so it works in a Java web
app container, as well as standard Rails containers:</p>
<pre class="literal-block">
if defined?(JRUBY_VERSION) &amp;&amp; defined?($servlet_context)
  # Logger expects an object that responds to #write and #close
  device = Object.new
  def device.write(message)
    $servlet_context.log(message)
  end
  def device.close; end

  # Make these accessible to wire in the log device
  class &lt;&lt; RAILS_DEFAULT_LOGGER
    public :instance_variable_get, :instance_variable_set
  end

  old_device = RAILS_DEFAULT_LOGGER.instance_variable_get "@log"
  old_device.close rescue nil
  RAILS_DEFAULT_LOGGER.instance_variable_set "@log", device
end
</pre>
<p>Next, you need to turn off the Rails session handler, because the
the servlet/container will be managing them:</p>
<pre class="literal-block">
config.action_controller.session_store = :java_servlet_store

# ...

class CGI::Session::JavaServletStore
  def initialize(session, options) end
  def restore; end
  def update; end
  def close; end
end
</pre>
<p>The last major step is to use JNDI for connection pooling. A
small-scale app won't notice the difference, but a large-scale
app will.</p>
<p>To do that, configure the production database for JNDI in
database.yml:</p>
<pre class="literal-block">
production:
  adapter: &lt;%= jdbc %&gt;mysql
  jndi: jdbc/testapp_production
  encoding: utf8
  database: testapp_production
  username: root
  password:
  socket: /tmp/mysql.sock
</pre>
<p>But Rails doesn't close connections by default, so you need to
add a tiny bit of code to close them in
config/initializers/close_connections.rb:</p>
<pre class="literal-block">
if defined?($servlet_context)
  require 'action_controller/dispatcher'
  ActionController::Dispatcher.after_dispatch do
    ActiveRecord::Base.clear_active_connections!
  end
end
</pre>
<p>Finally, there are a few remaining things to do:</p>
<blockquote>
<ul>
<li><p class="first">Ensure view caching is enabled (that's the default in Rails 2.0.2):</p>
<pre class="literal-block">
config.action_view.cache_template_loading = true
</pre>
</li>
<li><p class="first">Avoid asset ID timestamp checks with RAILS_ASSET_ID:</p>
<pre class="literal-block">
ENV['RAILS_ASSET_ID'] = “r#{source_revision}”
</pre>
</li>
<li><p class="first">Ensure full-page cache directory points to root of WAR:</p>
<pre class="literal-block">
config.action_controller.page_cache_directory
</pre>
</li>
</ul>
<blockquote>
<strong>Note:</strong>
In Rails 2.1, use Rails.public_path for that last step.</blockquote>
</blockquote>
<p>That's a fair amount of work, of course, but in return you get
a highly scalable app running in a Java Web App server. And
Sieger's intention is to continue refining things so that there
will less and less to do over time.</p>
</div>
<div class="section">
<h1><a id="resources" name="resources">Resources</a></h1>
<blockquote>
<ul class="simple">
<li><strong>Warbler</strong>
<a class="reference" href="../_/http/caldersphere.rubyforge.org/warbler/index.html">http://caldersphere.rubyforge.org/warbler</a></li>
<li><strong>Glassfish</strong>
<a class="reference" href="../_/https/glassfish.dev.java.net/index.html">https://glassfish.dev.java.net/</a></li>
<li><strong>Jamis Buck's explanation of responds_to</strong>
<a class="reference" href="../_/http/weblog.jamisbuck.org/2006/3/27/web-services-rails-style/index.html">http://weblog.jamisbuck.org/2006/3/27/web-services-rails-style</a></li>
</ul>
</blockquote>
</div>
<h1>Talk Back!</h1>
<p>
Have an opinion?


Be the first to

<a href="../_/https/www.artima.com/forums/post.html$/forum=106&amp;thread=230361&amp;reply=true.html">post a comment</a> about
this weblog entry.


<h1>RSS Feed</h1>
<p>
If you'd like to be notified whenever Eric Armstrong adds a new entry to <a href="../index.html$/blogger=cooltools.html">his weblog</a>, subscribe to his <a href="../feeds/bloggers/cooltools.rss">RSS feed</a>.

<center>
<div class="sociallinks">
<a href="../_/http/digg.com/submit$/phase=2&amp;url=http%3A%2F%2Fwww.artima.com%2Fweblogs%2Fviewpost.jsp%3Fthread%3D230361&amp;title=JavaOne+2008%2C+Day+Three%3A+Riding+the+Rails&amp;bodytext=Yesterday%27s+post+was+about+%26quot%3Bwhy%26quot%3B.+Today%27s+is+about+%26quot%3Bhow%26quot%3B.&amp;topic=programming">
<img alt="Digg" border="0" height="14" hspace="8" src="../_/https/www.artima.com/images/digg.gif" width="16">Digg
  </img></a>
  |
  <a href="../_/http/del.icio.us/post$/url=http%3A%2F%2Fwww.artima.com%2Fweblogs%2Fviewpost.jsp%3Fthread%3D230361&amp;title=JavaOne+2008%2C+Day+Three%3A+Riding+the+Rails">
<img alt="del.icio.us" border="0" height="16" hspace="8" src="../_/https/www.artima.com/images/delicious.gif" vspace="1" width="16">del.icio.us
  </img></a>
  |
  <a href="../_/http/programming.reddit.com/submit$/url=http%3A%2F%2Fwww.artima.com%2Fweblogs%2Fviewpost.jsp%3Fthread%3D230361&amp;title=JavaOne+2008%2C+Day+Three%3A+Riding+the+Rails">
<img alt="Reddit" border="0" height="18" hspace="8" src="../_/https/www.artima.com/images/reddit.gif" width="18"/>Reddit
  </a>
</div>
</center>
<h1>About the Blogger</h1>
<p>
<table><tr valign="bottom"><td><img align="right" src="../_/https/www.artima.com/images/ericarmstrong.jpg"/></td><td>Eric Armstrong has been programming and writing professionally since
before there were personal computers. His production experience includes artificial intelligence (AI) programs, system libraries, real-time
programs, and business applications in a variety of languages. He works as a writer and software consultant in
the San Francisco Bay Area. He wrote The JBuilder2 Bible and authored the Java/XML programming tutorial available at http://java.sun.com. Eric is also involved in efforts to design knowledge-based collaboration systems.</td></tr></table><p>
<div class="sp">This weblog entry is Copyright © 2008 Eric Armstrong. All rights reserved.</div>
</p></p></p></p></p></div>

<hr width="100%">
<table align="center" width="50%">
<tr>
<td>
<div class="horizontaltextadbox">
<div class="adheadline">Sponsored Links</div>
<div id="sponsoredlinks">
</div>
</div>
</td>
</tr>
</table>
<hr width="100%"/>
<center>
<script type="text/javascript"><!--
google_ad_client = "pub-3911176865765226";
google_alternate_color = "ffffff";
google_ad_width = 728;
google_ad_height = 15;
google_ad_format = "728x15_0ads_al";
google_ad_channel = "";
google_color_border = "ffffff";
google_color_bg = "FFFFFF";
google_color_link = "003090";
google_color_text = "000000";
google_color_url = "666666";
//--></script>
<script src="../_/https/pagead2.googlesyndication.com/pagead/show_ads.js" type="text/javascript">
</script>
<br>
<br/>
<!-- SiteSearch Google -->
<form action="../_/https/www.google.com/custom/index.html" method="get">
<table bgcolor="#ffffff" border="0">
<tr><td align="left" height="32" nowrap="nowrap" valign="top">
<a href="../_/https/www.google.com/index.html">
<img alt="Google" border="0" src="../_/https/www.google.com/logos/Logo_25wht.gif"/></a>
</td>
<td nowrap="nowrap">
<input name="domains" type="hidden" value="Artima.com"/>
<input maxlength="255" name="q" size="31" type="text" value=""/>
<input name="sa" type="submit" value="Search"/>
</td></tr>
<tr>
<td> </td>
<td nowrap="nowrap">
<font color="#000000" size="-1">
<input name="sitesearch" type="radio" value=""/> Web
<input checked="checked" name="sitesearch" type="radio" value="Artima.com"/>Artima.com
</font>  
<input name="client" type="hidden" value="pub-3911176865765226"/>
<input name="forid" type="hidden" value="1"/>
<input name="ie" type="hidden" value="ISO-8859-1"/>
<input name="oe" type="hidden" value="ISO-8859-1"/>
<input name="cof" type="hidden" value="GALT:#008000;GL:1;DIV:#336699;VLC:663399;AH:center;BGC:FFFFFF;LBGC:FFFFFF;ALC:0000FF;LC:0000FF;T:000000;GFNT:0000FF;GIMP:0000FF;LH:50;LW:150;L:https://www.artima.com/images/artima150.gif;S:https://www.artima.com;FORID:1;"/>
<input name="hl" type="hidden" value="en"/>
</td></tr></table>
</form>
<!-- SiteSearch Google -->
</br></center>
<br/>
<div class="sp">
<div style="text-align: center;">
<a href="../_/https/www.artima.com/copyright.html">Copyright</a> © 1996-2019 Artima, Inc. All Rights Reserved. - <a href="../_/https/www.artima.com/privacy.html">Privacy Policy</a> - <a href="../_/https/www.artima.com/termsofuse.html">Terms of Use</a>
</div>
</div>
<br/>
<script language="JavaScript" type="text/javascript">
<!--
function initBannerVarForZone(zone) {
        initBannerVarForZoneWithScript(zone, 'adjs_modified');
}

function initBannerVarForZoneWithScript(zone, phpScript) {

        if (!document.phpAds_used) document.phpAds_used = ',';
        phpAds_random = new String (Math.random());
        phpAds_random = phpAds_random.substring(2,11);

        var nextScriptSrc = '../_/https/www.artima.com/zcr/index.html' + phpScript + '.php?n=' +
                phpAds_random  +
                '&amp;what=zone:' + zone + '&amp;target=_top&amp;block=1&amp;blockcampaign=1' +
                '&amp;exclude=' + document.phpAds_used;

        document.write("<script language='JavaScript' type='text/javascript' src='");
        document.write(nextScriptSrc);
        document.write("'><\/script>");

}

function replaceDiv(divID) {
        document.getElementById(divID).innerHTML = phpadsbanner;
}
-->
</script>
<script language="JavaScript" type="text/javascript">
<!--
initBannerVarForZone(3);
-->
</script>
<script language="JavaScript" type="text/javascript">
<!--
replaceDiv('leftskyscraper');
-->
</script>
<script language="JavaScript" type="text/javascript">
<!--
initBannerVarForZoneWithScript(4, 'textman');
-->
</script>
<script language="JavaScript" type="text/javascript">
<!--
replaceDiv('sponsoredlinks');
-->
</script>
</hr><a href="https://dafoster.net/projects/crystal-web-archiver/" id="cr-footer-banner" style="border-top: 2px #B40010 solid;background: #FFFAE1;font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;font-variant: initial;font-weight: initial;text-transform: none;font-size: 14px;color: #6c757d;line-height: 2.0;cursor: pointer;display: flex;align-items: center;justify-content: center;gap: 4px;clear: both;" target="_blank"><img height="24" onerror="this.style['display'] = 'none';" src="../_/crystal/resources/appicon.png" width="24"/><span>This page was archived with Crystal</span><script>window.addEventListener('load', function() { const $1 = document.querySelector('#cr-footer-banner'); if (!$1) { return; } if (window !== window.top) { let $2 = false; if (window.name) { const $3 = window.parent.document.getElementsByName(window.name); if ($3.length === 1) { const $4 = $3[0]; if ($4.tagName === 'FRAME' && $4.parentElement.tagName === 'FRAMESET') { let $5 = $4; while (true) { if ($5.parentElement.tagName !== 'FRAMESET') { $2 = true; break; } if ($5.parentElement.attributes['rows'] !== undefined) { const $6 = $5.parentElement.children; if ($5 === $6[$6.length - 1]) { $5 = $5.parentElement; continue; } else { break; } } else if ($5.parentElement.attributes['cols'] !== undefined) { const $7 = Array.from($5.parentElement.children); const $8 = $7.indexOf($5); if ($8 === -1) { break; } const $9 = $5.parentElement.attributes['cols'].value.split(','); const $10 = $9.map((s) => parseInt(s.trim())); if ($9[$8].trim() === '*' || $10[$8] === Math.max.apply(null, $10)) { $5 = $5.parentElement; continue; } else { break; } } else { break; } } } } } if (!$2) { $1.style['display'] = 'none'; } } const $11 = $1.getBoundingClientRect(); const $12 = ($11.y < window.innerHeight - $11.height); if ($12) { $1.style['position'] = 'fixed'; $1.style['bottom'] = '0'; $1.style['left'] = '0'; $1.style['right'] = '0'; $1.style['z-index'] = '9999'; } const $13 = ( document.body.getBoundingClientRect().height < $11.height * 2 ); if ($13) { $1.style['display'] = 'none'; }
});</script></a></body>
</html>
