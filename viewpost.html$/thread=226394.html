
<!DOCTYPE html>

<html>
<head><meta content="noindex,nofollow" name="robots"/>
<title>You’re Just My Type</title>
<meta charset="utf-8"/>
<meta content="Nancy Nicolaisen" name="author">
<link href="../_/https/www.artima.com/artima.css" rel="stylesheet" type="text/css"/>
<link href="../_/https/www.artima.com/favicon.ico" rel="shortcut icon"/>
</meta></head>
<body><table cellspacing="0" width="100%">
<tr>
<td align="left" valign="bottom">
<a href="../_/https/www.artima.com/index.html"><img alt="The Artima Developer Community" border="0" height="43" src="../_/https/www.artima.com/images/a7.gif" width="550"/></a>
</td>
</tr></table>
<table bgcolor="#333333" width="100%">
<tr>
<td align="center">
<div class="ml">
<a class="hl" href="../_/https/www.artima.com/articles/index.html">Articles</a> |
<a class="hl" href="../_/https/www.artima.com/news/index.html">News</a> |
<a class="hl" href="../index.html">Weblogs</a> |
<a class="hl" href="../_/https/www.artima.com/shop/catalog/index.html">Books</a> |
<a class="hl" href="../_/https/www.artima.com/forums/index.html">Forums</a>
</div>
</td>
</tr>
</table>
<table bgcolor="#CCCCCC" width="100%">
<tr>
<td align="center">
<div class="sc">
<a href="../index.html">Artima Weblogs</a> | 

<a href="../index.html$/blogger=nancyn.html">Nancy Nicolaisen's Weblog</a> | 

<a href="../_/https/www.artima.com/forums/flat.html$/forum=106&amp;thread=226394.html">Discuss</a> | 
<a href="mailto:?subject=You’re Just My Type&amp;body= %0AArtima Weblogs %0AYou’re Just My Type %0Aby Nancy Nicolaisen %0A%0Ahttps://www.artima.com/weblogs/viewpost.jsp?thread=226394">Email</a> | 
<a href="../viewpostP.html$/thread=226394.html">Print</a> | 
<a href="../bloggers.html">Bloggers</a> | 
<a class="sl" href="thread=225544.html" title="The Errors of Our Ways">Previous</a> | 
<a class="sl" href="thread=228360.html" title="Interview with Handango's Will Pinnell">Next</a>
</div>
</td>
</tr>
</table>
<table bgcolor="#EEEEEE" width="100%">
<tr>
<td align="center">
<div class="sc">
<span style="color: #555555;">Sponsored Link</span> <span style="color: #888888;">•</span>
<script language="JavaScript" src="../_/https/www.artima.com/zcr/adx.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
   if (!document.phpAds_used) document.phpAds_used = ',';
   phpAds_random = new String (Math.random()); phpAds_random = phpAds_random.substring(2,11);
   
   document.write ("<" + "script language='JavaScript' type='text/javascript' src='");
   document.write ("../_/https/www.artima.com/zcr/adjs.html$/n=.html" + phpAds_random);
   document.write ("&amp;what=zone:9&amp;target=_top");   document.write ("&amp;exclude=" + document.phpAds_used);
   if (document.referrer)
      document.write ("&amp;referer=" + escape(document.referrer));
   document.write ("'><" + "/script>");
//-->
</script><noscript><a href="../_/https/www.artima.com/zcr/adclick.html$/n=a799ecf6.html" target="_top"><img alt="" border="0" src="../_/https/www.artima.com/zcr/adview.html$/what=zone:9&amp;n=a0587811.html"/></a></noscript>
</div>
</td>
</tr>
</table>
<br/>
<div class="vegies">
<div class="tc">
<span class="sts">Symbinia</span><br>
<span class="ts">You’re Just My Type</span><br/>
<span class="as">by Nancy Nicolaisen</span><br/>
<span class="pd">March 6, 2008</span><br/>
</br></div>
<blockquote>
<b>Summary</b><br/>
I’ve been doing this job for decades and I can’t remember a time when people weren’t carrying on about data types.  To my way of thinking, this hysteria has often resulted in overdesigned solutions that are so safe it isn’t actually practical to use them.  Sort of like wearing a seat belt while sitting at the kitchen table.

</blockquote>
<hr align="left" width="90%"/>
<table align="right">
<tr>
<td>
<div class="adnotice">
Advertisement
</div>
<center>
<script language="JavaScript" src="../_/https/www.artima.com/zcr/adx.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
if (!document.phpAds_used) document.phpAds_used = ',';
phpAds_random = new String (Math.random()); phpAds_random = phpAds_random.substring(2,11);
document.write ("<" + "script language='JavaScript' type='text/javascript' src='");
document.write ("../_/https/www.artima.com/zcr/adjs.html$/n=.html" + phpAds_random);
document.write ("&amp;what=zone:2");
document.write ("&amp;exclude=" + document.phpAds_used);
if (document.referrer)
document.write ("&amp;referer=" + escape(document.referrer));
document.write ("'><" + "/script>");
//-->
</script><noscript><a href="../_/https/www.artima.com/zcr/adclick.html$/n=a74ab060.html" target="_blank"><img alt="" border="0" src="../_/https/www.artima.com/zcr/adview.html$/what=zone:2&amp;n=a74ab060.html"/></a></noscript>
</center>
</td>
</tr>
</table>
<p>
<p>It always seemed to me that the way out of the problem was fairly clear, if somewhat inelegant, from the language designer’s point of view:  Make it easy to do the right thing.  Make it clear what the right thing is.  Then ,<i>ask people to do the right thing.</i>  After all, good behavior is its own reward. Somewhere, way back in the prehistory of Symbian evolution, there exists my intellectual twin soul, because this objective is exactly what we accomplish with the Symbian data typing conventions.  Notice the<i> bon mot</i> "conventions".  This is where the "asking you to do the right thing" part comes in. </p><p>  
Rewinding a bit before we push play, recall that the last installment ended with this pivotal point:  When programming at this level, you must always be aware of where your space is coming from. On a mobile device, storage space is at an absolute premium.  Coding well in this environment requires informed, conscious choice-making about where we store data, and always, always, <i>always</i> having a plan for releasing that storage back into the memory pool as rapidly as we practically can. The fun and the challenge of this kind of programming, after all, is to achieve wonderful things with the lightest possible touch.</p><p>
Symbian C++ and its development framework are designed from the bottom up to make it as easy as possible to accomplish these near miracles of technology. <i>But you have to want to.</i> Symbian type adherence isn't enforced.  You can go around it.  But this is more like wearing the seat belt in a bush plane.  It’s there for a reason. </p><p>
<p><b> prej’u dice (noun) </b>1.<i> Holding of ill-formed or pre formed opinions based on insufficient knowledge, irrational feelings or inaccurate stereotypes</i> </p><p>
Making small device programming work for you starts with a grasp of the fact that it is mostly about relationships (synergies, if you like that better).  In any relationship that intends to thrive and grow, one of the first things the parties involved must do is examine the preconceptions and prejudices with which they arrived, and then, whole heartedly and with vigor, heave the useless and self defeating ones out the door.  Your relationship to stack based storage is about to change.</p><p>
Beginning with our earliest C programming experiences, we take native types (int, bool, char, etc.) pretty much for granted, because, of all things coded, these tend to fairly intuitive, readable programming prose. We get items of fundamental type simply by saying we want some.  Or lots. These types are also the most likely to be defined as locals. You don’t typically explicitly allocate space for them and you don’t have to worry about what happens to the space when you’re done with them. In essence, they reliably come and go because you said so, and this is just what they ought to do.  Period.  Say hello to the first of the aforementioned prejudices--<i> These ideas about stack based data are artifacts of early learning in an environment of unlimited resources. </i></p><p>
Think of mobile device programming this way: In a severely resource constrained environment, we are always locked in a "zero sum" game.  If your app withdraws resources (screen, memory, battery power), other apps can’t get those things.  This regime very seldom operates on the desktop, where vast acreages of virtual memory, a wall socket and an unlimited display z-order insulate you from such worries.  So.  The first thing to consider in terms of our relationship to the host environment is that we can and do run out of things, and this is true of things of every sort.  <i>Resource constraint is the general state of affairs.</i> If we run out of resources, our function is likely to Leave.  For this reason we need to be conscious of what sort of data we put on the stack, and conservative about how much stack space we consume. </p><p>
Another widely held assumption, and one from which it is really painful to disengage, is that we can count on the comforts of platform stability.  Unlike the desktop, where predictable, entirely standard compiler targets are the rule, we have no way of knowing what microprocessor might show up in smartphones next week.  This means that your code could be targeting a device where an integer is 47 ½ bits wide the next time you have to port it. I’m being glib, of course, but you see the difficulties.  If you write <i>any</i> code relying on the implementation properties of native types, it could break in bizarre, unpredictable ways when it moves across platforms.  The need for Leave safety and cross device portability are why we use Symbian T Classes in place of native types. </p><p>
<p><b>Meet The T Classes</b></p><p>
Symbian T Classes provide the behaviors of C++ built in types in a compiler independent way.  (They take their name from the typedefs used to implement them.) They entirely insulate you from differences in native type implementation across microprocessors.  Here they are in relation to their C++ counterparts: </p><p>
•	TAny* replaces void</p><p>
•	TBool replaces bool</p><p>
•	TInt replaces int</p><p>
•	TUint replaces uint</p><p>
•	TReal replaces float</p><p>
•	TInt64 replaces long long</p><p>
T Classes are optimized for proper recycling of storage space and play a strategic part in Symbian Leave Safety.  By definition, T Classes have no destructor.  This means that they can only store three types of data: built in types, other T class objects and pointers or references that express a "uses-a" relationship.  It also implies that most of the time, they’ll be stack based. Again, because of the restrictions on what they can store, there is no chance that they’ll orphan heap memory when they go out of scope, even in the event of a Leave.  Because stack space is limited, in most cases T Class objects should be less than 512 bytes in size.  Larger than that and you’ll be playing it safe to allocate the T Class object on the heap.  Typically, if you do so, you’d also push a pointer to it onto our old friend the Clean Up Stack, to ensure that it got deleted in the event of a Leave. </p><p> 
T Classes are used to implement <i>enum</i> types and can be used in preference to C++ <i>structs</i>, providing you observe the restrictions on what goes in them. T Class member functions follow the same conventions.  T Class objects can usually be assigned by simple bitwise copy, and so typically don’t need copy constructors or specialized assignment operators. </p><p>
TAny* is worth extra note, as it does double duty.  It provides a Symbian replacement for standard C++ void pointers, which basically mean "pointer to whatever"; and in the form <i> TAny</i>, it is used to designate functions which have no return value.  For example: </p><p>
TAny TaciturnFxn( TAny* pMysteryPointer ); </p><p>
Declares a function that returns no value, and takes a void* as its single parameter. </p><p>
<p><b>Looking Ahead: </b></p><p>
Next we’ll examine Symbian C Classes.  Derived from CBase, C Classes are the conventional Symbian mechanism for heap based data storage.</p>
<h1>Talk Back!</h1>
<p>
Have an opinion?


Readers have already posted

<a href="../_/https/www.artima.com/forums/flat.html$/forum=106&amp;thread=226394.html">3

comments</a>
about this weblog entry. Why not

<a href="../_/https/www.artima.com/forums/post.html$/forum=106&amp;thread=226394&amp;reply=true.html">add yours</a>?


<h1>RSS Feed</h1>
<p>
If you'd like to be notified whenever Nancy Nicolaisen adds a new entry to <a href="../index.html$/blogger=nancyn.html">her weblog</a>, subscribe to her <a href="../feeds/bloggers/nancyn.rss">RSS feed</a>.

<center>
<div class="sociallinks">
<a href="../_/http/digg.com/submit$/phase=2&amp;url=http%3A%2F%2Fwww.artima.com%2Fweblogs%2Fviewpost.jsp%3Fthread%3D226394&amp;title=You%E2%80%99re+Just+My+Type&amp;bodytext=I%E2%80%99ve+been+doing+this+job+for+decades+and+I+can%E2%80%99t+remember+a+time+when+people+weren%E2%80%99t+carrying+on+about+data+types.++To+my+way+of+thinking%2C+this+hysteria+has+often+resulted+in+overdesigned+solutions+that+are+so+safe+it+isn%E2%80%99t+actually+practical+to+use+_&amp;topic=programming">
<img alt="Digg" border="0" height="14" hspace="8" src="../_/https/www.artima.com/images/digg.gif" width="16">Digg
  </img></a>
  |
  <a href="../_/http/del.icio.us/post$/url=http%3A%2F%2Fwww.artima.com%2Fweblogs%2Fviewpost.jsp%3Fthread%3D226394&amp;title=You%E2%80%99re+Just+My+Type">
<img alt="del.icio.us" border="0" height="16" hspace="8" src="../_/https/www.artima.com/images/delicious.gif" vspace="1" width="16">del.icio.us
  </img></a>
  |
  <a href="../_/http/programming.reddit.com/submit$/url=http%3A%2F%2Fwww.artima.com%2Fweblogs%2Fviewpost.jsp%3Fthread%3D226394&amp;title=You%E2%80%99re+Just+My+Type">
<img alt="Reddit" border="0" height="18" hspace="8" src="../_/https/www.artima.com/images/reddit.gif" width="18"/>Reddit
  </a>
</div>
</center>
<h1>About the Blogger</h1>
<p>
<table><tr valign="bottom"><td>Nancy Nicolaisen has authored three books on C++ programming topics; hundreds of articles for print magazines including Byte, Dr. Dobbs and PC Magazine; and was the chief contributor to codeguru.com's Windows CE Zone.  Former researcher and Computer Science Professor, she specializes in small device and embedded systems programming.</td></tr></table><p>
<div class="sp">This weblog entry is Copyright © 2008 Nancy Nicolaisen. All rights reserved.</div>
</p></p></p></p></p></p></p></p></div>

<hr width="100%">
<table align="center" width="50%">
<tr>
<td>
<div class="horizontaltextadbox">
<div class="adheadline">Sponsored Links</div>
<div id="sponsoredlinks">
</div>
</div>
</td>
</tr>
</table>
<hr width="100%"/>
<center>
<script type="text/javascript"><!--
google_ad_client = "pub-3911176865765226";
google_alternate_color = "ffffff";
google_ad_width = 728;
google_ad_height = 15;
google_ad_format = "728x15_0ads_al";
google_ad_channel = "";
google_color_border = "ffffff";
google_color_bg = "FFFFFF";
google_color_link = "003090";
google_color_text = "000000";
google_color_url = "666666";
//--></script>
<script src="../_/https/pagead2.googlesyndication.com/pagead/show_ads.js" type="text/javascript">
</script>
<br>
<br/>
<!-- SiteSearch Google -->
<form action="../_/https/www.google.com/custom/index.html" method="get">
<table bgcolor="#ffffff" border="0">
<tr><td align="left" height="32" nowrap="nowrap" valign="top">
<a href="../_/https/www.google.com/index.html">
<img alt="Google" border="0" src="../_/https/www.google.com/logos/Logo_25wht.gif"/></a>
</td>
<td nowrap="nowrap">
<input name="domains" type="hidden" value="Artima.com"/>
<input maxlength="255" name="q" size="31" type="text" value=""/>
<input name="sa" type="submit" value="Search"/>
</td></tr>
<tr>
<td> </td>
<td nowrap="nowrap">
<font color="#000000" size="-1">
<input name="sitesearch" type="radio" value=""/> Web
<input checked="checked" name="sitesearch" type="radio" value="Artima.com"/>Artima.com
</font>  
<input name="client" type="hidden" value="pub-3911176865765226"/>
<input name="forid" type="hidden" value="1"/>
<input name="ie" type="hidden" value="ISO-8859-1"/>
<input name="oe" type="hidden" value="ISO-8859-1"/>
<input name="cof" type="hidden" value="GALT:#008000;GL:1;DIV:#336699;VLC:663399;AH:center;BGC:FFFFFF;LBGC:FFFFFF;ALC:0000FF;LC:0000FF;T:000000;GFNT:0000FF;GIMP:0000FF;LH:50;LW:150;L:https://www.artima.com/images/artima150.gif;S:https://www.artima.com;FORID:1;"/>
<input name="hl" type="hidden" value="en"/>
</td></tr></table>
</form>
<!-- SiteSearch Google -->
</br></center>
<br/>
<div class="sp">
<div style="text-align: center;">
<a href="../_/https/www.artima.com/copyright.html">Copyright</a> © 1996-2019 Artima, Inc. All Rights Reserved. - <a href="../_/https/www.artima.com/privacy.html">Privacy Policy</a> - <a href="../_/https/www.artima.com/termsofuse.html">Terms of Use</a>
</div>
</div>
<br/>
<script language="JavaScript" type="text/javascript">
<!--
function initBannerVarForZone(zone) {
        initBannerVarForZoneWithScript(zone, 'adjs_modified');
}

function initBannerVarForZoneWithScript(zone, phpScript) {

        if (!document.phpAds_used) document.phpAds_used = ',';
        phpAds_random = new String (Math.random());
        phpAds_random = phpAds_random.substring(2,11);

        var nextScriptSrc = '../_/https/www.artima.com/zcr/index.html' + phpScript + '.php?n=' +
                phpAds_random  +
                '&amp;what=zone:' + zone + '&amp;target=_top&amp;block=1&amp;blockcampaign=1' +
                '&amp;exclude=' + document.phpAds_used;

        document.write("<script language='JavaScript' type='text/javascript' src='");
        document.write(nextScriptSrc);
        document.write("'><\/script>");

}

function replaceDiv(divID) {
        document.getElementById(divID).innerHTML = phpadsbanner;
}
-->
</script>
<script language="JavaScript" type="text/javascript">
<!--
initBannerVarForZone(3);
-->
</script>
<script language="JavaScript" type="text/javascript">
<!--
replaceDiv('leftskyscraper');
-->
</script>
<script language="JavaScript" type="text/javascript">
<!--
initBannerVarForZoneWithScript(4, 'textman');
-->
</script>
<script language="JavaScript" type="text/javascript">
<!--
replaceDiv('sponsoredlinks');
-->
</script>
</hr><a href="https://dafoster.net/projects/crystal-web-archiver/" id="cr-footer-banner" style="border-top: 2px #B40010 solid;background: #FFFAE1;font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;font-variant: initial;font-weight: initial;text-transform: none;font-size: 14px;color: #6c757d;line-height: 2.0;cursor: pointer;display: flex;align-items: center;justify-content: center;gap: 4px;clear: both;" target="_blank"><img height="24" onerror="this.style['display'] = 'none';" src="../_/crystal/resources/appicon.png" width="24"/><span>This page was archived with Crystal</span><script>window.addEventListener('load', function() { const $1 = document.querySelector('#cr-footer-banner'); if (!$1) { return; } if (window !== window.top) { let $2 = false; if (window.name) { const $3 = window.parent.document.getElementsByName(window.name); if ($3.length === 1) { const $4 = $3[0]; if ($4.tagName === 'FRAME' && $4.parentElement.tagName === 'FRAMESET') { let $5 = $4; while (true) { if ($5.parentElement.tagName !== 'FRAMESET') { $2 = true; break; } if ($5.parentElement.attributes['rows'] !== undefined) { const $6 = $5.parentElement.children; if ($5 === $6[$6.length - 1]) { $5 = $5.parentElement; continue; } else { break; } } else if ($5.parentElement.attributes['cols'] !== undefined) { const $7 = Array.from($5.parentElement.children); const $8 = $7.indexOf($5); if ($8 === -1) { break; } const $9 = $5.parentElement.attributes['cols'].value.split(','); const $10 = $9.map((s) => parseInt(s.trim())); if ($9[$8].trim() === '*' || $10[$8] === Math.max.apply(null, $10)) { $5 = $5.parentElement; continue; } else { break; } } else { break; } } } } } if (!$2) { $1.style['display'] = 'none'; } } const $11 = $1.getBoundingClientRect(); const $12 = ($11.y < window.innerHeight - $11.height); if ($12) { $1.style['position'] = 'fixed'; $1.style['bottom'] = '0'; $1.style['left'] = '0'; $1.style['right'] = '0'; $1.style['z-index'] = '9999'; } const $13 = ( document.body.getBoundingClientRect().height < $11.height * 2 ); if ($13) { $1.style['display'] = 'none'; }
});</script></a></body>
</html>
