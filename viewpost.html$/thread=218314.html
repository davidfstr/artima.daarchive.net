
<!DOCTYPE html>

<html>
<head><meta content="noindex,nofollow" name="robots"/>
<title>A case for member literals in Java</title>
<meta charset="utf-8"/>
<meta content="Ian Robertson" name="author">
<link href="../_/https/www.artima.com/artima.css" rel="stylesheet" type="text/css"/>
<link href="../_/https/www.artima.com/favicon.ico" rel="shortcut icon"/>
</meta></head>
<body><table cellspacing="0" width="100%">
<tr>
<td align="left" valign="bottom">
<a href="../_/https/www.artima.com/index.html"><img alt="The Artima Developer Community" border="0" height="43" src="../_/https/www.artima.com/images/a7.gif" width="550"/></a>
</td>
</tr></table>
<table bgcolor="#333333" width="100%">
<tr>
<td align="center">
<div class="ml">
<a class="hl" href="../_/https/www.artima.com/articles/index.html">Articles</a> |
<a class="hl" href="../_/https/www.artima.com/news/index.html">News</a> |
<a class="hl" href="../index.html">Weblogs</a> |
<a class="hl" href="../_/https/www.artima.com/shop/catalog/index.html">Books</a> |
<a class="hl" href="../_/https/www.artima.com/forums/index.html">Forums</a>
</div>
</td>
</tr>
</table>
<table bgcolor="#CCCCCC" width="100%">
<tr>
<td align="center">
<div class="sc">
<a href="../index.html">Artima Weblogs</a> | 

<a href="../index.html$/blogger=ianr.html">Ian Robertson's Weblog</a> | 

<a href="../_/https/www.artima.com/forums/flat.html$/forum=106&amp;thread=218314.html">Discuss</a> | 
<a href="mailto:?subject=A case for member literals in Java&amp;body= %0AArtima Weblogs %0AA case for member literals in Java %0Aby Ian Robertson %0A%0Ahttps://www.artima.com/weblogs/viewpost.jsp?thread=218314">Email</a> | 
<a href="../viewpostP.html$/thread=218314.html">Print</a> | 
<a href="../bloggers.html">Bloggers</a> | 
<a class="sl" href="thread=208860.html" title="Reflecting generics">Previous</a> | 
<a class="sl" href="thread=238562.html" title="Service Locator Pattern Revisited, Part 1">Next</a>
</div>
</td>
</tr>
</table>
<table bgcolor="#EEEEEE" width="100%">
<tr>
<td align="center">
<div class="sc">
<span style="color: #555555;">Sponsored Link</span> <span style="color: #888888;">•</span>
<script language="JavaScript" src="../_/https/www.artima.com/zcr/adx.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
   if (!document.phpAds_used) document.phpAds_used = ',';
   phpAds_random = new String (Math.random()); phpAds_random = phpAds_random.substring(2,11);
   
   document.write ("<" + "script language='JavaScript' type='text/javascript' src='");
   document.write ("../_/https/www.artima.com/zcr/adjs.html$/n=.html" + phpAds_random);
   document.write ("&amp;what=zone:9&amp;target=_top");   document.write ("&amp;exclude=" + document.phpAds_used);
   if (document.referrer)
      document.write ("&amp;referer=" + escape(document.referrer));
   document.write ("'><" + "/script>");
//-->
</script><noscript><a href="../_/https/www.artima.com/zcr/adclick.html$/n=a799ecf6.html" target="_top"><img alt="" border="0" src="../_/https/www.artima.com/zcr/adview.html$/what=zone:9&amp;n=a0587811.html"/></a></noscript>
</div>
</td>
</tr>
</table>
<br/>
<div class="vegies">
<div class="tc">
<span class="sts">Code by Any Other Name</span><br>
<span class="ts">A case for member literals in Java</span><br/>
<span class="as">by Ian Robertson</span><br/>
<span class="pd">November 4, 2007</span><br/>
</br></div>
<blockquote>
<b>Summary</b><br/>
Allowing static references to class members could greatly increase Java's type-safe expressive capability.

</blockquote>
<hr align="left" width="90%"/>
<table align="right">
<tr>
<td>
<div class="adnotice">
Advertisement
</div>
<center>
<script language="JavaScript" src="../_/https/www.artima.com/zcr/adx.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
if (!document.phpAds_used) document.phpAds_used = ',';
phpAds_random = new String (Math.random()); phpAds_random = phpAds_random.substring(2,11);
document.write ("<" + "script language='JavaScript' type='text/javascript' src='");
document.write ("../_/https/www.artima.com/zcr/adjs.html$/n=.html" + phpAds_random);
document.write ("&amp;what=zone:2");
document.write ("&amp;exclude=" + document.phpAds_used);
if (document.referrer)
document.write ("&amp;referer=" + escape(document.referrer));
document.write ("'><" + "/script>");
//-->
</script><noscript><a href="../_/https/www.artima.com/zcr/adclick.html$/n=a74ab060.html" target="_blank"><img alt="" border="0" src="../_/https/www.artima.com/zcr/adview.html$/what=zone:2&amp;n=a74ab060.html"/></a></noscript>
</center>
</td>
</tr>
</table>
<p>
<p>I recently ran across <a href="../_/http/docs.google.com/View$/docid=ddhp95vd_0f7mcns/index.html">First-class
methods: Java-style closures</a> by Stephen Colebourne and Stefan
Schulz.  The second section in particular, "Member Literals", caught
my eye as suggesting something which I have been wishing Java had for
awhile.  Since Java 1.0, we've been able to
name classes in our source code, e.g. <code>String.class</code>.  Of
course, we can also say
<code>Class.forName("java.lang.String")</code>, but this is both less
elegant and more error prone (and hence also requires coding for
<code>ClassNotFoundException</code>s).  Once we have a class, however,
we can go no further without abandoning static typing; to refer to a
class's members requires reflection.</p>
<p>It doesn't have to be this way.  Already, whenever a class directly
accesses a member of another class, that member reference is stored in the
referring class's <a href="../_/http/java.sun.com/docs/books/jvms/second_edition/html/ClassFile.doc.html#20080">constant
pool</a>.  Allowing member literals in Java code would greatly
add to Java's ability to be expressive in a type-safe manner,
especially with annotations.  Colebourne and Schulz propose using
Javadoc-style syntax to accomplish just this.</p>
<p>For example,
consider the <a href="../_/http/www.javaconcurrencyinpractice.com/annotations/doc/net/jcip/annotations/GuardedBy.html"><code>GuardedBy</code></a>
annotation from Brian Goetz's <em>Java Concurrency In Practice</em>.
This annotation is meant to be placed on a field to indicate what lock
must be acquired before accessing the field.  The annotation takes a
single string value with documented semantics.
<code>@GuardedBy("mutex")</code> implies that a lock should be
acquired on the <code>mutex</code> field,
<code>@GuardedBy(Foo.bar)</code> implies that a lock should be
acquired on the static field <code>bar</code> in the class
<code>Foo</code>, and so forth.  Thus in the following code:</p>
<p><code>
<font color="#7f0055"><b>public class </b></font><font color="#000000">Worker </font><font color="#000000">{</font><br>
<font color="#ffffff">  </font><font color="#7f0055"><b>private </b></font><font color="#000000">Object runningMutex = </font><font color="#7f0055"><b>new </b></font><font color="#000000">Object</font><font color="#000000">()</font><font color="#000000">;</font><br/>
<br/>
<font color="#ffffff">  </font><font color="#646464">@GuardedBy</font><font color="#000000">(</font><font color="#2a00ff">"runningMutex"</font><font color="#000000">)</font><br/>
<font color="#ffffff">  </font><font color="#7f0055"><b>private </b></font><font color="#7f0055"><b>boolean </b></font><font color="#000000">running;</font><br/>
</br></code>
</p>

the <code>@GuardedBy</code> annotation expresses the intent that all
accesses to <code>running</code> should take place while holding a
synchronization lock on <code>runningMutex</code>.  Unfortunately, if
there were a typo, say the value passed to <code>@GuardedBy</code> was
<code>"runnningMutex"</code>, the compiler would not catch this.  If
the <code>@GuardedBy</code>
annotation was just meant to be used by a tool like <a href="../_/http/findbugs.sourceforge.net/index.html">FindBugs</a>, the
problem will be caught soon enough.  However, if one was hoping to use
some runtime byte code manipulation to enforce the access policy, a
runtime error would occur.

<p>Using Colebourne and Schulz's "Member Literals" proposal, the above
code could be rewritten as:

<p><code>
<font color="#7f0055"><b>public class </b></font><font color="#000000">Worker </font><font color="#000000">{</font><br/>
<font color="#ffffff">  </font><font color="#7f0055"><b>private </b></font><font color="#000000">Object runningMutex = </font><font color="#7f0055"><b>new </b></font><font color="#000000">Object</font><font color="#000000">()</font><font color="#000000">;</font><br/>
<br/>
<font color="#ffffff">  </font><font color="#646464">@GuardedByField</font><font color="#000000">(Worker#runningMutex)</font><br/>
<font color="#ffffff">  </font><font color="#7f0055"><b>private </b></font><font color="#7f0055"><b>boolean </b></font><font color="#000000">running;</font><br/>
</code>
</p>
<p>
The benefits would not be limited to annotations.  For example, one
could write something like:

<p>
<code>
<font color="#7f0055"><b>public class </b></font><font color="#000000">Person </font><font color="#000000">{</font><br/>
<font color="#ffffff">  </font><font color="#7f0055"><b>private </b></font><font color="#000000">String firstName;</font><br/>
<font color="#ffffff">  </font><font color="#7f0055"><b>private </b></font><font color="#000000">String lastName;</font><br/>
<font color="#ffffff">  </font><br/>
<font color="#ffffff">  </font><font color="#7f0055"><b>private </b></font><font color="#000000">EqualsHelper&lt;Person&gt; equalsHelper = EqualsHelper.create</font><font color="#000000">(</font><br/>
<font color="#ffffff">    </font><font color="#000000">Person.class, </font><br/>
<font color="#ffffff">    </font><font color="#000000">Person#firstName, </font><br/>
<font color="#ffffff">    </font><font color="#000000">Person#lastName</font><font color="#000000">)</font><font color="#000000">;</font><br/>
<font color="#ffffff"></font><br/>
<font color="#ffffff">  </font><font color="#646464">@Override </font><font color="#7f0055"><b>public </b></font><font color="#7f0055"><b>boolean </b></font><font color="#000000">equals</font><font color="#000000">(</font><font color="#000000">Object obj</font><font color="#000000">) {</font><br/>
<font color="#ffffff">    </font><font color="#7f0055"><b>return </b></font><font color="#000000">equalsHelper.equals</font><font color="#000000">(</font><font color="#000000">this, obj</font><font color="#000000">)</font><font color="#000000">;</font><br/>
<font color="#ffffff">  </font><font color="#000000">}</font></code>
</p>
<p>
While member literals do not dramatically increase the expressiveness
of Java over the current methods of just using strings, they do
dramatically increase the type safety of those expressions.  Method
and field constants would be readily understood by refactoring tools
and the like.  Similarly, IDEs would be able to provide good code
completion support for them.</p>
<h1>Talk Back!</h1>
<p>
Have an opinion?


Readers have already posted

<a href="../_/https/www.artima.com/forums/flat.html$/forum=106&amp;thread=218314.html">18

comments</a>
about this weblog entry. Why not

<a href="../_/https/www.artima.com/forums/post.html$/forum=106&amp;thread=218314&amp;reply=true.html">add yours</a>?


<h1>RSS Feed</h1>
<p>
If you'd like to be notified whenever Ian Robertson adds a new entry to <a href="../index.html$/blogger=ianr.html">his weblog</a>, subscribe to his <a href="../feeds/bloggers/ianr.rss">RSS feed</a>.

<center>
<div class="sociallinks">
<a href="../_/http/digg.com/submit$/phase=2&amp;url=http%3A%2F%2Fwww.artima.com%2Fweblogs%2Fviewpost.jsp%3Fthread%3D218314&amp;title=A+case+for+member+literals+in+Java&amp;bodytext=Allowing+static+references+to+class+members+could+greatly+increase+Java%27s+type-safe+expressive+capability.&amp;topic=programming">
<img alt="Digg" border="0" height="14" hspace="8" src="../_/https/www.artima.com/images/digg.gif" width="16">Digg
  </img></a>
  |
  <a href="../_/http/del.icio.us/post$/url=http%3A%2F%2Fwww.artima.com%2Fweblogs%2Fviewpost.jsp%3Fthread%3D218314&amp;title=A+case+for+member+literals+in+Java">
<img alt="del.icio.us" border="0" height="16" hspace="8" src="../_/https/www.artima.com/images/delicious.gif" vspace="1" width="16">del.icio.us
  </img></a>
  |
  <a href="../_/http/programming.reddit.com/submit$/url=http%3A%2F%2Fwww.artima.com%2Fweblogs%2Fviewpost.jsp%3Fthread%3D218314&amp;title=A+case+for+member+literals+in+Java">
<img alt="Reddit" border="0" height="18" hspace="8" src="../_/https/www.artima.com/images/reddit.gif" width="18"/>Reddit
  </a>
</div>
</center>
<h1>About the Blogger</h1>
<p>
<table><tr valign="bottom"><td><img align="right" src="../_/https/www.artima.com/images/ianRobertson.jpg"/></td><td>Ian Robertson is an application architect at Verisk Health. He is interested in finding concise means of expression in Java without sacrificing type safety. He contributes to various open source projects, including <a href="../_/http/www.jamon.org/index.html">jamon</a> and <a href="../_/http/www.pojomatic.org/index.html">pojomatic</a>.</td></tr></table><p>
<div class="sp">This weblog entry is Copyright © 2007 Ian Robertson. All rights reserved.</div>
</p></p></p></p></p></p></p></div>

<hr width="100%">
<table align="center" width="50%">
<tr>
<td>
<div class="horizontaltextadbox">
<div class="adheadline">Sponsored Links</div>
<div id="sponsoredlinks">
</div>
</div>
</td>
</tr>
</table>
<hr width="100%"/>
<center>
<script type="text/javascript"><!--
google_ad_client = "pub-3911176865765226";
google_alternate_color = "ffffff";
google_ad_width = 728;
google_ad_height = 15;
google_ad_format = "728x15_0ads_al";
google_ad_channel = "";
google_color_border = "ffffff";
google_color_bg = "FFFFFF";
google_color_link = "003090";
google_color_text = "000000";
google_color_url = "666666";
//--></script>
<script src="../_/https/pagead2.googlesyndication.com/pagead/show_ads.js" type="text/javascript">
</script>
<br/>
<br/>
<!-- SiteSearch Google -->
<form action="../_/https/www.google.com/custom/index.html" method="get">
<table bgcolor="#ffffff" border="0">
<tr><td align="left" height="32" nowrap="nowrap" valign="top">
<a href="../_/https/www.google.com/index.html">
<img alt="Google" border="0" src="../_/https/www.google.com/logos/Logo_25wht.gif"/></a>
</td>
<td nowrap="nowrap">
<input name="domains" type="hidden" value="Artima.com"/>
<input maxlength="255" name="q" size="31" type="text" value=""/>
<input name="sa" type="submit" value="Search"/>
</td></tr>
<tr>
<td> </td>
<td nowrap="nowrap">
<font color="#000000" size="-1">
<input name="sitesearch" type="radio" value=""/> Web
<input checked="checked" name="sitesearch" type="radio" value="Artima.com"/>Artima.com
</font>  
<input name="client" type="hidden" value="pub-3911176865765226"/>
<input name="forid" type="hidden" value="1"/>
<input name="ie" type="hidden" value="ISO-8859-1"/>
<input name="oe" type="hidden" value="ISO-8859-1"/>
<input name="cof" type="hidden" value="GALT:#008000;GL:1;DIV:#336699;VLC:663399;AH:center;BGC:FFFFFF;LBGC:FFFFFF;ALC:0000FF;LC:0000FF;T:000000;GFNT:0000FF;GIMP:0000FF;LH:50;LW:150;L:https://www.artima.com/images/artima150.gif;S:https://www.artima.com;FORID:1;"/>
<input name="hl" type="hidden" value="en"/>
</td></tr></table>
</form>
<!-- SiteSearch Google -->
</center>
<br/>
<div class="sp">
<div style="text-align: center;">
<a href="../_/https/www.artima.com/copyright.html">Copyright</a> © 1996-2019 Artima, Inc. All Rights Reserved. - <a href="../_/https/www.artima.com/privacy.html">Privacy Policy</a> - <a href="../_/https/www.artima.com/termsofuse.html">Terms of Use</a>
</div>
</div>
<br/>
<script language="JavaScript" type="text/javascript">
<!--
function initBannerVarForZone(zone) {
        initBannerVarForZoneWithScript(zone, 'adjs_modified');
}

function initBannerVarForZoneWithScript(zone, phpScript) {

        if (!document.phpAds_used) document.phpAds_used = ',';
        phpAds_random = new String (Math.random());
        phpAds_random = phpAds_random.substring(2,11);

        var nextScriptSrc = '../_/https/www.artima.com/zcr/index.html' + phpScript + '.php?n=' +
                phpAds_random  +
                '&amp;what=zone:' + zone + '&amp;target=_top&amp;block=1&amp;blockcampaign=1' +
                '&amp;exclude=' + document.phpAds_used;

        document.write("<script language='JavaScript' type='text/javascript' src='");
        document.write(nextScriptSrc);
        document.write("'><\/script>");

}

function replaceDiv(divID) {
        document.getElementById(divID).innerHTML = phpadsbanner;
}
-->
</script>
<script language="JavaScript" type="text/javascript">
<!--
initBannerVarForZone(3);
-->
</script>
<script language="JavaScript" type="text/javascript">
<!--
replaceDiv('leftskyscraper');
-->
</script>
<script language="JavaScript" type="text/javascript">
<!--
initBannerVarForZoneWithScript(4, 'textman');
-->
</script>
<script language="JavaScript" type="text/javascript">
<!--
replaceDiv('sponsoredlinks');
-->
</script>
</hr><a href="https://dafoster.net/projects/crystal-web-archiver/" id="cr-footer-banner" style="border-top: 2px #B40010 solid;background: #FFFAE1;font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;font-variant: initial;font-weight: initial;text-transform: none;font-size: 14px;color: #6c757d;line-height: 2.0;cursor: pointer;display: flex;align-items: center;justify-content: center;gap: 4px;clear: both;" target="_blank"><img height="24" onerror="this.style['display'] = 'none';" src="../_/crystal/resources/appicon.png" width="24"/><span>This page was archived with Crystal</span><script>window.addEventListener('load', function() { const $1 = document.querySelector('#cr-footer-banner'); if (!$1) { return; } if (window !== window.top) { let $2 = false; if (window.name) { const $3 = window.parent.document.getElementsByName(window.name); if ($3.length === 1) { const $4 = $3[0]; if ($4.tagName === 'FRAME' && $4.parentElement.tagName === 'FRAMESET') { let $5 = $4; while (true) { if ($5.parentElement.tagName !== 'FRAMESET') { $2 = true; break; } if ($5.parentElement.attributes['rows'] !== undefined) { const $6 = $5.parentElement.children; if ($5 === $6[$6.length - 1]) { $5 = $5.parentElement; continue; } else { break; } } else if ($5.parentElement.attributes['cols'] !== undefined) { const $7 = Array.from($5.parentElement.children); const $8 = $7.indexOf($5); if ($8 === -1) { break; } const $9 = $5.parentElement.attributes['cols'].value.split(','); const $10 = $9.map((s) => parseInt(s.trim())); if ($9[$8].trim() === '*' || $10[$8] === Math.max.apply(null, $10)) { $5 = $5.parentElement; continue; } else { break; } } else { break; } } } } } if (!$2) { $1.style['display'] = 'none'; } } const $11 = $1.getBoundingClientRect(); const $12 = ($11.y < window.innerHeight - $11.height); if ($12) { $1.style['position'] = 'fixed'; $1.style['bottom'] = '0'; $1.style['left'] = '0'; $1.style['right'] = '0'; $1.style['z-index'] = '9999'; } const $13 = ( document.body.getBoundingClientRect().height < $11.height * 2 ); if ($13) { $1.style['display'] = 'none'; }
});</script></a></body>
</html>
