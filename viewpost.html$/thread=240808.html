
<!DOCTYPE html>

<html>
<head><meta content="noindex,nofollow" name="robots"/>
<title>Decorators I: Introduction to Python Decorators</title>
<meta charset="utf-8"/>
<meta content="Bruce Eckel" name="author">
<link href="../_/https/www.artima.com/artima.css" rel="stylesheet" type="text/css"/>
<link href="../_/https/www.artima.com/favicon.ico" rel="shortcut icon"/>
</meta></head>
<body><table cellspacing="0" width="100%">
<tr>
<td align="left" valign="bottom">
<a href="../_/https/www.artima.com/index.html"><img alt="The Artima Developer Community" border="0" height="43" src="../_/https/www.artima.com/images/a7.gif" width="550"/></a>
</td>
</tr></table>
<table bgcolor="#333333" width="100%">
<tr>
<td align="center">
<div class="ml">
<a class="hl" href="../_/https/www.artima.com/articles/index.html">Articles</a> |
<a class="hl" href="../_/https/www.artima.com/news/index.html">News</a> |
<a class="hl" href="../index.html">Weblogs</a> |
<a class="hl" href="../_/https/www.artima.com/shop/catalog/index.html">Books</a> |
<a class="hl" href="../_/https/www.artima.com/forums/index.html">Forums</a>
</div>
</td>
</tr>
</table>
<table bgcolor="#CCCCCC" width="100%">
<tr>
<td align="center">
<div class="sc">
<a href="../index.html">Artima Weblogs</a> | 

<a href="../index.html$/blogger=beckel.html">Bruce Eckel's Weblog</a> | 

<a href="../_/https/www.artima.com/forums/flat.html$/forum=106&amp;thread=240808.html">Discuss</a> | 
<a href="mailto:?subject=Decorators I: Introduction to Python Decorators&amp;body= %0AArtima Weblogs %0ADecorators I: Introduction to Python Decorators %0Aby Bruce Eckel %0A%0Ahttps://www.artima.com/weblogs/viewpost.jsp?thread=240808">Email</a> | 
<a href="../viewpostP.html$/thread=240808.html">Print</a> | 
<a href="../bloggers.html">Bloggers</a> | 
<a class="sl" href="thread=240398.html" title="Is There An Equivalent of WordPress for Podcasting?">Previous</a> | 
<a class="sl" href="thread=240845.html" title="Python Decorators II: Decorator Arguments">Next</a>
</div>
</td>
</tr>
</table>
<table bgcolor="#EEEEEE" width="100%">
<tr>
<td align="center">
<div class="sc">
<span style="color: #555555;">Sponsored Link</span> <span style="color: #888888;">•</span>
<script language="JavaScript" src="../_/https/www.artima.com/zcr/adx.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
   if (!document.phpAds_used) document.phpAds_used = ',';
   phpAds_random = new String (Math.random()); phpAds_random = phpAds_random.substring(2,11);
   
   document.write ("<" + "script language='JavaScript' type='text/javascript' src='");
   document.write ("../_/https/www.artima.com/zcr/adjs.html$/n=.html" + phpAds_random);
   document.write ("&amp;what=zone:9&amp;target=_top");   document.write ("&amp;exclude=" + document.phpAds_used);
   if (document.referrer)
      document.write ("&amp;referer=" + escape(document.referrer));
   document.write ("'><" + "/script>");
//-->
</script><noscript><a href="../_/https/www.artima.com/zcr/adclick.html$/n=a799ecf6.html" target="_top"><img alt="" border="0" src="../_/https/www.artima.com/zcr/adview.html$/what=zone:9&amp;n=a0587811.html"/></a></noscript>
</div>
</td>
</tr>
</table>
<br/>
<div class="vegies">
<div class="tc">
<span class="sts">Computing Thoughts</span><br>
<span class="ts">Decorators I: Introduction to Python Decorators</span><br/>
<span class="as">by Bruce Eckel</span><br/>
<span class="pd">October 18, 2008</span><br/>
</br></div>
<blockquote>
<b>Summary</b><br/>
This amazing feature appeared in the language almost apologetically and with concern that it might not be that useful.

</blockquote>
<hr align="left" width="90%"/>
<table align="right">
<tr>
<td>
<div class="adnotice">
Advertisement
</div>
<center>
<script language="JavaScript" src="../_/https/www.artima.com/zcr/adx.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
if (!document.phpAds_used) document.phpAds_used = ',';
phpAds_random = new String (Math.random()); phpAds_random = phpAds_random.substring(2,11);
document.write ("<" + "script language='JavaScript' type='text/javascript' src='");
document.write ("../_/https/www.artima.com/zcr/adjs.html$/n=.html" + phpAds_random);
document.write ("&amp;what=zone:2");
document.write ("&amp;exclude=" + document.phpAds_used);
if (document.referrer)
document.write ("&amp;referer=" + escape(document.referrer));
document.write ("'><" + "/script>");
//-->
</script><noscript><a href="../_/https/www.artima.com/zcr/adclick.html$/n=a74ab060.html" target="_blank"><img alt="" border="0" src="../_/https/www.artima.com/zcr/adview.html$/what=zone:2&amp;n=a74ab060.html"/></a></noscript>
</center>
</td>
</tr>
</table>
<p>
<p>I predict that in time it will be seen as one of the more powerful features in the language. The problem is that all the introductions to decorators that I have seen have been rather confusing, so I will try to rectify that here.</p>
<p>(This series of articles will be incorporated into the <a class="reference" href="../_/http/www.artima.com/weblogs/viewpost.html$/thread=239183.html">open-source book Python 3 Patterns &amp; Idioms</a>).</p>
<div class="section">
<h1><a id="decorators-vs-the-decorator-pattern" name="decorators-vs-the-decorator-pattern">Decorators vs. the Decorator Pattern</a></h1>
<p>First, you need to understand that the word "decorator" was used with some trepidation, because there was concern that it would be completely confused with the <em>Decorator</em> pattern from the <a class="reference" href="../_/http/www.amazon.com/gp/product/0201633612/ref=ase_bruceeckelA/index.html">Design Patterns book</a>. At one point other terms were considered for the feature, but "decorator" seems to be the one that sticks.</p>
<p>Indeed, you can use Python decorators to implement the <em>Decorator</em> pattern, but that's an extremely limited use of it. Python decorators, I think, are best equated to macros.</p>
</div>
<div class="section">
<h1><a id="history-of-macros" name="history-of-macros">History of Macros</a></h1>
<p>The macro has a long history, but most people will probably have had experience with C preprocessor macros. The problems with C macros were (1) they were in a different language (not C) and (2) the behavior was sometimes bizarre, and often inconsistent with the behavior of the rest of C.</p>
<p>Both Java and C# have added <em>annotations</em>, which allow you to do some things to elements of the language. Both of these have the problems that (1) to do what you want, you sometimes have to jump through some enormous and untenable hoops, which follows from (2) these annotation features have their hands tied by the bondage-and-discipline (or as <a class="reference" href="../_/http/martinfowler.com/bliki/SoftwareDevelopmentAttitude.html">Martin Fowler gently puts it: "Directing"</a>) nature of those languages.</p>
<p>In a slightly different vein, many C++ programmers (myself included) have noted the generative abilities of C++ templates and have used that feature in a macro-like fashion.</p>
<p>Many other languages have incorporated macros, but without knowing much about it I will go out on a limb and say that Python decorators are similar to Lisp macros in power and possibility.</p>
</div>
<div class="section">
<h1><a id="the-goal-of-macros" name="the-goal-of-macros">The Goal of Macros</a></h1>
<p>I think it's safe to say that the goal of macros in a language is to provide a way to modify elements of the language. That's what decorators do in Python -- they modify functions, and in the case of <em>class decorators</em>, entire classes. This is why they usually provide a simpler alternative to metaclasses.</p>
<p>The major failings of most language's self-modification approaches are that they are too restrictive and that they require a different language (I'm going to say that Java annotations with all the hoops you must jump through to produce an interesting annotation comprises a "different language").</p>
<p>Python falls into Fowler's category of "enabling" languages, so if you want to do modifications, why create a different or restricted language? Why not just use Python itself? And that's what Python decorators do.</p>
</div>
<div class="section">
<h1><a id="what-can-you-do-with-decorators" name="what-can-you-do-with-decorators">What Can You Do With Decorators?</a></h1>
<p>Decorators allow you to inject or modify code in functions or classes. Sounds a bit like <em>Aspect-Oriented Programming</em> (AOP) in Java, doesn't it? Except that it's both much simpler and (as a result) much more powerful. For example, suppose you'd like to do something at the entry and exit points of a function (such as perform some kind of security, tracing, locking, etc. -- all the standard arguments for AOP). With decorators, it looks like this:</p>
<pre class="literal-block">
@entryExit
def func1():
    print "inside func1()"

@entryExit
def func2():
    print "inside func2()"
</pre>
<p>The <tt class="docutils literal"><span class="pre">@</span></tt> indicates the application of the decorator.</p>
</div>
<div class="section">
<h1><a id="function-decorators" name="function-decorators">Function Decorators</a></h1>
<p>A function decorator is applied to a function definition by placing it on the line before that function definition begins. For example:</p>
<pre class="literal-block">
@myDecorator
def aFunction():
    print "inside aFunction"
</pre>
<p>When the compiler passes over this code, <tt class="docutils literal"><span class="pre">aFunction()</span></tt> is compiled and the resulting function object is passed to the <tt class="docutils literal"><span class="pre">myDecorator</span></tt> code, which does something to produce a function-like object that is then substituted for the original <tt class="docutils literal"><span class="pre">aFunction()</span></tt>.</p>
<p>What does the <tt class="docutils literal"><span class="pre">myDecorator</span></tt> code look like? Well, most introductory examples show this as a function, but I've found that it's easier to start understanding decorators by using classes as decoration mechanisms instead of functions. In addition, it's more powerful.</p>
<p>The only constraint upon the object returned by the decorator is that it can be used as a function -- which basically means it must be callable. Thus, any classes we use as decorators must implement <tt class="docutils literal"><span class="pre">__call__</span></tt>.</p>
<p>What should the decorator do? Well, it can do anything but usually you expect the original function code to be used at some point. This is not required, however:</p>
<pre class="literal-block">
class myDecorator(object):

    def __init__(self, f):
        print "inside myDecorator.__init__()"
        f() # Prove that function definition has completed

    def __call__(self):
        print "inside myDecorator.__call__()"

@myDecorator
def aFunction():
    print "inside aFunction()"

print "Finished decorating aFunction()"

aFunction()
</pre>
<p>When you run this code, you see:</p>
<pre class="literal-block">
inside myDecorator.__init__()
inside aFunction()
Finished decorating aFunction()
inside myDecorator.__call__()
</pre>
<p>Notice that the constructor for <tt class="docutils literal"><span class="pre">myDecorator</span></tt> is executed at the point of  decoration of the function. Since we can call <tt class="docutils literal"><span class="pre">f()</span></tt> inside <tt class="docutils literal"><span class="pre">__init__()</span></tt>, it shows that the creation of <tt class="docutils literal"><span class="pre">f()</span></tt> is complete before the decorator is called. Note also that the decorator constructor receives the function object being decorated. Typically, you'll capture the function object in the constructor and later use it in the <tt class="docutils literal"><span class="pre">__call__()</span></tt> method (the fact that decoration and calling are two clear phases when using classes is why I argue that it's easier and more powerful this way).</p>
<p>When <tt class="docutils literal"><span class="pre">aFunction()</span></tt> is called after it has been decorated, we get completely different behavior; the <tt class="docutils literal"><span class="pre">myDecorator.__call__()</span></tt> method is called instead of the original code. That's because the act of decoration <em>replaces</em> the original function object with the result of the decoration -- in our case, the <tt class="docutils literal"><span class="pre">myDecorator</span></tt> object replaces <tt class="docutils literal"><span class="pre">aFunction</span></tt>. Indeed, before decorators were added you had to do something much less elegant to achieve the same thing:</p>
<pre class="literal-block">
def foo(): pass
foo = staticmethod(foo)
</pre>
<p>With the addition of the <tt class="docutils literal"><span class="pre">@</span></tt> decoration operator, you now get the same result by saying:</p>
<pre class="literal-block">
@staticmethod
def foo(): pass
</pre>
<p>This is the reason why people argued against decorators, because the <tt class="docutils literal"><span class="pre">@</span></tt> is just a little syntax sugar meaning "pass a function object through another function and assign the result to the original function."</p>
<p>The reason I think decorators will have such a big impact is because this little bit of syntax sugar changes the way you think about programming. Indeed, it brings the idea of "applying code to other code" (i.e.: macros) into mainstream thinking by formalizing it as a language construct.</p>
</div>
<div class="section">
<h1><a id="slightly-more-useful" name="slightly-more-useful">Slightly More Useful</a></h1>
<p>Now let's go back and implement the first example. Here, we'll do the more typical thing and actually use the code in the decorated functions:</p>
<pre class="literal-block">
class entryExit(object):

    def __init__(self, f):
        self.f = f

    def __call__(self):
        print "Entering", self.f.__name__
        self.f()
        print "Exited", self.f.__name__

@entryExit
def func1():
    print "inside func1()"

@entryExit
def func2():
    print "inside func2()"

func1()
func2()
</pre>
<p>The output is:</p>
<pre class="literal-block">
Entering func1
inside func1()
Exited func1
Entering func2
inside func2()
Exited func2
</pre>
<p>You can see that the decorated functions now have the "Entering" and "Exited" trace statements around the call.</p>
<p>The constructor stores the argument, which is the function object. In the call, we use the <tt class="docutils literal"><span class="pre">__name__</span></tt> attribute of the function to display that function's name, then call the function itself.</p>
</div>
<div class="section">
<h1><a id="using-functions-as-decorators" name="using-functions-as-decorators">Using Functions as Decorators</a></h1>
<p>The only constraint on the result of a decorator is that it be callable, so it can properly replace the decorated function. In the above examples, I've replaced the original function with an object of a class that has a <tt class="docutils literal"><span class="pre">__call__()</span></tt> method. But a function object is also callable, so we can rewrite the previous example using a function instead of a class, like this:</p>
<pre class="literal-block">
def entryExit(f):
    def new_f():
        print "Entering", f.__name__
        f()
        print "Exited", f.__name__
    return new_f

@entryExit
def func1():
    print "inside func1()"

@entryExit
def func2():
    print "inside func2()"

func1()
func2()
print func1.__name__
</pre>
<p><tt class="docutils literal"><span class="pre">new_f()</span></tt> is defined within the body of <tt class="docutils literal"><span class="pre">entryExit()</span></tt>, so it is created and returned when <tt class="docutils literal"><span class="pre">entryExit()</span></tt> is called. Note that <tt class="docutils literal"><span class="pre">new_f()</span></tt> is a <em>closure</em>, because it captures the actual value of <tt class="docutils literal"><span class="pre">f</span></tt>.</p>
<p>Once <tt class="docutils literal"><span class="pre">new_f()</span></tt> has been defined, it is returned from <tt class="docutils literal"><span class="pre">entryExit()</span></tt> so that the decorator mechanism can assign the result as the decorated function.</p>
<p>The output of the line <tt class="docutils literal"><span class="pre">print</span> <span class="pre">func1.__name__</span></tt> is <tt class="docutils literal"><span class="pre">new_f</span></tt>, because the <tt class="docutils literal"><span class="pre">new_f</span></tt> function has been substituted for the original function during decoration. If this is a problem you can change the name of the decorator function before you return it:</p>
<pre class="literal-block">
def entryExit(f):
    def new_f():
        print "Entering", f.__name__
        f()
        print "Exited", f.__name__
    new_f.__name__ = f.__name__
    return new_f
</pre>
<p>The information you can dynamically get about functions, and the modifications you can make to those functions, are quite powerful in Python.</p>
</div>
<div class="section">
<h1><a id="more-examples" name="more-examples">More Examples</a></h1>
<p>Now that you have the basics, you can look at some more examples of decorators <a class="reference" href="../_/http/wiki.python.org/moin/PythonDecoratorLibrary/index.html">here</a>. Note the number of these examples that use classes rather than functions as decorators.</p>
<p>In this article I have intentionally avoided dealing with the arguments of the decorated function, which I will look at in the next article.</p>
</div>
<h1>Talk Back!</h1>
<p>
Have an opinion?


Readers have already posted

<a href="../_/https/www.artima.com/forums/flat.html$/forum=106&amp;thread=240808.html">35

comments</a>
about this weblog entry. Why not

<a href="../_/https/www.artima.com/forums/post.html$/forum=106&amp;thread=240808&amp;reply=true.html">add yours</a>?


<h1>RSS Feed</h1>
<p>
If you'd like to be notified whenever Bruce Eckel adds a new entry to <a href="../index.html$/blogger=beckel.html">his weblog</a>, subscribe to his <a href="../feeds/bloggers/beckel.rss">RSS feed</a>.

<center>
<div class="sociallinks">
<a href="../_/http/digg.com/submit$/phase=2&amp;url=http%3A%2F%2Fwww.artima.com%2Fweblogs%2Fviewpost.jsp%3Fthread%3D240808&amp;title=Decorators+I%3A+Introduction+to+Python+Decorators&amp;bodytext=This+amazing+feature+appeared+in+the+language+almost+apologetically+and+with+concern+that+it+might+not+be+that+useful.&amp;topic=programming">
<img alt="Digg" border="0" height="14" hspace="8" src="../_/https/www.artima.com/images/digg.gif" width="16">Digg
  </img></a>
  |
  <a href="../_/http/del.icio.us/post$/url=http%3A%2F%2Fwww.artima.com%2Fweblogs%2Fviewpost.jsp%3Fthread%3D240808&amp;title=Decorators+I%3A+Introduction+to+Python+Decorators">
<img alt="del.icio.us" border="0" height="16" hspace="8" src="../_/https/www.artima.com/images/delicious.gif" vspace="1" width="16">del.icio.us
  </img></a>
  |
  <a href="../_/http/programming.reddit.com/submit$/url=http%3A%2F%2Fwww.artima.com%2Fweblogs%2Fviewpost.jsp%3Fthread%3D240808&amp;title=Decorators+I%3A+Introduction+to+Python+Decorators">
<img alt="Reddit" border="0" height="18" hspace="8" src="../_/https/www.artima.com/images/reddit.gif" width="18"/>Reddit
  </a>
</div>
</center>
<h1>About the Blogger</h1>
<p>
<table><tr valign="bottom"><td><img align="right" src="../_/https/www.artima.com/images/bruceeckel.jpg"/></td><td>Bruce Eckel (<a href="../_/http/www.bruceeckel.com/index.html">www.BruceEckel.com</a>) provides development assistance in Python with user interfaces in Flex. He is the author of Thinking in Java (Prentice-Hall, 1998, 2nd Edition, 2000, 3rd Edition, 2003, 4th Edition, 2005), the Hands-On Java Seminar CD ROM (available on the Web site), Thinking in C++ (PH 1995; 2nd edition 2000, Volume 2 with Chuck Allison, 2003), C++ Inside &amp; Out (Osborne/McGraw-Hill 1993), among others. He's given hundreds of presentations throughout the world, published over 150 articles in numerous magazines, was a founding member of the ANSI/ISO C++ committee and speaks regularly at conferences.</td></tr></table><p>
<div class="sp">This weblog entry is Copyright © 2008 Bruce Eckel. All rights reserved.</div>
</p></p></p></p></p></div>

<hr width="100%">
<table align="center" width="50%">
<tr>
<td>
<div class="horizontaltextadbox">
<div class="adheadline">Sponsored Links</div>
<div id="sponsoredlinks">
</div>
</div>
</td>
</tr>
</table>
<hr width="100%"/>
<center>
<script type="text/javascript"><!--
google_ad_client = "pub-3911176865765226";
google_alternate_color = "ffffff";
google_ad_width = 728;
google_ad_height = 15;
google_ad_format = "728x15_0ads_al";
google_ad_channel = "";
google_color_border = "ffffff";
google_color_bg = "FFFFFF";
google_color_link = "003090";
google_color_text = "000000";
google_color_url = "666666";
//--></script>
<script src="../_/https/pagead2.googlesyndication.com/pagead/show_ads.js" type="text/javascript">
</script>
<br>
<br/>
<!-- SiteSearch Google -->
<form action="../_/https/www.google.com/custom/index.html" method="get">
<table bgcolor="#ffffff" border="0">
<tr><td align="left" height="32" nowrap="nowrap" valign="top">
<a href="../_/https/www.google.com/index.html">
<img alt="Google" border="0" src="../_/https/www.google.com/logos/Logo_25wht.gif"/></a>
</td>
<td nowrap="nowrap">
<input name="domains" type="hidden" value="Artima.com"/>
<input maxlength="255" name="q" size="31" type="text" value=""/>
<input name="sa" type="submit" value="Search"/>
</td></tr>
<tr>
<td> </td>
<td nowrap="nowrap">
<font color="#000000" size="-1">
<input name="sitesearch" type="radio" value=""/> Web
<input checked="checked" name="sitesearch" type="radio" value="Artima.com"/>Artima.com
</font>  
<input name="client" type="hidden" value="pub-3911176865765226"/>
<input name="forid" type="hidden" value="1"/>
<input name="ie" type="hidden" value="ISO-8859-1"/>
<input name="oe" type="hidden" value="ISO-8859-1"/>
<input name="cof" type="hidden" value="GALT:#008000;GL:1;DIV:#336699;VLC:663399;AH:center;BGC:FFFFFF;LBGC:FFFFFF;ALC:0000FF;LC:0000FF;T:000000;GFNT:0000FF;GIMP:0000FF;LH:50;LW:150;L:https://www.artima.com/images/artima150.gif;S:https://www.artima.com;FORID:1;"/>
<input name="hl" type="hidden" value="en"/>
</td></tr></table>
</form>
<!-- SiteSearch Google -->
</br></center>
<br/>
<div class="sp">
<div style="text-align: center;">
<a href="../_/https/www.artima.com/copyright.html">Copyright</a> © 1996-2019 Artima, Inc. All Rights Reserved. - <a href="../_/https/www.artima.com/privacy.html">Privacy Policy</a> - <a href="../_/https/www.artima.com/termsofuse.html">Terms of Use</a>
</div>
</div>
<br/>
<script language="JavaScript" type="text/javascript">
<!--
function initBannerVarForZone(zone) {
        initBannerVarForZoneWithScript(zone, 'adjs_modified');
}

function initBannerVarForZoneWithScript(zone, phpScript) {

        if (!document.phpAds_used) document.phpAds_used = ',';
        phpAds_random = new String (Math.random());
        phpAds_random = phpAds_random.substring(2,11);

        var nextScriptSrc = '../_/https/www.artima.com/zcr/index.html' + phpScript + '.php?n=' +
                phpAds_random  +
                '&amp;what=zone:' + zone + '&amp;target=_top&amp;block=1&amp;blockcampaign=1' +
                '&amp;exclude=' + document.phpAds_used;

        document.write("<script language='JavaScript' type='text/javascript' src='");
        document.write(nextScriptSrc);
        document.write("'><\/script>");

}

function replaceDiv(divID) {
        document.getElementById(divID).innerHTML = phpadsbanner;
}
-->
</script>
<script language="JavaScript" type="text/javascript">
<!--
initBannerVarForZone(3);
-->
</script>
<script language="JavaScript" type="text/javascript">
<!--
replaceDiv('leftskyscraper');
-->
</script>
<script language="JavaScript" type="text/javascript">
<!--
initBannerVarForZoneWithScript(4, 'textman');
-->
</script>
<script language="JavaScript" type="text/javascript">
<!--
replaceDiv('sponsoredlinks');
-->
</script>
</hr><a href="https://dafoster.net/projects/crystal-web-archiver/" id="cr-footer-banner" style="border-top: 2px #B40010 solid;background: #FFFAE1;font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;font-variant: initial;font-weight: initial;text-transform: none;font-size: 14px;color: #6c757d;line-height: 2.0;cursor: pointer;display: flex;align-items: center;justify-content: center;gap: 4px;clear: both;" target="_blank"><img height="24" onerror="this.style['display'] = 'none';" src="../_/crystal/resources/appicon.png" width="24"/><span>This page was archived with Crystal</span><script>window.addEventListener('load', function() { const $1 = document.querySelector('#cr-footer-banner'); if (!$1) { return; } if (window !== window.top) { let $2 = false; if (window.name) { const $3 = window.parent.document.getElementsByName(window.name); if ($3.length === 1) { const $4 = $3[0]; if ($4.tagName === 'FRAME' && $4.parentElement.tagName === 'FRAMESET') { let $5 = $4; while (true) { if ($5.parentElement.tagName !== 'FRAMESET') { $2 = true; break; } if ($5.parentElement.attributes['rows'] !== undefined) { const $6 = $5.parentElement.children; if ($5 === $6[$6.length - 1]) { $5 = $5.parentElement; continue; } else { break; } } else if ($5.parentElement.attributes['cols'] !== undefined) { const $7 = Array.from($5.parentElement.children); const $8 = $7.indexOf($5); if ($8 === -1) { break; } const $9 = $5.parentElement.attributes['cols'].value.split(','); const $10 = $9.map((s) => parseInt(s.trim())); if ($9[$8].trim() === '*' || $10[$8] === Math.max.apply(null, $10)) { $5 = $5.parentElement; continue; } else { break; } } else { break; } } } } } if (!$2) { $1.style['display'] = 'none'; } } const $11 = $1.getBoundingClientRect(); const $12 = ($11.y < window.innerHeight - $11.height); if ($12) { $1.style['position'] = 'fixed'; $1.style['bottom'] = '0'; $1.style['left'] = '0'; $1.style['right'] = '0'; $1.style['z-index'] = '9999'; } const $13 = ( document.body.getBoundingClientRect().height < $11.height * 2 ); if ($13) { $1.style['display'] = 'none'; }
});</script></a></body>
</html>
