
<!DOCTYPE html>

<html>
<head><meta content="noindex,nofollow" name="robots"/>
<title>WebSockets: A Glimpse of the Future</title>
<meta charset="utf-8"/>
<meta content="Bruce Eckel" name="author">
<link href="../_/https/www.artima.com/artima.css" rel="stylesheet" type="text/css"/>
<link href="../_/https/www.artima.com/favicon.ico" rel="shortcut icon"/>
</meta></head>
<body><table cellspacing="0" width="100%">
<tr>
<td align="left" valign="bottom">
<a href="../_/https/www.artima.com/index.html"><img alt="The Artima Developer Community" border="0" height="43" src="../_/https/www.artima.com/images/a7.gif" width="550"/></a>
</td>
</tr></table>
<table bgcolor="#333333" width="100%">
<tr>
<td align="center">
<div class="ml">
<a class="hl" href="../_/https/www.artima.com/articles/index.html">Articles</a> |
<a class="hl" href="../_/https/www.artima.com/news/index.html">News</a> |
<a class="hl" href="../index.html">Weblogs</a> |
<a class="hl" href="../_/https/www.artima.com/shop/catalog/index.html">Books</a> |
<a class="hl" href="../_/https/www.artima.com/forums/index.html">Forums</a>
</div>
</td>
</tr>
</table>
<table bgcolor="#CCCCCC" width="100%">
<tr>
<td align="center">
<div class="sc">
<a href="../index.html">Artima Weblogs</a> | 

<a href="../index.html$/blogger=beckel.html">Bruce Eckel's Weblog</a> | 

<a href="../_/https/www.artima.com/forums/flat.html$/forum=106&amp;thread=339100.html">Discuss</a> | 
<a href="mailto:?subject=WebSockets: A Glimpse of the Future&amp;body= %0AArtima Weblogs %0AWebSockets: A Glimpse of the Future %0Aby Bruce Eckel %0A%0Ahttps://www.artima.com/weblogs/viewpost.jsp?thread=339100">Email</a> | 
<a href="../viewpostP.html$/thread=339100.html">Print</a> | 
<a href="../bloggers.html">Bloggers</a> | 
<a class="sl" href="thread=338796.html" title="Scala, Patterns and The Perl Effect">Previous</a> | 
<a class="sl" href="thread=339521.html" title="Is Scala Only for Computer Scientists?">Next</a>
</div>
</td>
</tr>
</table>
<table bgcolor="#EEEEEE" width="100%">
<tr>
<td align="center">
<div class="sc">
<span style="color: #555555;">Sponsored Link</span> <span style="color: #888888;">•</span>
<script language="JavaScript" src="../_/https/www.artima.com/zcr/adx.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
   if (!document.phpAds_used) document.phpAds_used = ',';
   phpAds_random = new String (Math.random()); phpAds_random = phpAds_random.substring(2,11);
   
   document.write ("<" + "script language='JavaScript' type='text/javascript' src='");
   document.write ("../_/https/www.artima.com/zcr/adjs.html$/n=.html" + phpAds_random);
   document.write ("&amp;what=zone:9&amp;target=_top");   document.write ("&amp;exclude=" + document.phpAds_used);
   if (document.referrer)
      document.write ("&amp;referer=" + escape(document.referrer));
   document.write ("'><" + "/script>");
//-->
</script><noscript><a href="../_/https/www.artima.com/zcr/adclick.html$/n=a799ecf6.html" target="_top"><img alt="" border="0" src="../_/https/www.artima.com/zcr/adview.html$/what=zone:9&amp;n=a0587811.html"/></a></noscript>
</div>
</td>
</tr>
</table>
<br/>
<div class="vegies">
<div class="tc">
<span class="sts">Computing Thoughts</span><br>
<span class="ts">WebSockets: A Glimpse of the Future</span><br/>
<span class="as">by Bruce Eckel</span><br/>
<span class="pd">December 31, 2011</span><br/>
</br></div>
<blockquote>
<b>Summary</b><br/>
In order for HTML5 to become the true user interface technology of the future, servers must be able to transparently push data to clients. People have been trying to do this for a long time, and WebSockets look like they will solve the problem once and for all.

</blockquote>
<hr align="left" width="90%"/>
<table align="right">
<tr>
<td>
<div class="adnotice">
Advertisement
</div>
<center>
<script language="JavaScript" src="../_/https/www.artima.com/zcr/adx.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
if (!document.phpAds_used) document.phpAds_used = ',';
phpAds_random = new String (Math.random()); phpAds_random = phpAds_random.substring(2,11);
document.write ("<" + "script language='JavaScript' type='text/javascript' src='");
document.write ("../_/https/www.artima.com/zcr/adjs.html$/n=.html" + phpAds_random);
document.write ("&amp;what=zone:2");
document.write ("&amp;exclude=" + document.phpAds_used);
if (document.referrer)
document.write ("&amp;referer=" + escape(document.referrer));
document.write ("'><" + "/script>");
//-->
</script><noscript><a href="../_/https/www.artima.com/zcr/adclick.html$/n=a74ab060.html" target="_blank"><img alt="" border="0" src="../_/https/www.artima.com/zcr/adview.html$/what=zone:2&amp;n=a74ab060.html"/></a></noscript>
</center>
</td>
</tr>
</table>
<p>
<p>There have been custom technologies, and some open-source projects like Comet and <a class="reference" href="../_/http/cometd.org/index.html">CometD</a>. The great thing about WebSockets <em>will be</em> that they are part of HTML5 and so -- eventually -- they'll be supported, debugged and optimized by the browser vendors. I previously created an <a class="reference" href="../_/http/www.artima.com/weblogs/viewpost.html$/thread=335549.html">example wherein the client polls the server for new information</a> but WebSockets are a much more elegant way to solve this problem.</p>
<p>While James Ward was visiting Crested Butte, we spent a few hours getting a WebSocket demo going. And this really pointed out the value of working together: James would get stuck on something he was working on and I'd help him out; I'd get stuck and he'd help me out. I'm certain I couldn't have figured it out in such a short time without him, plus he brought his perspective and experience to the problem (he's more used to finding certain kinds of flaws than I am, so, for example, he thought of checking to see if there was a problem with browser support).</p>
<p>I decided to use Python because I find it the fastest way to do experiments, so everything in the article is Python-centric.</p>
<div class="section">
<h1><a id="use-homebrew-don-t-use-macports" name="use-homebrew-don-t-use-macports">Use Homebrew. Don't use MacPorts.</a></h1>
<p>The first thing you find out about writing a server app that uses WebSockets is that your server must support eventing, and this usually involves installing some kind of binary library. Windows apparently will not work with many of these systems, unless you make "modifications" (the blog that said this implied dark overtones). I did my experimenting on the Mac, but Linux should also work for the server -- assuming your browser works OK.</p>
<p>For the Mac, I came across instructions that said -- clearly with a grimace -- that I should use MacPorts to perform these binary library installations. I immediately had what is apparently the common experience: it didn't work. I got error messages that indicated that not only was my version of MacPorts out of date, it was so out of date that MacPorts couldn't update it. I had to do some other kind of installation, and I ended up on the Apple developer site with lots of options, all of which cost 99$. I had vague memories of some way to get around this, but nothing precise. And even if I did pony up 99$ for this one thing, it wasn't clear it would even work or if I'd get any other use out of it. The last time I'd used MacPorts was years ago and I remember it as being messy and uncertain.</p>
<p>Fortunately James piped up and pointed me to <a class="reference" href="../_/http/mxcl.github.com/homebrew/index.html">Homebrew</a>. What a wonderful improvement! Installation was easy and they seem to have thought of everything. Basically we're moving from last century where the attitude was "programmers are smart, they'll figure it out. And if they can't, they don't belong here." The Homebrew attitude is "package management isn't the problem people are trying to solve. Let's make it trivial so they don't get derailed, and they can use their momentum to solve their <em>real</em> problem!" The only remaining problem is that your old MacPorts, along with anything it installed, remains a thorn in the side of your configuration. The Homebrew command <tt class="docutils literal"><span class="pre">brew</span> <span class="pre">doctor</span></tt> will analyze your system and tell you where you might encounter problems along with how to fix them. The best situation is if you've never installed MacPorts and you just start with HomeBrew. If you've ever used MacPorts or Fink then that can cause problems. I seem to have avoided these, but now that I've had the Mac long enough to know these kinds of things, I'm tempted -- whenever I upgrade -- to just start with a clean slate and only install things that I know work.</p>
</div>
<div class="section">
<h1><a id="use-virtualenv" name="use-virtualenv">Use Virtualenv</a></h1>
<p>The second lesson I had is to (finally) start using Virtualenv. My friend Barry Hawkins was raving about this at least two years ago but this is the first time I started using it. Basically it creates an isolated configuration which you can load libraries into which will not collide with any global libraries or other Virtualenvs. If you don't like the result, you can easily blow it away. <a class="reference" href="../_/http/www.clemesha.org/blog/modern-python-hacker-tools-virtualenv-fabric-pip/index.html">Here's a nice article</a> describing Virtualenv along with some other valuable tools. <a class="reference" href="../_/http/www.arthurkoziel.com/2008/10/22/working-virtualenv/index.html">This article describes Virtualenv in more depth</a>.</p>
</div>
<div class="section">
<h1><a id="browser-problems" name="browser-problems">Browser Problems</a></h1>
<p>I began the experimentation phase by focusing on a new (to me) web framework called <a class="reference" href="../_/http/flask.pocoo.org/index.html">Flask</a>. This was recommended by one of James' friends at Heroku, who said it was "the one to use." I found the design to be very clean and straightforward; everything you do seems to have direct bearing on the needs of your app and I didn't see anything that looked like handwavy magic. Flask makes very good use of decorators, for example.</p>
<p><strong>Aside:</strong> years ago, at one of the Python conferences, a speaker pointed out the huge number of web app frameworks and said that we needed to narrow down the choices because they were too confusing. At the time I agreed because I was confused myself and wanted someone to take me be the hand and point out the "right" web framework. However, the more I read about evolution the more I think that Python's proliferation of web frameworks is a <em>good</em> thing. All the experiments allow different approaches to be tried and -- since the open-source environment is much closer to a <em>true</em> free market than anything we've ever seen -- the best ideas are selected and inherited into the next generation of frameworks. In other language ecosystems, the "right" framework has sometimes quashed this process, very often to the detriment of that ecosystem. It took years for competitors to arise for J2EE because Sun's marketing was so compelling, and billions were wasted implementing bad J2EE systems in the meantime. In the Ruby world, the Rails team seems to continue to make good design decisions and evolve the framework, but this relies on the makeup and characteristics of that team which could change; in the meantime it's very hard to compete in the world of Ruby web frameworks even if you might have a better way of doing things.</p>
<p>After many years of experimenting, I've learned to start with the easiest path possible, and that was an excellent approach in this case. I began looking for example code showing WebSockets examples using Flask, and found <a class="reference" href="../_/https/gist.github.com/1185629/index.html">this one</a> which looked very straightforward. After jumping through the aforementioned library installation hoops, the server application started up without any Python errors, but the browser was not producing the expected results.</p>
<p>I assumed that it had something to do with Flask, or the library installation, and decided that I should use <a class="reference" href="../_/http/www.tornadoweb.org/index.html">Tornado</a> instead, because it is designed around eventing in order to handle large numbers of users, and WebSockets are based on eventing. Best of all, Tornado already has a built-in library for handling WebSockets -- how could I lose?</p>
<p><strong>Another Aside:</strong> One of the most irritating things about documentation for these frameworks is when the authors use code snippets and say "here's some code that shows how it works." Seriously? Are you saving screen real estate or is it just too much trouble to put a complete working example in your documentation? One compelling reason to put complete examples in is that you can then automatically test and verify that they still work when you create new versions of your framework. Perhaps this would be a nice feature for the Sphinx documentation system that everyone in the Python world seems to be using these days: some way to mark an example as executable code, so that Sphinx could automatically extract it into an "examples" folder.</p>
<p>Eventually I found a <a class="reference" href="../_/http/blog.kagesenshi.org/2011/10/simple-websocket-push-server-using.html">Tornado example that was nice and simple</a> but it <em>still</em> didn't work.</p>
<p>Before I had a chance to think about giving up, pair programming came to the rescue. James searched and discovered that there was a <a class="reference" href="../_/https/github.com/facebook/tornado/issues/423/index.html">new bug report in Tornado</a> -- just one day before -- that said that the latest upgrade of the Google Chrome Browser made some kind of change in WebSockets (apparently a correction) that caused Tornado servers not to work with WebSockets.</p>
<p>James suggested I try a different browser. Firefox, even with the latest update, didn't work and that fit with things we've found on the web about Firefox' current status with WebSockets: not ready yet.</p>
<p>But, surprisingly enough, Safari <em>did</em> work. This makes me a bit nervous because there is a new update of Safari wanting to be installed, so I must be careful not to accidentally install it in case it "fixes" whatever issue that Chrome fixed.</p>
<p>And the aforementioned Flask app still didn't work; it communicated with the server but produced an "Internal Server Error."</p>
<p>All this shows how fragile the current ecosystem is for getting WebSocket applications to work. It's very early days so if you want to experiment with it, keep in mind that the reason your app doesn't work can be anything and everything: your framework, libraries or browser. And the only app you can deploy is one where you control the user's browser (thus, an in-house app). Someday -- we can hope soon -- things will get better.</p>
</div>
<div class="section">
<h1><a id="the-application" name="the-application">The Application</a></h1>
<p>So, having jumped through all these hoops, here is what I got working. I just wanted something simple that would show a WebSocket in action, so all my application does is push numbers to the client's browser application.</p>
<p>Let me emphasize here that I have <em>only</em> been able to get this to work on a Mac using version 5.1.1 of the Safari browser as a client. I tried Linux but no go (there's no Safari for Linux, and I wasn't able to run the server in my Linux Virtualbox and the client on Safari in the hosting Windows7 -- there may be a way to configure it to cross over the Virtualbox boundary but I don't know what that is).</p>
<p>By the time you read this, Tornado may have been upgraded so that it works with Chrome, and Firefox might also be working.</p>
<p>Let's start with the client HTML, which is located in the main directory and called <strong>CountClient.html</strong>:</p>
<pre class="literal-block">
&lt;!doctype html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;title&gt;WebSocket Client&lt;/title&gt;
  &lt;script type="text/javascript" src="/static/jquery.js"&gt;&lt;/script&gt;
  &lt;script type="text/javascript" src="/static/countClient.js"&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body align="center"&gt;
  &lt;h1&gt;WebSocket Client&lt;/h1&gt;
  &lt;h1 id="data"&gt;&lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>
<p>This will be sent from the Tornado server and will pass through the templating system, but since we haven't included any templating code it will pass through untouched. See the <a class="reference" href="../_/http/www.tornadoweb.org/documentation/overview.html$/highlight=static_path#templates.html">Tornado templating documentation</a> for details.</p>
<p>The <strong>h1</strong> tag with the <strong>id</strong> of <em>data</em> will be used by <strong>jquery</strong> to display the data that comes from the server through the WebSocket.</p>
<p>There is one issue that stymied me for awhile, and that is the way that Tornado serves static files, in this case <strong>jquery.js</strong> and <strong>countClient.js</strong>. You can't just put them in the home directory and assume your server will find them there; you typically put them in a dedicated directory and configure Tornado so it knows where they are, by creating a <strong>settings</strong> dictionary (which can also include other configurations):</p>
<pre class="literal-block">
settings = {
    "static_path": os.path.join(os.path.dirname(__file__), "static"),
}
</pre>
<p>You'll see this code later, inside <strong>countServer.py</strong>.</p>
<p><strong>countClient.js</strong>, included in the above HTML, contains the code that creates and configures the WebSocket. This is generated from the following Coffeescript, a technology I describe in <a class="reference" href="../_/http/www.artima.com/weblogs/viewpost.html$/thread=335011.html">this article</a>:</p>
<pre class="literal-block">
ws = new WebSocket("ws://localhost:8888/socket");

ws.onopen = -&gt;
  $('body').append('&lt;div&gt;Opened&lt;/div&gt;');

ws.onmessage = (event) -&gt;
  $('#data').html('&lt;div&gt;' + event.data + '&lt;/div&gt;');

ws.onerror = (event) -&gt;
  $('body').append('&lt;div&gt;Error:' + event + ' ' + '&lt;/div&gt;');

ws.onclose = (event) -&gt;
  $('body').append('&lt;div&gt;Close:' + event.reason + '&lt;/div&gt;');

$ -&gt;
  $('body').append('&lt;div&gt;Start&lt;/div&gt;');
</pre>
<p>First, we create a WebSocket object that connects back to our server which is running locally at port 8888. In <strong>countServer.py</strong> you'll see the handler at <strong>/socket</strong>.</p>
<p>A WebSocket can capture a set of events, and we override the capture methods <strong>onopen</strong>, <strong>onmessage</strong>, <strong>onerror</strong>, and <strong>onclose</strong> above. The most common event will be <strong>onmessage</strong>, and here we extract the <strong>data</strong> and (using <strong>jquery</strong>) replace the existing information within the <strong>data</strong> id in the HTML with the data delivered by the message event.</p>
<p>Once you create the WebSocket, it's connected and available, like magic, for as long as you need. Every time the server has new information it wants to display in the client, it can send it through the WebSocket which will generate an <strong>onmessage</strong> event.</p>
<p>Finally, let's examine the code for the server that uses the Tornado framework:</p>
<pre class="literal-block">
import tornado.ioloop, tornado.web, tornado.websocket, os.path

class MainHandler(tornado.web.RequestHandler):
    def get(self):
        self.render("CountClient.html")

class ClientSocket(tornado.websocket.WebSocketHandler):
    def counter(self):
        self.write_message(str(self.count))
        self.count += 1
    def open(self):
        print "Opened: " + str(self)
        self.count = 0
        self.timer = tornado.ioloop.PeriodicCallback(self.counter, 1000)
        self.timer.start()
    def on_close(self):
        print "Closed: " + str(self)
        self.timer.stop()

settings = {
    "static_path": os.path.join(os.path.dirname(__file__), "static"),
}

application = tornado.web.Application([
    (r"/", MainHandler),
    (r"/socket", ClientSocket),
], **settings)

if __name__ == "__main__":
    application.listen(8888)
    tornado.ioloop.IOLoop.instance().start()
</pre>
<p>This uses the common pattern of mapping URLs to classes. A typical handler, like <strong>MainHandler</strong> which maps from <strong>/</strong>, inherits from the basic <strong>RequestHandler</strong>. All this does is send <strong>CountClient.html</strong> back to the client browser.</p>
<p><strong>CountClient.html</strong> contains the JavaScript code generated by our CoffeeScript that turns around and makes the WebSocket connection back to <strong>/socket</strong>, which maps to the <strong>ClientSocket</strong> class. For each client that opens a WebSocket back to the server, a new <strong>ClientSocket</strong> object is created. The <strong>open</strong> method creates a new associated <strong>count</strong> field and starts a <strong>PeriodicCallback</strong> to call the <strong>counter</strong> method every second. If you've seen eventing systems such as <a class="reference" href="../_/http/twistedmatrix.com/trac/index.html">Twisted</a>, this sort of programming will be familiar to you: you do everything via the main <em>reactor</em>, which in this case is called <strong>tornado.ioloop</strong> (if you're not familiar with event-based programming, it takes a bit of getting used to and I don't actually know of any good introductions to the topic -- perhaps readers can suggest some in the comments).</p>
<p>Although this example was a bit frustrating to get working -- mostly because the lack of support in browsers -- the thought that someday we'll be able to expect WebSocket support everywhere is quite exciting, as it will significantly empower us as programmers and make our applications much more responsive.</p>
</div>
<h1>Talk Back!</h1>
<p>
Have an opinion?


Readers have already posted

<a href="../_/https/www.artima.com/forums/flat.html$/forum=106&amp;thread=339100.html">8

comments</a>
about this weblog entry. Why not

<a href="../_/https/www.artima.com/forums/post.html$/forum=106&amp;thread=339100&amp;reply=true.html">add yours</a>?


<h1>RSS Feed</h1>
<p>
If you'd like to be notified whenever Bruce Eckel adds a new entry to <a href="../index.html$/blogger=beckel.html">his weblog</a>, subscribe to his <a href="../feeds/bloggers/beckel.rss">RSS feed</a>.

<center>
<div class="sociallinks">
<a href="../_/http/digg.com/submit$/phase=2&amp;url=http%3A%2F%2Fwww.artima.com%2Fweblogs%2Fviewpost.jsp%3Fthread%3D339100&amp;title=WebSockets%3A+A+Glimpse+of+the+Future&amp;bodytext=In+order+for+HTML5+to+become+the+true+user+interface+technology+of+the+future%2C+servers+must+be+able+to+transparently+push+data+to+clients.+People+have+been+trying+to+do+this+for+a+long+time%2C+and+WebSockets+look+like+they+will+solve+the+problem+once+_&amp;topic=programming">
<img alt="Digg" border="0" height="14" hspace="8" src="../_/https/www.artima.com/images/digg.gif" width="16">Digg
  </img></a>
  |
  <a href="../_/http/del.icio.us/post$/url=http%3A%2F%2Fwww.artima.com%2Fweblogs%2Fviewpost.jsp%3Fthread%3D339100&amp;title=WebSockets%3A+A+Glimpse+of+the+Future">
<img alt="del.icio.us" border="0" height="16" hspace="8" src="../_/https/www.artima.com/images/delicious.gif" vspace="1" width="16">del.icio.us
  </img></a>
  |
  <a href="../_/http/programming.reddit.com/submit$/url=http%3A%2F%2Fwww.artima.com%2Fweblogs%2Fviewpost.jsp%3Fthread%3D339100&amp;title=WebSockets%3A+A+Glimpse+of+the+Future">
<img alt="Reddit" border="0" height="18" hspace="8" src="../_/https/www.artima.com/images/reddit.gif" width="18"/>Reddit
  </a>
</div>
</center>
<h1>About the Blogger</h1>
<p>
<table><tr valign="bottom"><td><img align="right" src="../_/https/www.artima.com/images/bruceeckel.jpg"/></td><td>Bruce Eckel (<a href="../_/http/www.bruceeckel.com/index.html">www.BruceEckel.com</a>) provides development assistance in Python with user interfaces in Flex. He is the author of Thinking in Java (Prentice-Hall, 1998, 2nd Edition, 2000, 3rd Edition, 2003, 4th Edition, 2005), the Hands-On Java Seminar CD ROM (available on the Web site), Thinking in C++ (PH 1995; 2nd edition 2000, Volume 2 with Chuck Allison, 2003), C++ Inside &amp; Out (Osborne/McGraw-Hill 1993), among others. He's given hundreds of presentations throughout the world, published over 150 articles in numerous magazines, was a founding member of the ANSI/ISO C++ committee and speaks regularly at conferences.</td></tr></table><p>
<div class="sp">This weblog entry is Copyright © 2011 Bruce Eckel. All rights reserved.</div>
</p></p></p></p></p></div>

<hr width="100%">
<table align="center" width="50%">
<tr>
<td>
<div class="horizontaltextadbox">
<div class="adheadline">Sponsored Links</div>
<div id="sponsoredlinks">
</div>
</div>
</td>
</tr>
</table>
<hr width="100%"/>
<center>
<script type="text/javascript"><!--
google_ad_client = "pub-3911176865765226";
google_alternate_color = "ffffff";
google_ad_width = 728;
google_ad_height = 15;
google_ad_format = "728x15_0ads_al";
google_ad_channel = "";
google_color_border = "ffffff";
google_color_bg = "FFFFFF";
google_color_link = "003090";
google_color_text = "000000";
google_color_url = "666666";
//--></script>
<script src="../_/https/pagead2.googlesyndication.com/pagead/show_ads.js" type="text/javascript">
</script>
<br>
<br/>
<!-- SiteSearch Google -->
<form action="../_/https/www.google.com/custom/index.html" method="get">
<table bgcolor="#ffffff" border="0">
<tr><td align="left" height="32" nowrap="nowrap" valign="top">
<a href="../_/https/www.google.com/index.html">
<img alt="Google" border="0" src="../_/https/www.google.com/logos/Logo_25wht.gif"/></a>
</td>
<td nowrap="nowrap">
<input name="domains" type="hidden" value="Artima.com"/>
<input maxlength="255" name="q" size="31" type="text" value=""/>
<input name="sa" type="submit" value="Search"/>
</td></tr>
<tr>
<td> </td>
<td nowrap="nowrap">
<font color="#000000" size="-1">
<input name="sitesearch" type="radio" value=""/> Web
<input checked="checked" name="sitesearch" type="radio" value="Artima.com"/>Artima.com
</font>  
<input name="client" type="hidden" value="pub-3911176865765226"/>
<input name="forid" type="hidden" value="1"/>
<input name="ie" type="hidden" value="ISO-8859-1"/>
<input name="oe" type="hidden" value="ISO-8859-1"/>
<input name="cof" type="hidden" value="GALT:#008000;GL:1;DIV:#336699;VLC:663399;AH:center;BGC:FFFFFF;LBGC:FFFFFF;ALC:0000FF;LC:0000FF;T:000000;GFNT:0000FF;GIMP:0000FF;LH:50;LW:150;L:https://www.artima.com/images/artima150.gif;S:https://www.artima.com;FORID:1;"/>
<input name="hl" type="hidden" value="en"/>
</td></tr></table>
</form>
<!-- SiteSearch Google -->
</br></center>
<br/>
<div class="sp">
<div style="text-align: center;">
<a href="../_/https/www.artima.com/copyright.html">Copyright</a> © 1996-2019 Artima, Inc. All Rights Reserved. - <a href="../_/https/www.artima.com/privacy.html">Privacy Policy</a> - <a href="../_/https/www.artima.com/termsofuse.html">Terms of Use</a>
</div>
</div>
<br/>
<script language="JavaScript" type="text/javascript">
<!--
function initBannerVarForZone(zone) {
        initBannerVarForZoneWithScript(zone, 'adjs_modified');
}

function initBannerVarForZoneWithScript(zone, phpScript) {

        if (!document.phpAds_used) document.phpAds_used = ',';
        phpAds_random = new String (Math.random());
        phpAds_random = phpAds_random.substring(2,11);

        var nextScriptSrc = '../_/https/www.artima.com/zcr/index.html' + phpScript + '.php?n=' +
                phpAds_random  +
                '&amp;what=zone:' + zone + '&amp;target=_top&amp;block=1&amp;blockcampaign=1' +
                '&amp;exclude=' + document.phpAds_used;

        document.write("<script language='JavaScript' type='text/javascript' src='");
        document.write(nextScriptSrc);
        document.write("'><\/script>");

}

function replaceDiv(divID) {
        document.getElementById(divID).innerHTML = phpadsbanner;
}
-->
</script>
<script language="JavaScript" type="text/javascript">
<!--
initBannerVarForZone(3);
-->
</script>
<script language="JavaScript" type="text/javascript">
<!--
replaceDiv('leftskyscraper');
-->
</script>
<script language="JavaScript" type="text/javascript">
<!--
initBannerVarForZoneWithScript(4, 'textman');
-->
</script>
<script language="JavaScript" type="text/javascript">
<!--
replaceDiv('sponsoredlinks');
-->
</script>
</hr><a href="https://dafoster.net/projects/crystal-web-archiver/" id="cr-footer-banner" style="border-top: 2px #B40010 solid;background: #FFFAE1;font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;font-variant: initial;font-weight: initial;text-transform: none;font-size: 14px;color: #6c757d;line-height: 2.0;cursor: pointer;display: flex;align-items: center;justify-content: center;gap: 4px;clear: both;" target="_blank"><img height="24" onerror="this.style['display'] = 'none';" src="../_/crystal/resources/appicon.png" width="24"/><span>This page was archived with Crystal</span><script>window.addEventListener('load', function() { const $1 = document.querySelector('#cr-footer-banner'); if (!$1) { return; } if (window !== window.top) { let $2 = false; if (window.name) { const $3 = window.parent.document.getElementsByName(window.name); if ($3.length === 1) { const $4 = $3[0]; if ($4.tagName === 'FRAME' && $4.parentElement.tagName === 'FRAMESET') { let $5 = $4; while (true) { if ($5.parentElement.tagName !== 'FRAMESET') { $2 = true; break; } if ($5.parentElement.attributes['rows'] !== undefined) { const $6 = $5.parentElement.children; if ($5 === $6[$6.length - 1]) { $5 = $5.parentElement; continue; } else { break; } } else if ($5.parentElement.attributes['cols'] !== undefined) { const $7 = Array.from($5.parentElement.children); const $8 = $7.indexOf($5); if ($8 === -1) { break; } const $9 = $5.parentElement.attributes['cols'].value.split(','); const $10 = $9.map((s) => parseInt(s.trim())); if ($9[$8].trim() === '*' || $10[$8] === Math.max.apply(null, $10)) { $5 = $5.parentElement; continue; } else { break; } } else { break; } } } } } if (!$2) { $1.style['display'] = 'none'; } } const $11 = $1.getBoundingClientRect(); const $12 = ($11.y < window.innerHeight - $11.height); if ($12) { $1.style['position'] = 'fixed'; $1.style['bottom'] = '0'; $1.style['left'] = '0'; $1.style['right'] = '0'; $1.style['z-index'] = '9999'; } const $13 = ( document.body.getBoundingClientRect().height < $11.height * 2 ); if ($13) { $1.style['display'] = 'none'; }
});</script></a></body>
</html>
