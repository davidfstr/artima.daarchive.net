
<!DOCTYPE html>

<html>
<head><meta content="noindex,nofollow" name="robots"/>
<title>The Adventures of a Pythonista in Schemeland/19</title>
<meta charset="utf-8"/>
<meta content="Michele Simionato" name="author">
<link href="../_/https/www.artima.com/artima.css" rel="stylesheet" type="text/css"/>
<link href="../_/https/www.artima.com/favicon.ico" rel="shortcut icon"/>
</meta></head>
<body><table cellspacing="0" width="100%">
<tr>
<td align="left" valign="bottom">
<a href="../_/https/www.artima.com/index.html"><img alt="The Artima Developer Community" border="0" height="43" src="../_/https/www.artima.com/images/a7.gif" width="550"/></a>
</td>
</tr></table>
<table bgcolor="#333333" width="100%">
<tr>
<td align="center">
<div class="ml">
<a class="hl" href="../_/https/www.artima.com/articles/index.html">Articles</a> |
<a class="hl" href="../_/https/www.artima.com/news/index.html">News</a> |
<a class="hl" href="../index.html">Weblogs</a> |
<a class="hl" href="../_/https/www.artima.com/shop/catalog/index.html">Books</a> |
<a class="hl" href="../_/https/www.artima.com/forums/index.html">Forums</a>
</div>
</td>
</tr>
</table>
<table bgcolor="#CCCCCC" width="100%">
<tr>
<td align="center">
<div class="sc">
<a href="../index.html">Artima Weblogs</a> | 

<a href="../index.html$/blogger=micheles.html">Michele Simionato's Weblog</a> | 

<a href="../_/https/www.artima.com/forums/flat.html$/forum=106&amp;thread=251476.html">Discuss</a> | 
<a href="mailto:?subject=The Adventures of a Pythonista in Schemeland/19&amp;body= %0AArtima Weblogs %0AThe Adventures of a Pythonista in Schemeland/19 %0Aby Michele Simionato %0A%0Ahttps://www.artima.com/weblogs/viewpost.jsp?thread=251476">Email</a> | 
<a href="../viewpostP.html$/thread=251476.html">Print</a> | 
<a href="../bloggers.html">Bloggers</a> | 
<a class="sl" href="thread=254507.html" title="Mixins considered harmful/4">Previous</a> | 
<a class="sl" href="thread=255303.html" title="The Adventures of a Pythonista in Schemeland/20">Next</a>
</div>
</td>
</tr>
</table>
<table bgcolor="#EEEEEE" width="100%">
<tr>
<td align="center">
<div class="sc">
<span style="color: #555555;">Sponsored Link</span> <span style="color: #888888;">•</span>
<script language="JavaScript" src="../_/https/www.artima.com/zcr/adx.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
   if (!document.phpAds_used) document.phpAds_used = ',';
   phpAds_random = new String (Math.random()); phpAds_random = phpAds_random.substring(2,11);
   
   document.write ("<" + "script language='JavaScript' type='text/javascript' src='");
   document.write ("../_/https/www.artima.com/zcr/adjs.html$/n=.html" + phpAds_random);
   document.write ("&amp;what=zone:9&amp;target=_top");   document.write ("&amp;exclude=" + document.phpAds_used);
   if (document.referrer)
      document.write ("&amp;referer=" + escape(document.referrer));
   document.write ("'><" + "/script>");
//-->
</script><noscript><a href="../_/https/www.artima.com/zcr/adclick.html$/n=a799ecf6.html" target="_top"><img alt="" border="0" src="../_/https/www.artima.com/zcr/adview.html$/what=zone:9&amp;n=a0587811.html"/></a></noscript>
</div>
</td>
</tr>
</table>
<br/>
<div class="vegies">
<div class="tc">
<span class="sts">The Explorer</span><br>
<span class="ts">The Adventures of a Pythonista in Schemeland/19</span><br/>
<span class="as">by Michele Simionato</span><br/>
<span class="pd">April 21, 2009</span><br/>
</br></div>
<blockquote>
<b>Summary</b><br/>
This is the first of six episodes concerning
the R6RS module system. The module system is quite new and
it is the result of several compromises. As a consequence,
it has some rough edge and writing portable code - specially for macro writers - is not always trivial.

</blockquote>
<hr align="left" width="90%"/>
<table align="right">
<tr>
<td>
<div class="adnotice">
Advertisement
</div>
<center>
<script language="JavaScript" src="../_/https/www.artima.com/zcr/adx.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
if (!document.phpAds_used) document.phpAds_used = ',';
phpAds_random = new String (Math.random()); phpAds_random = phpAds_random.substring(2,11);
document.write ("<" + "script language='JavaScript' type='text/javascript' src='");
document.write ("../_/https/www.artima.com/zcr/adjs.html$/n=.html" + phpAds_random);
document.write ("&amp;what=zone:2");
document.write ("&amp;exclude=" + document.phpAds_used);
if (document.referrer)
document.write ("&amp;referer=" + escape(document.referrer));
document.write ("'><" + "/script>");
//-->
</script><noscript><a href="../_/https/www.artima.com/zcr/adclick.html$/n=a74ab060.html" target="_blank"><img alt="" border="0" src="../_/https/www.artima.com/zcr/adview.html$/what=zone:2&amp;n=a74ab060.html"/></a></noscript>
</center>
</td>
</tr>
</table>
<p>
<h1 class="title">The R6RS module system</h1>
<p>For nearly 30 years Scheme lived without a standard module system.
The consequences of this omission were the proliferation of dozens
of incompatible module systems and neverending debates.
The situation changed with the R6RS report: nowadays Scheme <em>has</em>
an official module system, finally.</p>
<p>Unfortunately the official module system is <em>not</em> used
by all Scheme implementations, and it is quite possible that some implementation
will never support it. For instance <a class="reference" href="../_/http/www.call-with-current-continuation.org/index.html">Chicken</a>, a major implementation,
just released version 4, which includes a brand new module system
<em>not compatible</em> with the R6RS system.
You should be aware that the module system (and actually
the whole of the R6RS standard) is controversial, and there are good
reasons why it is so.</p>
<p>I cannot do anything about the political
issues, but I can do something about the technical issues, by
explaining the subtle points and by documenting the most common pitfalls.
It will take me six full episodes to
explain the module system and its trickiness, especially for macro
writers who want to write portable code.</p>
<img alt="../_/http/www.phyast.pitt.edu/~micheles/scheme/Jigsaw.png" src="../_/http/www.phyast.pitt.edu/~micheles/scheme/Jigsaw.png">
<div class="section">
<h1><a id="modules-are-not-first-class-objects" name="modules-are-not-first-class-objects">Modules are not first class objects</a></h1>
<p>Since the title of this series is <em>The Adventures of a Pythonista in
Schemeland</em> let me begin my excursion about the R6RS module
system by contrasting it with the Python module system.</p>
<p>The major difference between Python modules and Scheme modules is that
Python modules are first class runtime objects which can be passed and
returned from functions, as well as modified and introspected freely;
Scheme modules, instead, are compile time entities which cannot be
imported at runtime, nor passed to functions or returned from functions;
moreover they cannot be modified and cannot be introspected.</p>
<p>Python modules are so flexible because they are basically
dictionaries.  It would not be difficult to implement a Python-like
module system in Scheme, by making use of hash-tables, the equivalent
of dictionaries. However, the standard module system does not
follow this route, because Scheme modules may contain macros which are
not first class objects, therefore modules cannot be first class objects
themselves [some may argue that having macros which are not first
class objects is the root of all evil, and look for alternative routes
with macro-like constructs which are however first class objects; however,
I do not want to open this particular can of worms here].</p>
<p>Since Scheme modules are not first class objects it is impossible to add
names dynamically to a module, or to replace a binding with another, as
in Python. It is also impossible to get the list of names
exported by a module: the only way is to look at the export list
in the source code. It is also impossible to export all the names
from a module automatically: one has to list them all explicitly.</p>
<p>In general Scheme is not too strong at introspection, and that it is
really disturbing to me since it is an issue that could be easily
solved.  For instance, my <tt class="docutils literal"><span class="pre">sweet-macros</span></tt> library provides
introspection features, so that you can ask at runtime, for instance
from the REPL, what are the patterns and the literals accepted by a
macro, its source code and its associated transformer, even if the
macro is a purely compile time entity. It would be
perfectly possible to give an introspection API to every imported
module. For instance, every module could automagically define a
variable - defined both at runtime and compile time - containing the
full list of exported names and there could be some builtin syntax to
query the list.</p>
<p>But introspection has been completely neglected by the current
standard. One wonders how Schemers cope with large libraries/frameworks
like the ones we use every day in the enterprise world, which export
thounsands and thousands of names in hundreds and hundreds of modules.
Let's hope for something better in the future.</p>
<p>I also want to point out a thing that should be obvious:
if you have a Scheme library <tt class="docutils literal"><span class="pre">lib.sls</span></tt> which
defines a variable <tt class="docutils literal"><span class="pre">x</span></tt>, and you import it with a prefix <tt class="docutils literal"><span class="pre">lib.</span></tt>,
you can access the variable with the Python-like syntax
<tt class="docutils literal"><span class="pre">lib.x</span></tt>. However, <tt class="docutils literal"><span class="pre">lib.x</span></tt> in Scheme means something completely
different from <tt class="docutils literal"><span class="pre">lib.x</span></tt> in Python: <tt class="docutils literal"><span class="pre">lib.x</span></tt> in Scheme is just a name
with a prefix, whereas <tt class="docutils literal"><span class="pre">lib.x</span></tt> in Python means
"take the attribute <tt class="docutils literal"><span class="pre">x</span></tt> of the object <tt class="docutils literal"><span class="pre">lib</span></tt>"
and that involves a function call.
In other words, Python must perform an hash table lookup everytime you
use the syntax <tt class="docutils literal"><span class="pre">lib.x</span></tt>, whereas Scheme does not need to do so.</p>
<p>I should also points out that usually (and unfortunately) in
the Scheme world people do not use prefixes; by default all
exported names are imported, just as it is the case for Python
when the (discouraged) style <tt class="docutils literal"><span class="pre">from</span> <span class="pre">lib</span> <span class="pre">import</span> <span class="pre">*</span></tt> is used.</p>
</div>
<div class="section">
<h1><a id="compiling-scheme-modules-vs-compiling-python-modules" name="compiling-scheme-modules-vs-compiling-python-modules">Compiling Scheme modules vs compiling Python modules</a></h1>
<p>Let me continue my comparison between Python modules and Scheme
modules, by comparing the compilation/execution mechanism in the two
languages. I will begin from Python, by giving a simplified
description which is however not far from the truth.</p>
<p>When you run a script <tt class="docutils literal"><span class="pre">script.py</span></tt> depending on some library
<tt class="docutils literal"><span class="pre">lib.py</span></tt>, the Python interpreter searches fo a bytecode-compiled
file <tt class="docutils literal"><span class="pre">lib.pyc</span></tt>, updated with respect to the the source file
<tt class="docutils literal"><span class="pre">lib.py</span></tt>; if it finds it, it imports it, otherwise it compiles the
source file <em>on-the-fly</em>, generates a <tt class="docutils literal"><span class="pre">lib.pyc</span></tt> file and imports it.
A bytecompiled file is updated with respect to the source file if it has been
generated <em>after</em> the source file; if you modify the source file, the
<tt class="docutils literal"><span class="pre">lib.pyc</span></tt> file becomes outdated: the Python interpreter is smart
enough to recognize the issue and to seamlessly recompile <tt class="docutils literal"><span class="pre">lib.pyc</span></tt>.</p>
<p>In Scheme the compilation process is very much <em>implementation-dependent</em>.
Here I will give some example of how things work in three representative
R6RS-conforming implementations, Ikarus, Ypsilon and PLT Scheme/mzscheme.</p>
<p>Ikarus has two modes of operation; by default it just compiles
everything from scratch, without using any intermediate file.
This is possible since the Ikarus compiler is very fast. However,
this mechanism does not scale; if you have very large libraries,
it does not make sense to recompile everything every time you add a
little script.
Therefore Ikarus (in the latest development version) added a mechanism
similar to the Python one; if you have a file <tt class="docutils literal"><span class="pre">script.ss</span></tt> which
depends on a library <tt class="docutils literal"><span class="pre">lib.sls</span></tt> and run the command</p>
<pre class="literal-block">
$ ikarus --compile-dependencies script.ss
Serializing "./lib.sls.ikarus-fasl" ...
</pre>
<p>the compiler will automatically (re)generate a precompiled file
<tt class="docutils literal"><span class="pre">lib.sls.ikarus-fasl</span></tt> from the source file <tt class="docutils literal"><span class="pre">lib.sls</span></tt> as needed, by
looking at the time stamps. Exactly the same as in Python.  The only
difference is that Python compiles to bytecode, whereas Ikarus compile
to native code.</p>
<p>Notice that whereas in theory Ikarus should
always be much faster of Python, in practice this is not guaranteed: a
lot of Python programs are actually calling underlying C libraries, so
that Python can be pretty fast in some cases (for instance in
numeric computations using numpy).</p>
<p>All I said for Ikarus, can be said from Ypsilon, with minor differences.
Ypsilon compiles to bytecode, like Python.
Precompiled files are automatically generated
without the need to specify any flag, as in Python; however they
are stored in a so called auto-compile-cache directory, which by
default is situated in <tt class="docutils literal"><span class="pre">$HOME/.ypsilon</span></tt>. The location can
be changed by setting the environment variable <tt class="docutils literal"><span class="pre">YPSILON_ACC</span></tt>
or by passing the <tt class="docutils literal"><span class="pre">--acc=dir</span></tt> argument to the Ypsilon interpreter.
It is possible to disable the cache and to clear the cache; if you
are curious about the details you should look at the Ypsilon manual
(<tt class="docutils literal"><span class="pre">man</span> <span class="pre">ypsilon</span></tt>).</p>
<p>PLT Scheme/mzscheme works in a slightly different way. The command</p>
<pre class="literal-block">
$ plt-r6rs script.ss
</pre>
<p>interprets the script and its dependencies on the fly. The command</p>
<pre class="literal-block">
$ plt-r6rs --compile script.ss
</pre>
<p>compiles the script and its dependencies, and stores the compiled file
in the <em>collects</em> directory, which on my system is in
<tt class="docutils literal"><span class="pre">$HOME/.plt-scheme/4.1.2/collects</span></tt>. Each library has its own
directory of compiled files.</p>
</div>
<div class="section">
<h1><a id="compiling-is-not-the-same-than-executing" name="compiling-is-not-the-same-than-executing">Compiling is not the same than executing</a></h1>
<p>There are other similarities between a Python (bytecode)
compiler and a Scheme compiler.
For instance, they are both very permissive, in the sense that they flag
very few errors at compile time. Consider for instance the following
Python module:</p>
<pre class="literal-block">
$ cat lib.py
x = 1/0
</pre>
<p>The module contains an obvious error, that in principle should be
visible to the (bytecode) compiler. However, the compiler only checks
that the module contains syntactically correct Python code, it <em>does
not evaluate it</em>, and generates a <tt class="docutils literal"><span class="pre">lib.pyc</span></tt> file without
complaining:</p>
<pre class="literal-block">
$ python -m py_compile lib.py # generates lib.pyc without errors
</pre>
<p>The error will be flagged at runtime, only when you import the module:</p>
<pre class="literal-block">
$ python -c"import lib"
Traceback (most recent call last):
  File "&lt;string&gt;", line 1, in &lt;module&gt;
  File "lib.py", line 1, in &lt;module&gt;
    x = 1/0
ZeroDivisionError: integer division or modulo by zero
</pre>
<p>R6RS Scheme uses a similar model. Consider for instance the library</p>
<pre class="literal-block">
$ echo lib.sls
#!r6rs
(library (lib)
 (export x)
 (import (rnrs))
 (define x (/ 1 0)))
</pre>
<p>and the script</p>
<pre class="literal-block">
$ echo script.ss
(import (rnrs) (lib))
</pre>
<p>You can compile the script and the library without seeing any error:</p>
<pre class="literal-block">
$ plt-r6rs --compile script.ss
 [Compiling ./script.ss]
 [Compiling ./.plt-scheme/4.1.2/collects/lib/main.sls]
</pre>
<p>Running the script however raises an error:</p>
<pre class="literal-block">
$  plt-r6rs  script.ss
/: division by zero
</pre>
<p>Like in Python, the error is raised when the module is imported
(the technical name in Scheme is <em>instantiated</em>).</p>
<p>However, there is a gray area of the R6RS module system here, and
implementations are free to not import unused modules. To my knowledge,
Ikarus is the only implementation making using of this freedom.
If you run</p>
<pre class="literal-block">
$ ikarus --r6rs-script script.ss
</pre>
<p>no error is raised. Ikarus is just <em>visiting</em> the
module, i.e. taking notes of the names exported
by it and of the dependencies, but the module is not
evaluated, because it is not used.  However, if you use it, for
instance if you try to access the <tt class="docutils literal"><span class="pre">x</span></tt> variable, you will get
the division error at runtime:</p>
<pre class="literal-block">
$ echo script.ss
(import (rnrs) (prefix (lib) lib:))
(begin
  (display "running ...\n")
  (display lib:x))
$  ikarus --r6rs-script script.ss
Unhandled exception:
 Condition components:
   1. &amp;assertion
   2. &amp;who: /
   3. &amp;message: "division by 0"
   4. &amp;irritants: ()
</pre>
<p>Here I have used an import prefix <tt class="docutils literal"><span class="pre">lib:</span></tt>, just to be more explicit.
Another difference between Ikarus and PLT is that in PLT both the
script and the library are compiled, whereas in Ikarus only the library
is compiled. In the next episodes we will see many other examples of differences
between R6RS-conforming implementations.</p>
<hr class="docutils">
<p><em>Acknowledgments</em></p>
<p>All the <em>Adventures</em> have my name at the top and I take full
responsibility for the opinions and the mistakes. But for
the parts which are correct, I deserve little credit, since
most of the time I am just reporting advice which I have received
from the Scheme community, mostly from comp.lang.scheme and
ikarus-users, as well from private emails. This is true for all of
my <em>Adventures</em>, but especially
for the six episodes about the module system you are about to read.
I was very ignorant about the module system when I started this
project, and this work would not have been possible without the
help of Abdulaziz Ghuloum, Derick Eddington, Will Clinger, Eli
Barzilay, Matthew Flatt, André van Tolder and many others.
Thank you guys, you rock!</p>
</hr></div>
<h1>Talk Back!</h1>
<p>
Have an opinion?


Be the first to

<a href="../_/https/www.artima.com/forums/post.html$/forum=106&amp;thread=251476&amp;reply=true.html">post a comment</a> about
this weblog entry.


<h1>RSS Feed</h1>
<p>
If you'd like to be notified whenever Michele Simionato adds a new entry to <a href="../index.html$/blogger=micheles.html">his weblog</a>, subscribe to his <a href="../feeds/bloggers/micheles.rss">RSS feed</a>.

<center>
<div class="sociallinks">
<a href="../_/http/digg.com/submit$/phase=2&amp;url=http%3A%2F%2Fwww.artima.com%2Fweblogs%2Fviewpost.jsp%3Fthread%3D251476&amp;title=The+Adventures+of+a+Pythonista+in+Schemeland%2F19&amp;bodytext=This+is+the+first+of+six+episodes+concerning%0D%0Athe+R6RS+module+system.+The+module+system+is+quite+new+and%0D%0Ait+is+the+result+of+several+compromises.+As+a+consequence%2C%0D%0Ait+has+some+rough+edge+and+writing+portable+code+-+specially+for+macro+writers+-+is+_&amp;topic=programming">
<img alt="Digg" border="0" height="14" hspace="8" src="../_/https/www.artima.com/images/digg.gif" width="16">Digg
  </img></a>
  |
  <a href="../_/http/del.icio.us/post$/url=http%3A%2F%2Fwww.artima.com%2Fweblogs%2Fviewpost.jsp%3Fthread%3D251476&amp;title=The+Adventures+of+a+Pythonista+in+Schemeland%2F19">
<img alt="del.icio.us" border="0" height="16" hspace="8" src="../_/https/www.artima.com/images/delicious.gif" vspace="1" width="16"/>del.icio.us
  </a>
  |
  <a href="../_/http/programming.reddit.com/submit$/url=http%3A%2F%2Fwww.artima.com%2Fweblogs%2Fviewpost.jsp%3Fthread%3D251476&amp;title=The+Adventures+of+a+Pythonista+in+Schemeland%2F19">
<img alt="Reddit" border="0" height="18" hspace="8" src="../_/https/www.artima.com/images/reddit.gif" width="18"/>Reddit
  </a>
</div>
</center>
<h1>About the Blogger</h1>
<p>
<table><tr valign="bottom"><td><img align="right" src="../_/https/www.artima.com/images/micheleSimionato.jpg"/></td><td>Michele Simionato started his career as a Theoretical Physicist, working in Italy, France and the U.S. He turned to programming in 2003; since then he has been working professionally as a Python developer and now he lives in Milan, Italy. Michele is well known in the Python community for his posts in the newsgroup(s), his articles and his Open Source libraries and recipes. His interests include object oriented programming, functional programming, and in general programming metodologies that enable us to manage the complexity of modern software developement.</td></tr></table><p>
<div class="sp">This weblog entry is Copyright © 2009 Michele Simionato. All rights reserved.</div>
</p></p></p></p></img></p></div>

<hr width="100%"/>
<table align="center" width="50%">
<tr>
<td>
<div class="horizontaltextadbox">
<div class="adheadline">Sponsored Links</div>
<div id="sponsoredlinks">
</div>
</div>
</td>
</tr>
</table>
<hr width="100%"/>
<center>
<script type="text/javascript"><!--
google_ad_client = "pub-3911176865765226";
google_alternate_color = "ffffff";
google_ad_width = 728;
google_ad_height = 15;
google_ad_format = "728x15_0ads_al";
google_ad_channel = "";
google_color_border = "ffffff";
google_color_bg = "FFFFFF";
google_color_link = "003090";
google_color_text = "000000";
google_color_url = "666666";
//--></script>
<script src="../_/https/pagead2.googlesyndication.com/pagead/show_ads.js" type="text/javascript">
</script>
<br>
<br/>
<!-- SiteSearch Google -->
<form action="../_/https/www.google.com/custom/index.html" method="get">
<table bgcolor="#ffffff" border="0">
<tr><td align="left" height="32" nowrap="nowrap" valign="top">
<a href="../_/https/www.google.com/index.html">
<img alt="Google" border="0" src="../_/https/www.google.com/logos/Logo_25wht.gif"/></a>
</td>
<td nowrap="nowrap">
<input name="domains" type="hidden" value="Artima.com"/>
<input maxlength="255" name="q" size="31" type="text" value=""/>
<input name="sa" type="submit" value="Search"/>
</td></tr>
<tr>
<td> </td>
<td nowrap="nowrap">
<font color="#000000" size="-1">
<input name="sitesearch" type="radio" value=""/> Web
<input checked="checked" name="sitesearch" type="radio" value="Artima.com"/>Artima.com
</font>  
<input name="client" type="hidden" value="pub-3911176865765226"/>
<input name="forid" type="hidden" value="1"/>
<input name="ie" type="hidden" value="ISO-8859-1"/>
<input name="oe" type="hidden" value="ISO-8859-1"/>
<input name="cof" type="hidden" value="GALT:#008000;GL:1;DIV:#336699;VLC:663399;AH:center;BGC:FFFFFF;LBGC:FFFFFF;ALC:0000FF;LC:0000FF;T:000000;GFNT:0000FF;GIMP:0000FF;LH:50;LW:150;L:https://www.artima.com/images/artima150.gif;S:https://www.artima.com;FORID:1;"/>
<input name="hl" type="hidden" value="en"/>
</td></tr></table>
</form>
<!-- SiteSearch Google -->
</br></center>
<br/>
<div class="sp">
<div style="text-align: center;">
<a href="../_/https/www.artima.com/copyright.html">Copyright</a> © 1996-2019 Artima, Inc. All Rights Reserved. - <a href="../_/https/www.artima.com/privacy.html">Privacy Policy</a> - <a href="../_/https/www.artima.com/termsofuse.html">Terms of Use</a>
</div>
</div>
<br/>
<script language="JavaScript" type="text/javascript">
<!--
function initBannerVarForZone(zone) {
        initBannerVarForZoneWithScript(zone, 'adjs_modified');
}

function initBannerVarForZoneWithScript(zone, phpScript) {

        if (!document.phpAds_used) document.phpAds_used = ',';
        phpAds_random = new String (Math.random());
        phpAds_random = phpAds_random.substring(2,11);

        var nextScriptSrc = '../_/https/www.artima.com/zcr/index.html' + phpScript + '.php?n=' +
                phpAds_random  +
                '&amp;what=zone:' + zone + '&amp;target=_top&amp;block=1&amp;blockcampaign=1' +
                '&amp;exclude=' + document.phpAds_used;

        document.write("<script language='JavaScript' type='text/javascript' src='");
        document.write(nextScriptSrc);
        document.write("'><\/script>");

}

function replaceDiv(divID) {
        document.getElementById(divID).innerHTML = phpadsbanner;
}
-->
</script>
<script language="JavaScript" type="text/javascript">
<!--
initBannerVarForZone(3);
-->
</script>
<script language="JavaScript" type="text/javascript">
<!--
replaceDiv('leftskyscraper');
-->
</script>
<script language="JavaScript" type="text/javascript">
<!--
initBannerVarForZoneWithScript(4, 'textman');
-->
</script>
<script language="JavaScript" type="text/javascript">
<!--
replaceDiv('sponsoredlinks');
-->
</script>
<a href="https://dafoster.net/projects/crystal-web-archiver/" id="cr-footer-banner" style="border-top: 2px #B40010 solid;background: #FFFAE1;font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;font-variant: initial;font-weight: initial;text-transform: none;font-size: 14px;color: #6c757d;line-height: 2.0;cursor: pointer;display: flex;align-items: center;justify-content: center;gap: 4px;clear: both;" target="_blank"><img height="24" onerror="this.style['display'] = 'none';" src="../_/crystal/resources/appicon.png" width="24"/><span>This page was archived with Crystal</span><script>window.addEventListener('load', function() { const $1 = document.querySelector('#cr-footer-banner'); if (!$1) { return; } if (window !== window.top) { let $2 = false; if (window.name) { const $3 = window.parent.document.getElementsByName(window.name); if ($3.length === 1) { const $4 = $3[0]; if ($4.tagName === 'FRAME' && $4.parentElement.tagName === 'FRAMESET') { let $5 = $4; while (true) { if ($5.parentElement.tagName !== 'FRAMESET') { $2 = true; break; } if ($5.parentElement.attributes['rows'] !== undefined) { const $6 = $5.parentElement.children; if ($5 === $6[$6.length - 1]) { $5 = $5.parentElement; continue; } else { break; } } else if ($5.parentElement.attributes['cols'] !== undefined) { const $7 = Array.from($5.parentElement.children); const $8 = $7.indexOf($5); if ($8 === -1) { break; } const $9 = $5.parentElement.attributes['cols'].value.split(','); const $10 = $9.map((s) => parseInt(s.trim())); if ($9[$8].trim() === '*' || $10[$8] === Math.max.apply(null, $10)) { $5 = $5.parentElement; continue; } else { break; } } else { break; } } } } } if (!$2) { $1.style['display'] = 'none'; } } const $11 = $1.getBoundingClientRect(); const $12 = ($11.y < window.innerHeight - $11.height); if ($12) { $1.style['position'] = 'fixed'; $1.style['bottom'] = '0'; $1.style['left'] = '0'; $1.style['right'] = '0'; $1.style['z-index'] = '9999'; } const $13 = ( document.body.getBoundingClientRect().height < $11.height * 2 ); if ($13) { $1.style['display'] = 'none'; }
});</script></a></body>
</html>
