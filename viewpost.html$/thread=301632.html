
<!DOCTYPE html>

<html>
<head><meta content="noindex,nofollow" name="robots"/>
<title>What's new in plac 0.7</title>
<meta charset="utf-8"/>
<meta content="Michele Simionato" name="author">
<link href="../_/https/www.artima.com/artima.css" rel="stylesheet" type="text/css"/>
<link href="../_/https/www.artima.com/favicon.ico" rel="shortcut icon"/>
</meta></head>
<body><table cellspacing="0" width="100%">
<tr>
<td align="left" valign="bottom">
<a href="../_/https/www.artima.com/index.html"><img alt="The Artima Developer Community" border="0" height="43" src="../_/https/www.artima.com/images/a7.gif" width="550"/></a>
</td>
</tr></table>
<table bgcolor="#333333" width="100%">
<tr>
<td align="center">
<div class="ml">
<a class="hl" href="../_/https/www.artima.com/articles/index.html">Articles</a> |
<a class="hl" href="../_/https/www.artima.com/news/index.html">News</a> |
<a class="hl" href="../index.html">Weblogs</a> |
<a class="hl" href="../_/https/www.artima.com/shop/catalog/index.html">Books</a> |
<a class="hl" href="../_/https/www.artima.com/forums/index.html">Forums</a>
</div>
</td>
</tr>
</table>
<table bgcolor="#CCCCCC" width="100%">
<tr>
<td align="center">
<div class="sc">
<a href="../index.html">Artima Weblogs</a> | 

<a href="../index.html$/blogger=micheles.html">Michele Simionato's Weblog</a> | 

<a href="../_/https/www.artima.com/forums/flat.html$/forum=106&amp;thread=301632.html">Discuss</a> | 
<a href="mailto:?subject=What's new in plac 0.7&amp;body= %0AArtima Weblogs %0AWhat's new in plac 0.7 %0Aby Michele Simionato %0A%0Ahttps://www.artima.com/weblogs/viewpost.jsp?thread=301632">Email</a> | 
<a href="../viewpostP.html$/thread=301632.html">Print</a> | 
<a href="../bloggers.html">Bloggers</a> | 
<a class="sl" href="thread=299551.html" title="Threads, processes and concurrency in Python: some thoughts">Previous</a> | 
Next
</div>
</td>
</tr>
</table>
<table bgcolor="#EEEEEE" width="100%">
<tr>
<td align="center">
<div class="sc">
<span style="color: #555555;">Sponsored Link</span> <span style="color: #888888;">•</span>
<script language="JavaScript" src="../_/https/www.artima.com/zcr/adx.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
   if (!document.phpAds_used) document.phpAds_used = ',';
   phpAds_random = new String (Math.random()); phpAds_random = phpAds_random.substring(2,11);
   
   document.write ("<" + "script language='JavaScript' type='text/javascript' src='");
   document.write ("../_/https/www.artima.com/zcr/adjs.html$/n=.html" + phpAds_random);
   document.write ("&amp;what=zone:9&amp;target=_top");   document.write ("&amp;exclude=" + document.phpAds_used);
   if (document.referrer)
      document.write ("&amp;referer=" + escape(document.referrer));
   document.write ("'><" + "/script>");
//-->
</script><noscript><a href="../_/https/www.artima.com/zcr/adclick.html$/n=a799ecf6.html" target="_top"><img alt="" border="0" src="../_/https/www.artima.com/zcr/adview.html$/what=zone:9&amp;n=a0587811.html"/></a></noscript>
</div>
</td>
</tr>
</table>
<br/>
<div class="vegies">
<div class="tc">
<span class="sts">The Explorer</span><br>
<span class="ts">What's new in plac 0.7</span><br/>
<span class="as">by Michele Simionato</span><br/>
<span class="pd">September 4, 2010</span><br/>
</br></div>
<blockquote>
<b>Summary</b><br/>
plac is much more than a command-line arguments parser. You can use it to implement interactive interpreters (both on a local machine on a remote server) as well as batch interpreters. It features a doctest-like mode, the ability to launch commands in parallel, and more. And it is easy to use too!

</blockquote>
<hr align="left" width="90%"/>
<table align="right">
<tr>
<td>
<div class="adnotice">
Advertisement
</div>
<center>
<script language="JavaScript" src="../_/https/www.artima.com/zcr/adx.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
if (!document.phpAds_used) document.phpAds_used = ',';
phpAds_random = new String (Math.random()); phpAds_random = phpAds_random.substring(2,11);
document.write ("<" + "script language='JavaScript' type='text/javascript' src='");
document.write ("../_/https/www.artima.com/zcr/adjs.html$/n=.html" + phpAds_random);
document.write ("&amp;what=zone:2");
document.write ("&amp;exclude=" + document.phpAds_used);
if (document.referrer)
document.write ("&amp;referer=" + escape(document.referrer));
document.write ("'><" + "/script>");
//-->
</script><noscript><a href="../_/https/www.artima.com/zcr/adclick.html$/n=a74ab060.html" target="_blank"><img alt="" border="0" src="../_/https/www.artima.com/zcr/adview.html$/what=zone:2&amp;n=a74ab060.html"/></a></noscript>
</center>
</td>
</tr>
</table>
<p>
<div class="section">
<h1><a id="plac-current-status" name="plac-current-status">plac current status</a></h1>
<p>I have just released version 0.7.4 of <a class="reference" href="../_/http/pypi.python.org/pypi/plac/index.html">plac</a>. The tool has grown
considerably in its three months of life, both in size - now it is over a
thousand lines of code - and capabilities. The core is still two
hundred lines long, and the basic usage of <a class="reference" href="../_/http/pypi.python.org/pypi/plac/index.html">plac</a> as a command-line arguments
parser can still be explained in 10 minutes, but there is <em>much</em>
more now.</p>
<p>Judging from the downloads, I have a couple hundred of potential users.
Since I have got a few people sending me emails with questions
and/or feedback, I assume I have at least a few real users ;)
I suspect most people use <a class="reference" href="../_/http/pypi.python.org/pypi/plac/index.html">plac</a> simply as a command-line
argument parser. There is nothing wrong with that,
it is its intended usage after all: in release 0.7 I have even
improved its capabilities in such sense. Still, I would like to
encourage people to start using the full capabilities of <a class="reference" href="../_/http/pypi.python.org/pypi/plac/index.html">plac</a>.</p>
<p>Officially <a class="reference" href="../_/http/pypi.python.org/pypi/plac/index.html">plac</a> is still in alpha status, i.e. I do not guarantee
backward compatibility between releases. In practice, the basic API
for parsing the command-line arguments (<tt class="docutils literal"><span class="pre">plac.call(callable,</span>
<span class="pre">arglist)</span></tt>) has stayed unchanged from the beginning and it will never
change. Possibly, some optional arguments may be added or may change,
but not the basic API. Actually in its three months of life <a class="reference" href="../_/http/pypi.python.org/pypi/plac/index.html">plac</a> has
seen only minor incompatible changes, on non fundamental features or
experimental features. So, while formally <a class="reference" href="../_/http/pypi.python.org/pypi/plac/index.html">plac</a> is in alpha status, in
practice you can pretty much rely on its basic features. Apparently
they work fine too, since I never had any bug report. In other terms,
there is no excuse not use <a class="reference" href="../_/http/pypi.python.org/pypi/plac/index.html">plac</a>, even if it is a still young project ;)</p>
</div>
<div class="section">
<h1><a id="the-support-for-subcommands-has-improved" name="the-support-for-subcommands-has-improved">The support for subcommands has improved</a></h1>
<p><a class="reference" href="../_/http/argparse.googlecode.com/index.html">argparse</a> - the library underlying <a class="reference" href="../_/http/pypi.python.org/pypi/plac/index.html">plac</a> - has <a class="reference" href="../_/http/docs.python.org/library/argparse.html#sub-commands">support for
subcommands</a>, but writing a parser with subcommands is not as simple
as it could be. <a class="reference" href="../_/http/pypi.python.org/pypi/plac/index.html">plac</a> makes it trivial thanks to the
<tt class="docutils literal"><span class="pre">Interpreter.call</span></tt> classmethod (new in release 0.7). For instance,
here is how you could implement a SVN-like tool with two commands
<tt class="docutils literal"><span class="pre">checkout</span></tt> and <tt class="docutils literal"><span class="pre">commit</span></tt>. The trick is to write a class with two
methods <tt class="docutils literal"><span class="pre">checkout</span></tt> and <tt class="docutils literal"><span class="pre">commit</span></tt> and an attribute <tt class="docutils literal"><span class="pre">.commands</span></tt>
listing them, and to call the class with <tt class="docutils literal"><span class="pre">plac.Interpreter.call</span></tt>:</p>
<pre class="literal-block">
$ cat vcs.py
class VCS(object):
    "A fictitious version control tool"
    commands = ['checkout', 'commit']
    def checkout(self, url):
        return 'ok'
    def commit(self):
        return 'ok'

if __name__ == '__main__':
    import plac; plac.Interpreter.call(VCS)
</pre>
<p>The line <tt class="docutils literal"><span class="pre">plac.Interpreter.call</span></tt> instantiates the <tt class="docutils literal"><span class="pre">VCS</span></tt> class by
passing to it the arguments in the command line and then calls the
appropriate method.</p>
<p>You can use the script as follows:</p>
<pre class="literal-block">
$ python vcs.py -h
usage: vcs.py [-h] [args [args ...]]

positional arguments:
  args

optional arguments:
  -h, --help  show this help message and exit

$ python vcs.py checkout url
ok
$ python vcs.py commit
ok
</pre>
<p><a class="reference" href="../_/http/pypi.python.org/pypi/plac/index.html">plac</a> takes care of parsing the command line, giving the correct error
message if you pass wrong arguments or not enough arguments:</p>
<pre class="literal-block">
$ python vcs.py checkout
usage:  checkout url
 checkout: error: too few arguments
</pre>
<p>You should realize that there is no real difference between a
command-line argument parser featuring subcommands and an command
interpreter, therefore the previous script also works as an
interactive interpreter:</p>
<pre class="literal-block">
$ python vcs.py -i
i&gt; .help

special commands
================
.help  .last_tb

custom commands
===============
checkout  commit

i&gt; checkout url
ok
i&gt; commit
ok
</pre>
<p>There is full help support, i.e. you can ask for <tt class="docutils literal"><span class="pre">.help</span> <span class="pre">&lt;command&gt;</span></tt>
for any command, including the special ones such as <tt class="docutils literal"><span class="pre">.help</span></tt> and <tt class="docutils literal"><span class="pre">.last_tb</span></tt>.
There is full support for autocompletion and command history too, provided
you have the readline library installed (on Unices) or the <a class="reference" href="../_/http/ipython.scipy.org/moin/PyReadline/Intro/index.html">pyreadline</a>
library (on Windows).</p>
<p><a class="reference" href="../_/http/pypi.python.org/pypi/plac/index.html">plac</a> also support a batch mode; you can write a set of commands on
a file and have them executed by the plac runner:</p>
<pre class="literal-block">
$ echo vcs-commands.plac
#!vcs.py:VCS
checkout url
# nontrivial commands here
commit

$ plac_runner.py --batch vcs-commands.plac
ok
skip #&lt;lines with comments are skipped&gt;
ok
</pre>
<p>Notice the shebang line (<tt class="docutils literal"><span class="pre">#!vcs.py:VCS</span></tt>) which specifies
the name of the file where the interpreter is defined and the name of
the plac factory to use (in this case it is the class <tt class="docutils literal"><span class="pre">VCS</span></tt>).</p>
<p>There is also a doctest mode to check that the execution returns
the expected output; for an explanation, you should check out the <a class="reference" href="../_/http/micheles.googlecode.com/hg/plac/doc/plac.html">full
documentation</a> of <a class="reference" href="../_/http/pypi.python.org/pypi/plac/index.html">plac</a>.</p>
</div>
<div class="section">
<h1><a id="there-is-a-plac-server-now" name="there-is-a-plac-server-now">There is a plac server now</a></h1>
<p>Perhaps you have thought in the past that it would be nice if <a class="reference" href="../_/http/pypi.python.org/pypi/plac/index.html">plac</a>
could execute commands on a remote machine: the good news is that
starting for release 0.7 it can.</p>
<p>The trick is to start the plac interpreter in server mode: then any
client can connect to the server. Here is an example working on localhost:</p>
<pre class="literal-block">
# plac_runner --serve 2199 vcs.py:VCS
$ telnet localhost 2199
Trying ::1...
Trying 127.0.0.1...
Connected to localhost.
Escape character is '^]'.
i&gt; checkout url
ok
i&gt; EOF
Connection closed by foreign host.
</pre>
<p>It also works on a real remote host, if you use a port which is not
firewalled. Notice that the plac server is in an early stage of
development, so for the moment is does not support any
authentication/authorization feature, nor any kind of security (that
mean that it should be used on a protected LAN). Also, in order to
avoid dependencies, it is implemented on top of the asyncore/asynchat
modules in the standard library. Nothing stops you for implementing a
better server using Twisted or any other technology, anyway: after
all, implementing a line-oriented protocol is pretty trivial.
Finally, at the moment there is no plac client: you can use telnet,
but that means loosing the autocompletion features. There is still
room for improvement there (patches are welcome!).</p>
</div>
<div class="section">
<h1><a id="parallel-programming-with-plac" name="parallel-programming-with-plac">Parallel programming with plac</a></h1>
<p><a class="reference" href="../_/http/pypi.python.org/pypi/plac/index.html">plac</a> was not born as a tool for parallel programming and you should
not expect too much from it in that area; still, it has
some support to running commands in background, and it can be
used to solve simple parallel tasks.
Let me give a real life use case which happened to me a few weeks
ago. I needed to perform a rather long query on our production
database and on our testing database and to compare the results.
The two databases are on two different machines and in order to
compare the results the best way is to save the query results
in a local database, say in two tables 'prod' and 'test': then
one can compare the two tables with ease. In the past I have always
solved such problem sequentially, by performing the two queries one
after the other. One query takes nearly 5 minutes to run, so I had
to wait 10 minutes to compare the results. However, this is a perfectly
parallel job and since I had <a class="reference" href="../_/http/pypi.python.org/pypi/plac/index.html">plac</a> at my disposal I decided to use
it to perform the queries together and to halve my waiting time.
To this aim <a class="reference" href="../_/http/pypi.python.org/pypi/plac/index.html">plac</a> provides
an utility function <tt class="docutils literal"><span class="pre">plac.runp(genseq,</span> <span class="pre">mode='p',</span> <span class="pre">start=True)</span></tt>
which takes a sequence of generators and executes them in parallel,
by using processes if <tt class="docutils literal"><span class="pre">mode='p'</span></tt> or threads if <tt class="docutils literal"><span class="pre">mode='t'</span></tt>.
The functions returns a list of task objects; each task object has
a <tt class="docutils literal"><span class="pre">.result</span></tt> property which returs the result of the task, i.e.
the last yielded value. Then the problem was solved with code like
the following:</p>
<pre class="literal-block">
def run_query_and_save(sourcedb, targetdb):
    output = run_query(sourcedv)
    save(output, targetdb)
    yield 'saved %d rows on %s' % (len(output), targetdb)

tasks = plac.runp(run_query_and_save(prod_db, localdb_prod),
                  run_query_and_save(test_db, localdb_test))
for t in tasks:
    print r.result
</pre>
<p>You can look at <a class="reference" href="../_/http/pypi.python.org/pypi/plac/index.html">plac</a> documentation for more details about
task objects. The <tt class="docutils literal"><span class="pre">.result</span></tt> property was inspired by the concept
of <a class="reference" href="../_/http/www.python.org/dev/peps/pep-3148/index.html">futures</a>: it blocks the main thread until the running task has
finished its job.</p>
</div>
<div class="section">
<h1><a id="plac-future" name="plac-future">plac future</a></h1>
<p>Speaking of futures, it is time to ask myself and my users where we want
to go from here.</p>
<p>First of all I would like to reorganize the documentation, since now it
has become quite large (around 45 pages in PDF form).</p>
<p>Then there is the long standing issue of multiline support: I would
like to extend plac to support commands spanning multiple lines.  The
problem is that Python readline module does not expose the multiline
support of the underline C-level readline module so that I cannot use
such futures; moreover, I am also limited by the capabilities of
<a class="reference" href="../_/http/ipython.scipy.org/moin/PyReadline/Intro/index.html">pyreadline</a> on Windows.</p>
<p>Multiple line commands are best entered in an editor anyway, so I
would like to support some integration between <a class="reference" href="../_/http/pypi.python.org/pypi/plac/index.html">plac</a> and at least
Emacs, which is the editor I use. In other words, it should be
possible to run plac scripts in an inferior mode inside Emacs. Some
help from Emacs experts would be welcome on that idea.</p>
<p>Other unplanned features may enter in <a class="reference" href="../_/http/pypi.python.org/pypi/plac/index.html">plac</a> as I see the need for them
in my day-to-day work: for instance <tt class="docutils literal"><span class="pre">plac.Interpreter.call</span></tt> was not
designed in advance, but it emerged from my practical needs.</p>
<p>What do you think? What users want for plac? Speak your mind, I am here
to hear from you!</p>
</div>
<h1>Talk Back!</h1>
<p>
Have an opinion?


Be the first to

<a href="../_/https/www.artima.com/forums/post.html$/forum=106&amp;thread=301632&amp;reply=true.html">post a comment</a> about
this weblog entry.


<h1>RSS Feed</h1>
<p>
If you'd like to be notified whenever Michele Simionato adds a new entry to <a href="../index.html$/blogger=micheles.html">his weblog</a>, subscribe to his <a href="../feeds/bloggers/micheles.rss">RSS feed</a>.

<center>
<div class="sociallinks">
<a href="../_/http/digg.com/submit$/phase=2&amp;url=http%3A%2F%2Fwww.artima.com%2Fweblogs%2Fviewpost.jsp%3Fthread%3D301632&amp;title=What%27s+new+in+plac+0.7&amp;bodytext=plac+is+much+more+than+a+command-line+arguments+parser.+You+can+use+it+to+implement+interactive+interpreters+%28both+on+a+local+machine+on+a+remote+server%29+as+well+as+batch+interpreters.+It+features+a+doctest-like+mode%2C+the+ability+to+launch+commands+in+_&amp;topic=programming">
<img alt="Digg" border="0" height="14" hspace="8" src="../_/https/www.artima.com/images/digg.gif" width="16">Digg
  </img></a>
  |
  <a href="../_/http/del.icio.us/post$/url=http%3A%2F%2Fwww.artima.com%2Fweblogs%2Fviewpost.jsp%3Fthread%3D301632&amp;title=What%27s+new+in+plac+0.7">
<img alt="del.icio.us" border="0" height="16" hspace="8" src="../_/https/www.artima.com/images/delicious.gif" vspace="1" width="16">del.icio.us
  </img></a>
  |
  <a href="../_/http/programming.reddit.com/submit$/url=http%3A%2F%2Fwww.artima.com%2Fweblogs%2Fviewpost.jsp%3Fthread%3D301632&amp;title=What%27s+new+in+plac+0.7">
<img alt="Reddit" border="0" height="18" hspace="8" src="../_/https/www.artima.com/images/reddit.gif" width="18"/>Reddit
  </a>
</div>
</center>
<h1>About the Blogger</h1>
<p>
<table><tr valign="bottom"><td><img align="right" src="../_/https/www.artima.com/images/micheleSimionato.jpg"/></td><td>Michele Simionato started his career as a Theoretical Physicist, working in Italy, France and the U.S. He turned to programming in 2003; since then he has been working professionally as a Python developer and now he lives in Milan, Italy. Michele is well known in the Python community for his posts in the newsgroup(s), his articles and his Open Source libraries and recipes. His interests include object oriented programming, functional programming, and in general programming metodologies that enable us to manage the complexity of modern software developement.</td></tr></table><p>
<div class="sp">This weblog entry is Copyright © 2010 Michele Simionato. All rights reserved.</div>
</p></p></p></p></p></div>

<hr width="100%">
<table align="center" width="50%">
<tr>
<td>
<div class="horizontaltextadbox">
<div class="adheadline">Sponsored Links</div>
<div id="sponsoredlinks">
</div>
</div>
</td>
</tr>
</table>
<hr width="100%"/>
<center>
<script type="text/javascript"><!--
google_ad_client = "pub-3911176865765226";
google_alternate_color = "ffffff";
google_ad_width = 728;
google_ad_height = 15;
google_ad_format = "728x15_0ads_al";
google_ad_channel = "";
google_color_border = "ffffff";
google_color_bg = "FFFFFF";
google_color_link = "003090";
google_color_text = "000000";
google_color_url = "666666";
//--></script>
<script src="../_/https/pagead2.googlesyndication.com/pagead/show_ads.js" type="text/javascript">
</script>
<br>
<br/>
<!-- SiteSearch Google -->
<form action="../_/https/www.google.com/custom/index.html" method="get">
<table bgcolor="#ffffff" border="0">
<tr><td align="left" height="32" nowrap="nowrap" valign="top">
<a href="../_/https/www.google.com/index.html">
<img alt="Google" border="0" src="../_/https/www.google.com/logos/Logo_25wht.gif"/></a>
</td>
<td nowrap="nowrap">
<input name="domains" type="hidden" value="Artima.com"/>
<input maxlength="255" name="q" size="31" type="text" value=""/>
<input name="sa" type="submit" value="Search"/>
</td></tr>
<tr>
<td> </td>
<td nowrap="nowrap">
<font color="#000000" size="-1">
<input name="sitesearch" type="radio" value=""/> Web
<input checked="checked" name="sitesearch" type="radio" value="Artima.com"/>Artima.com
</font>  
<input name="client" type="hidden" value="pub-3911176865765226"/>
<input name="forid" type="hidden" value="1"/>
<input name="ie" type="hidden" value="ISO-8859-1"/>
<input name="oe" type="hidden" value="ISO-8859-1"/>
<input name="cof" type="hidden" value="GALT:#008000;GL:1;DIV:#336699;VLC:663399;AH:center;BGC:FFFFFF;LBGC:FFFFFF;ALC:0000FF;LC:0000FF;T:000000;GFNT:0000FF;GIMP:0000FF;LH:50;LW:150;L:https://www.artima.com/images/artima150.gif;S:https://www.artima.com;FORID:1;"/>
<input name="hl" type="hidden" value="en"/>
</td></tr></table>
</form>
<!-- SiteSearch Google -->
</br></center>
<br/>
<div class="sp">
<div style="text-align: center;">
<a href="../_/https/www.artima.com/copyright.html">Copyright</a> © 1996-2019 Artima, Inc. All Rights Reserved. - <a href="../_/https/www.artima.com/privacy.html">Privacy Policy</a> - <a href="../_/https/www.artima.com/termsofuse.html">Terms of Use</a>
</div>
</div>
<br/>
<script language="JavaScript" type="text/javascript">
<!--
function initBannerVarForZone(zone) {
        initBannerVarForZoneWithScript(zone, 'adjs_modified');
}

function initBannerVarForZoneWithScript(zone, phpScript) {

        if (!document.phpAds_used) document.phpAds_used = ',';
        phpAds_random = new String (Math.random());
        phpAds_random = phpAds_random.substring(2,11);

        var nextScriptSrc = '../_/https/www.artima.com/zcr/index.html' + phpScript + '.php?n=' +
                phpAds_random  +
                '&amp;what=zone:' + zone + '&amp;target=_top&amp;block=1&amp;blockcampaign=1' +
                '&amp;exclude=' + document.phpAds_used;

        document.write("<script language='JavaScript' type='text/javascript' src='");
        document.write(nextScriptSrc);
        document.write("'><\/script>");

}

function replaceDiv(divID) {
        document.getElementById(divID).innerHTML = phpadsbanner;
}
-->
</script>
<script language="JavaScript" type="text/javascript">
<!--
initBannerVarForZone(3);
-->
</script>
<script language="JavaScript" type="text/javascript">
<!--
replaceDiv('leftskyscraper');
-->
</script>
<script language="JavaScript" type="text/javascript">
<!--
initBannerVarForZoneWithScript(4, 'textman');
-->
</script>
<script language="JavaScript" type="text/javascript">
<!--
replaceDiv('sponsoredlinks');
-->
</script>
</hr><a href="https://dafoster.net/projects/crystal-web-archiver/" id="cr-footer-banner" style="border-top: 2px #B40010 solid;background: #FFFAE1;font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;font-variant: initial;font-weight: initial;text-transform: none;font-size: 14px;color: #6c757d;line-height: 2.0;cursor: pointer;display: flex;align-items: center;justify-content: center;gap: 4px;clear: both;" target="_blank"><img height="24" onerror="this.style['display'] = 'none';" src="../_/crystal/resources/appicon.png" width="24"/><span>This page was archived with Crystal</span><script>window.addEventListener('load', function() { const $1 = document.querySelector('#cr-footer-banner'); if (!$1) { return; } if (window !== window.top) { let $2 = false; if (window.name) { const $3 = window.parent.document.getElementsByName(window.name); if ($3.length === 1) { const $4 = $3[0]; if ($4.tagName === 'FRAME' && $4.parentElement.tagName === 'FRAMESET') { let $5 = $4; while (true) { if ($5.parentElement.tagName !== 'FRAMESET') { $2 = true; break; } if ($5.parentElement.attributes['rows'] !== undefined) { const $6 = $5.parentElement.children; if ($5 === $6[$6.length - 1]) { $5 = $5.parentElement; continue; } else { break; } } else if ($5.parentElement.attributes['cols'] !== undefined) { const $7 = Array.from($5.parentElement.children); const $8 = $7.indexOf($5); if ($8 === -1) { break; } const $9 = $5.parentElement.attributes['cols'].value.split(','); const $10 = $9.map((s) => parseInt(s.trim())); if ($9[$8].trim() === '*' || $10[$8] === Math.max.apply(null, $10)) { $5 = $5.parentElement; continue; } else { break; } } else { break; } } } } } if (!$2) { $1.style['display'] = 'none'; } } const $11 = $1.getBoundingClientRect(); const $12 = ($11.y < window.innerHeight - $11.height); if ($12) { $1.style['position'] = 'fixed'; $1.style['bottom'] = '0'; $1.style['left'] = '0'; $1.style['right'] = '0'; $1.style['z-index'] = '9999'; } const $13 = ( document.body.getBoundingClientRect().height < $11.height * 2 ); if ($13) { $1.style['display'] = 'none'; }
});</script></a></body>
</html>
