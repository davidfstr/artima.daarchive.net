
<!DOCTYPE html>

<html>
<head><meta content="noindex,nofollow" name="robots"/>
<title>What Good is a Tree When All You Have is a Computer?</title>
<meta charset="utf-8"/>
<meta content="Gregg Wonderly" name="author">
<link href="../_/https/www.artima.com/artima.css" rel="stylesheet" type="text/css"/>
<link href="../_/https/www.artima.com/favicon.ico" rel="shortcut icon"/>
</meta></head>
<body><table cellspacing="0" width="100%">
<tr>
<td align="left" valign="bottom">
<a href="../_/https/www.artima.com/index.html"><img alt="The Artima Developer Community" border="0" height="43" src="../_/https/www.artima.com/images/a7.gif" width="550"/></a>
</td>
</tr></table>
<table bgcolor="#333333" width="100%">
<tr>
<td align="center">
<div class="ml">
<a class="hl" href="../_/https/www.artima.com/articles/index.html">Articles</a> |
<a class="hl" href="../_/https/www.artima.com/news/index.html">News</a> |
<a class="hl" href="../index.html">Weblogs</a> |
<a class="hl" href="../_/https/www.artima.com/shop/catalog/index.html">Books</a> |
<a class="hl" href="../_/https/www.artima.com/forums/index.html">Forums</a>
</div>
</td>
</tr>
</table>
<table bgcolor="#FFCC99" width="100%">
<tr>
<td align="center">
<div class="sc">
<a href="../index.html">Artima Weblogs</a> | 

<a href="../index.html$/blogger=greggwon.html">Gregg Wonderly's Weblog</a> | 

<a href="../_/https/www.artima.com/forums/flat.html$/forum=106&amp;thread=4350.html">Discuss</a> | 
<a href="mailto:?subject=What Good is a Tree When All You Have is a Computer?&amp;body= %0AArtima Weblogs %0AWhat Good is a Tree When All You Have is a Computer? %0Aby Gregg Wonderly %0A%0Ahttps://www.artima.com/weblogs/viewpost.jsp?thread=4350">Email</a> | 
<a href="../viewpostP.html$/thread=4350.html">Print</a> | 
<a href="../bloggers.html">Bloggers</a> | 
<a class="sl" href="thread=4349.html" title="Investing in C and Unix">Previous</a> | 
<a class="sl" href="thread=4352.html" title="Is a Broken API a Good Investment?">Next</a>
</div>
</td>
</tr>
</table>
<table bgcolor="#EEEEEE" width="100%">
<tr>
<td align="center">
<div class="sc">
<span style="color: #555555;">Sponsored Link</span> <span style="color: #888888;">•</span>
<script language="JavaScript" src="../_/https/www.artima.com/zcr/adx.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
   if (!document.phpAds_used) document.phpAds_used = ',';
   phpAds_random = new String (Math.random()); phpAds_random = phpAds_random.substring(2,11);
   
   document.write ("<" + "script language='JavaScript' type='text/javascript' src='");
   document.write ("../_/https/www.artima.com/zcr/adjs.html$/n=.html" + phpAds_random);
   document.write ("&amp;what=zone:9&amp;target=_top");   document.write ("&amp;exclude=" + document.phpAds_used);
   if (document.referrer)
      document.write ("&amp;referer=" + escape(document.referrer));
   document.write ("'><" + "/script>");
//-->
</script><noscript><a href="../_/https/www.artima.com/zcr/adclick.html$/n=a799ecf6.html" target="_top"><img alt="" border="0" src="../_/https/www.artima.com/zcr/adview.html$/what=zone:9&amp;n=a0587811.html"/></a></noscript>
</div>
</td>
</tr>
</table>
<br/>
<div class="vegies">
<div class="tc">
<span class="sts">Software and Return on Investment</span><br>
<span class="ts">What Good is a Tree When All You Have is a Computer?</span><br/>
<span class="as">by Gregg Wonderly</span><br/>
<span class="pd">April 7, 2003</span><br/>
</br></div>
<blockquote>
<b>Summary</b><br/>
Back on Aug 8th, 1988, I started my first day at the AT&amp;T Bell labs facilities in Naperville IL.  When you first walk into a really large facility like that, you are overwhelmed by the size.  There were so many people there, and so many things going on, like...

</blockquote>
<hr align="left" width="90%"/>
<table align="right">
<tr>
<td>
<div class="adnotice">
Advertisement
</div>
<center>
<script language="JavaScript" src="../_/https/www.artima.com/zcr/adx.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
if (!document.phpAds_used) document.phpAds_used = ',';
phpAds_random = new String (Math.random()); phpAds_random = phpAds_random.substring(2,11);
document.write ("<" + "script language='JavaScript' type='text/javascript' src='");
document.write ("../_/https/www.artima.com/zcr/adjs.html$/n=.html" + phpAds_random);
document.write ("&amp;what=zone:2");
document.write ("&amp;exclude=" + document.phpAds_used);
if (document.referrer)
document.write ("&amp;referer=" + escape(document.referrer));
document.write ("'><" + "/script>");
//-->
</script><noscript><a href="../_/https/www.artima.com/zcr/adclick.html$/n=a74ab060.html" target="_blank"><img alt="" border="0" src="../_/https/www.artima.com/zcr/adview.html$/what=zone:2&amp;n=a74ab060.html"/></a></noscript>
</center>
</td>
</tr>
</table>
<p>
<p>The Naperville Complex in 1988 was home to 5ESS hardware design, UNIX RTR development, the Teletype group, responsible for the DMD5620, 630 and later 730 and 730r2 terminals, Domestic Market (US) 5ESS software development and International Markets (China, Taiwan, UK and Netherlands in 1988 time frame).  Across the street in Wheaton was the customer support center with the ODA group, domestic 5ESS labs, the commercial demonstration lab, etc.  In total, there were about 11,000 people working in that complete complex.  The 5ESS development buildings were located in the Indian Hill complex.  There was IH-Indian Hill Main, IX-Indian Hill South, IW-Indian Hill West, and IHP-Indian Hill Park (about 1 mile away).  The NSC-Network Software Center was the name given to the customer support center across the street in Wheaton (to the east across Naperville road).  Today, the outside of these facilities resemble the pictures at <a href="../_/http/www.theaustin.com/html/nr-rbi-lucent.html"> http://www.theaustin.com/html/nr-rbi-lucent.html</a>.  Behind each of these modern structures, are the old structures which are much larger than these!

<p>I spent 9 1/2 years at these facilities.  I worked in the Software Release Retrofit group the whole time.  I experienced ISO-9000 registration and validation exercises.  We had extensive diversity training which was a great necessity in such a large place with such a diverse group of people.  I learned things about myself and our societies that were quite alarming.

<h1>The Retrofit Software...Problems</h1>
<p>When it came to software, I continued my facination with tools and productivity enhancements.  The 5ESS Software Retrofit procedure was implemented using 4 layers of process structure.  The RTR layer of C-Programs called the 5ESS layer of C-Programs which did some things to the 5ESS hardware.  But, if we needed to do something to the RTR environment dealing with files or directories of files, we'd invoke shellscripts that would then run various UNIX flavor commands such as awk(1), sed(1), cp(1), rm(1) etc.

<p>The problems with this environment were numerous.  First, the shell script were notorious for containing
<pre>
if grep pat file1 | awk '{print $1}' | sed 's/..//' | grep pat2 &gt;/dev/null 2&gt;&amp;1; then
    ...do something...
fi
</pre>
<p>Now, when something went wrong, you had no idea what went wrong, and, if 'grep', or 'awk' or 'sed' complained about arguments or otherwise exited abnormally, the final grep would return an erroneous result, but noone new the better.

<p>So, we developed logging facilities, change things to not redirect I/O etc.  But still, the pipelines caused problems, as did other issues related to problems such as
<pre>
val=`prog | grep foo | sed 's/..//'`
</pre>
where if you don't check the exit codes of everything everywhere, you just can't guarentee anything is right.

<h1>Where Did These People Get Their Training?</h1>
As I was thinking about this issue, I came across some other related problems (training or lack thereof) while reviewing code for other projects (we had rigorous code reviews, and a diversity of inspectors was expected). I saw code such as
<pre>
system("sleep 30");
</pre>
in a C-language program.  The person doing this had never been taught that the shell that they ran had to use 'sleep(3)' to do that sleep and that creating a process to put to sleep was a little bit of an overkill.

<p>In another code review, I saw this code:
<pre>
/* Store string into buffer */
strcpy( buf, "my string");
/* Terminate string */
strncat( buf, "\0" );
</pre>
which was a completely amazing thing to see.  There are two very basic mis-understandings of the core of the C-language string functions visible here.  I just had to wonder how so many blatantly obvious, lack of training issues were getting by these inspections, that seemed to be attended by pretty knowledgable people.

<p>Well, the next example was more elaborate.  Part of the retrofit procedures was a program provided by the RTR group that was the menu control program that managed the steps that were supposed to be executed (5 total).  This process used SIGCLD to catch process terminations, and show that the step had either completed, or failed.  The problem was that it would register SIGCLD handlers, and then leave them in place.  The SIGCLD handler used longjmp to break out of the loop that was being used to show progress updates.  If the progress update found a problem, the code could return without canceling the handler.  When the process finally completed, you got longjmp(2) calls back onto stack frames that were now invalid.  The process would crash, and you had to restart it.

<p>I have no idea how this problem made it through the code inspection phase, let alone the testing phase.  I found it within about 1 hour, and fixed it quickly, and then spent the next 1 year trying to get it pushed back into the RTR load.

<p>Finally, there were numerous examples of poor pointer handling in the C-language portions of the Retrofit code.  There were complex arrays, linked lists, and numbers string buffer overflows that all made it clear to me that something quite different and quite dramatic had to happen.

<h1>Changing Everything Overnight Might Work?</h1>
<p>From my days at OSU, I had the start of a language that was going to be TPU (the VMS text processing utility that I wrote a VI emulator for) for UNIX.  The TPU language has no compile time type checking.  Everything is done at runtime.  This makes for a very easy to create and maintain compiler, but requires a more complex interpreter, since you have to check everything at runtime as many other more dynamic languages do.

<p>I dusted this thing off, and decided that I wanted to create a new process control structure that would invert the control tree of the retrofit software environment.  I wanted to have just two layers.  The control layer, and the work layer.  I wanted to run as few unix commands as possible because fork and exec was slow on the 3B20D (.75 mips! and you only get 1/3 of that max). 

<p>The language I started creating (deriving from some of TPU's control structures), would initially do two things well.  It ran and managed UNIX processes well, with support for asynchronous process execution.  It included support for creating recovery labels in the object stream of the compiled program.  The language then supported recovering execution at one of these labels so that you could resume some complex script at the same place you stopped at last.  This was very important to managing complex procedures.
<p>
The language state control was basically the following:
<pre>
st = loadState("foo.st");
if( st != NOSTATE ) then
    resumeState( st );
endif;

...

st = saveState( "foo.st", "state1", var1, var2, var3 );
if( st == BACKOUT ) then
    ...undo things and exit(0)...
endif;

...

st = saveState( "foo.st", "state2", var2, var4 );
if( st == BACKOUT ) then
    ...undo things and exit(0)...
endif;
</pre>
This let you <b>BACKOUT</b> of a procedure, knowing where you had gotten to and thus, what needed to be undone (if anything).

<p>Late in 1993, I decided that I needed associative arrays to get some of the things that we did in awk(1) to be done in the language.  As I was adding associative arrays, I was also exploring another language, Keynote (now Keykit) by Tim Thompson (www.nosuch.com).  This is a midi event language that lets you develop code and UI that provide a midi composition environment that is very powerful.  At that time, Tim was converting keynote over to objects, and I noticed how he had just reused associative arrays to provide classes.

<p>I got the initial implementation of associative arrays done, and decided that I really should do objects too.  So, I made class definitions just be associative arrays (hashtables) and suddenly, I could do a lot more with the language than previously.
It was clear to me that the investment in Objects was a good one.  My fellow group members were a little bit stressed to have to learn OO, but my supervisor liked the idea that our group was the only one in the 5ESS project using OO at that time :-)

<h1>The Web is Weaved by Objects and Keeps Growing More Trees</h1>
Earlier, I had been swept up with the concepts of web programming.  I had created an TROFF document formatting CGI environment which had made about 10,000 5ESS documents accessible on the intranet inside AT&amp;T (and later Lucent).  I was intimately familar with the whole CGI programming business, and I was also frustrated by having limited control over the format of the documents on screen (we had no &lt;table&gt;, remember?).

<p>My development environment, during this whole time had been a 630 and then a 730R2 terminal.  I was very familiar with downloading code to run applications, and wrote numerous tools for the company employees and myself.  These were distributed through the infamous <b>exptools</b> mechanisms that provided remote building and distribution services that made it easy to build and distribute tools for multiple platforms.

<p>I had an interface to the MH mail system that was a 630 application.  It used the USENIX faces facilities for displaying faces.  I wrote a window manager for the terminal so that you could tile windows away and free their bitmap space for use by other applications.  This was laborous programming, but it was necessary to get a good, productive environment.

<h1>Is There a Tree Growing Here, or Just an Flowery Shrub?</h1>
About the time I got the object stuff working in my language, and was starting the next phase of integration into the Retrofit processes, Java came on scene.  Wow, I was shocked.  Someone had actually had the same experiences, and came to the same sort of decisions that I had about fragile languages and overly complex APIs!  I believe that would have been the fall of 1994.

<p>I picked up Java at that point and just rejoiced!  I had learned a lot of lessons about programming languages, operating systems.  The investment I had made in my life (12 years or so) seemed huge.  Now, I am comming up on the 10th anniversary of the release of Java (next year).  10 years of Java, and it is still expanding and maturing in all directions.

<p>What have you invested in, and where has it taken you?

<h1>Talk Back!</h1>
<p>
Have an opinion?


Be the first to

<a href="../_/https/www.artima.com/forums/post.html$/forum=106&amp;thread=4350&amp;reply=true.html">post a comment</a> about
this weblog entry.


<h1>RSS Feed</h1>
<p>
If you'd like to be notified whenever Gregg Wonderly adds a new entry to <a href="../index.html$/blogger=greggwon.html">his weblog</a>, subscribe to his <a href="../feeds/bloggers/greggwon.rss">RSS feed</a>.

<center>
<div class="sociallinks">
<a href="../_/http/digg.com/submit$/phase=2&amp;url=http%3A%2F%2Fwww.artima.com%2Fweblogs%2Fviewpost.jsp%3Fthread%3D4350&amp;title=What+Good+is+a+Tree+When+All+You+Have+is+a+Computer%3F&amp;bodytext=Back+on+Aug+8th%2C+1988%2C+I+started+my+first+day+at+the+AT%26T+Bell+labs+facilities+in+Naperville+IL.++When+you+first+walk+into+a+really+large+facility+like+that%2C+you+are+overwhelmed+by+the+size.++There+were+so+many+people+there%2C+and+so+many+things+going+_&amp;topic=programming">
<img alt="Digg" border="0" height="14" hspace="8" src="../_/https/www.artima.com/images/digg.gif" width="16">Digg
  </img></a>
  |
  <a href="../_/http/del.icio.us/post$/url=http%3A%2F%2Fwww.artima.com%2Fweblogs%2Fviewpost.jsp%3Fthread%3D4350&amp;title=What+Good+is+a+Tree+When+All+You+Have+is+a+Computer%3F">
<img alt="del.icio.us" border="0" height="16" hspace="8" src="../_/https/www.artima.com/images/delicious.gif" vspace="1" width="16">del.icio.us
  </img></a>
  |
  <a href="../_/http/programming.reddit.com/submit$/url=http%3A%2F%2Fwww.artima.com%2Fweblogs%2Fviewpost.jsp%3Fthread%3D4350&amp;title=What+Good+is+a+Tree+When+All+You+Have+is+a+Computer%3F">
<img alt="Reddit" border="0" height="18" hspace="8" src="../_/https/www.artima.com/images/reddit.gif" width="18"/>Reddit
  </a>
</div>
</center>
<h1>About the Blogger</h1>
<p>
<table><tr valign="bottom"><td><img align="right" src="../_/https/www.artima.com/images/gregg.jpg"/></td><td>Gregg Wonderly graduated from Oklahoma State University in 1988 with an MS in COMSCI.  His areas of concentration include Operating Systems and Languages.  His first job was at the AT&amp;T Bell Labs facilities in Naperville IL working on software retrofit for the 5ESS switch.  He designed a procedure control language in the era of the development of Java with similar motivations that the Oak and then Java language development was driven by.  Language design is still at the top of his list, but his focus tends to be on application languges layered on top of programming languages such as Java.  Some just consider this API design, but there really is more to it!  Gregg now works for Cyte Technologies Inc., where he does software engineering and design related to distributed systems in highly available environments.</td></tr></table><p>
<div class="sp">This weblog entry is Copyright © 2003 Gregg Wonderly. All rights reserved.</div>
</p></p></p></p></p></p></p></p></p></p></p></p></p></p></p></p></p></p></p></p></p></p></p></p></p></div>

<hr width="100%">
<table align="center" width="50%">
<tr>
<td>
<div class="horizontaltextadbox">
<div class="adheadline">Sponsored Links</div>
<div id="sponsoredlinks">
</div>
</div>
</td>
</tr>
</table>
<hr width="100%"/>
<center>
<script type="text/javascript"><!--
google_ad_client = "pub-3911176865765226";
google_alternate_color = "ffffff";
google_ad_width = 728;
google_ad_height = 15;
google_ad_format = "728x15_0ads_al";
google_ad_channel = "";
google_color_border = "ffffff";
google_color_bg = "FFFFFF";
google_color_link = "003090";
google_color_text = "000000";
google_color_url = "666666";
//--></script>
<script src="../_/https/pagead2.googlesyndication.com/pagead/show_ads.js" type="text/javascript">
</script>
<br>
<br/>
<!-- SiteSearch Google -->
<form action="../_/https/www.google.com/custom/index.html" method="get">
<table bgcolor="#ffffff" border="0">
<tr><td align="left" height="32" nowrap="nowrap" valign="top">
<a href="../_/https/www.google.com/index.html">
<img alt="Google" border="0" src="../_/https/www.google.com/logos/Logo_25wht.gif"/></a>
</td>
<td nowrap="nowrap">
<input name="domains" type="hidden" value="Artima.com"/>
<input maxlength="255" name="q" size="31" type="text" value=""/>
<input name="sa" type="submit" value="Search"/>
</td></tr>
<tr>
<td> </td>
<td nowrap="nowrap">
<font color="#000000" size="-1">
<input name="sitesearch" type="radio" value=""/> Web
<input checked="checked" name="sitesearch" type="radio" value="Artima.com"/>Artima.com
</font>  
<input name="client" type="hidden" value="pub-3911176865765226"/>
<input name="forid" type="hidden" value="1"/>
<input name="ie" type="hidden" value="ISO-8859-1"/>
<input name="oe" type="hidden" value="ISO-8859-1"/>
<input name="cof" type="hidden" value="GALT:#008000;GL:1;DIV:#336699;VLC:663399;AH:center;BGC:FFFFFF;LBGC:FFFFFF;ALC:0000FF;LC:0000FF;T:000000;GFNT:0000FF;GIMP:0000FF;LH:50;LW:150;L:https://www.artima.com/images/artima150.gif;S:https://www.artima.com;FORID:1;"/>
<input name="hl" type="hidden" value="en"/>
</td></tr></table>
</form>
<!-- SiteSearch Google -->
</br></center>
<br/>
<div class="sp">
<div style="text-align: center;">
<a href="../_/https/www.artima.com/copyright.html">Copyright</a> © 1996-2019 Artima, Inc. All Rights Reserved. - <a href="../_/https/www.artima.com/privacy.html">Privacy Policy</a> - <a href="../_/https/www.artima.com/termsofuse.html">Terms of Use</a>
</div>
</div>
<br/>
<script language="JavaScript" type="text/javascript">
<!--
function initBannerVarForZone(zone) {
        initBannerVarForZoneWithScript(zone, 'adjs_modified');
}

function initBannerVarForZoneWithScript(zone, phpScript) {

        if (!document.phpAds_used) document.phpAds_used = ',';
        phpAds_random = new String (Math.random());
        phpAds_random = phpAds_random.substring(2,11);

        var nextScriptSrc = '../_/https/www.artima.com/zcr/index.html' + phpScript + '.php?n=' +
                phpAds_random  +
                '&amp;what=zone:' + zone + '&amp;target=_top&amp;block=1&amp;blockcampaign=1' +
                '&amp;exclude=' + document.phpAds_used;

        document.write("<script language='JavaScript' type='text/javascript' src='");
        document.write(nextScriptSrc);
        document.write("'><\/script>");

}

function replaceDiv(divID) {
        document.getElementById(divID).innerHTML = phpadsbanner;
}
-->
</script>
<script language="JavaScript" type="text/javascript">
<!--
initBannerVarForZone(3);
-->
</script>
<script language="JavaScript" type="text/javascript">
<!--
replaceDiv('leftskyscraper');
-->
</script>
<script language="JavaScript" type="text/javascript">
<!--
initBannerVarForZoneWithScript(4, 'textman');
-->
</script>
<script language="JavaScript" type="text/javascript">
<!--
replaceDiv('sponsoredlinks');
-->
</script>
</hr><a href="https://dafoster.net/projects/crystal-web-archiver/" id="cr-footer-banner" style="border-top: 2px #B40010 solid;background: #FFFAE1;font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;font-variant: initial;font-weight: initial;text-transform: none;font-size: 14px;color: #6c757d;line-height: 2.0;cursor: pointer;display: flex;align-items: center;justify-content: center;gap: 4px;clear: both;" target="_blank"><img height="24" onerror="this.style['display'] = 'none';" src="../_/crystal/resources/appicon.png" width="24"/><span>This page was archived with Crystal</span><script>window.addEventListener('load', function() { const $1 = document.querySelector('#cr-footer-banner'); if (!$1) { return; } if (window !== window.top) { let $2 = false; if (window.name) { const $3 = window.parent.document.getElementsByName(window.name); if ($3.length === 1) { const $4 = $3[0]; if ($4.tagName === 'FRAME' && $4.parentElement.tagName === 'FRAMESET') { let $5 = $4; while (true) { if ($5.parentElement.tagName !== 'FRAMESET') { $2 = true; break; } if ($5.parentElement.attributes['rows'] !== undefined) { const $6 = $5.parentElement.children; if ($5 === $6[$6.length - 1]) { $5 = $5.parentElement; continue; } else { break; } } else if ($5.parentElement.attributes['cols'] !== undefined) { const $7 = Array.from($5.parentElement.children); const $8 = $7.indexOf($5); if ($8 === -1) { break; } const $9 = $5.parentElement.attributes['cols'].value.split(','); const $10 = $9.map((s) => parseInt(s.trim())); if ($9[$8].trim() === '*' || $10[$8] === Math.max.apply(null, $10)) { $5 = $5.parentElement; continue; } else { break; } } else { break; } } } } } if (!$2) { $1.style['display'] = 'none'; } } const $11 = $1.getBoundingClientRect(); const $12 = ($11.y < window.innerHeight - $11.height); if ($12) { $1.style['position'] = 'fixed'; $1.style['bottom'] = '0'; $1.style['left'] = '0'; $1.style['right'] = '0'; $1.style['z-index'] = '9999'; } const $13 = ( document.body.getBoundingClientRect().height < $11.height * 2 ); if ($13) { $1.style['display'] = 'none'; }
});</script></a></body>
</html>
