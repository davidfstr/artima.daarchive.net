
<!DOCTYPE html>

<html>
<head><meta content="noindex,nofollow" name="robots"/>
<title>The Sum of Ant</title>
<meta charset="utf-8"/>
<meta content="Ken Arnold" name="author">
<link href="../_/https/www.artima.com/artima.css" rel="stylesheet" type="text/css"/>
<link href="../_/https/www.artima.com/favicon.ico" rel="shortcut icon"/>
</meta></head>
<body><table cellspacing="0" width="100%">
<tr>
<td align="left" valign="bottom">
<a href="../_/https/www.artima.com/index.html"><img alt="The Artima Developer Community" border="0" height="43" src="../_/https/www.artima.com/images/a7.gif" width="550"/></a>
</td>
</tr></table>
<table bgcolor="#333333" width="100%">
<tr>
<td align="center">
<div class="ml">
<a class="hl" href="../_/https/www.artima.com/articles/index.html">Articles</a> |
<a class="hl" href="../_/https/www.artima.com/news/index.html">News</a> |
<a class="hl" href="../index.html">Weblogs</a> |
<a class="hl" href="../_/https/www.artima.com/shop/catalog/index.html">Books</a> |
<a class="hl" href="../_/https/www.artima.com/forums/index.html">Forums</a>
</div>
</td>
</tr>
</table>
<table bgcolor="#CCCCCC" width="100%">
<tr>
<td align="center">
<div class="sc">
<a href="../index.html">Artima Weblogs</a> | 

<a href="../index.html$/blogger=arnold.html">Ken Arnold's Weblog</a> | 

<a href="../_/https/www.artima.com/forums/flat.html$/forum=106&amp;thread=7435.html">Discuss</a> | 
<a href="mailto:?subject=The Sum of Ant&amp;body= %0AArtima Weblogs %0AThe Sum of Ant %0Aby Ken Arnold %0A%0Ahttps://www.artima.com/weblogs/viewpost.jsp?thread=7435">Email</a> | 
<a href="../viewpostP.html$/thread=7435.html">Print</a> | 
<a href="../bloggers.html">Bloggers</a> | 
<a class="sl" href="thread=4788.html" title="Top Notchitude">Previous</a> | 
<a class="sl" href="thread=25543.html" title="Inside Out, or Outside In?">Next</a>
</div>
</td>
</tr>
</table>
<table bgcolor="#EEEEEE" width="100%">
<tr>
<td align="center">
<div class="sc">
<span style="color: #555555;">Sponsored Link</span> <span style="color: #888888;">•</span>
<script language="JavaScript" src="../_/https/www.artima.com/zcr/adx.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
   if (!document.phpAds_used) document.phpAds_used = ',';
   phpAds_random = new String (Math.random()); phpAds_random = phpAds_random.substring(2,11);
   
   document.write ("<" + "script language='JavaScript' type='text/javascript' src='");
   document.write ("../_/https/www.artima.com/zcr/adjs.html$/n=.html" + phpAds_random);
   document.write ("&amp;what=zone:9&amp;target=_top");   document.write ("&amp;exclude=" + document.phpAds_used);
   if (document.referrer)
      document.write ("&amp;referer=" + escape(document.referrer));
   document.write ("'><" + "/script>");
//-->
</script><noscript><a href="../_/https/www.artima.com/zcr/adclick.html$/n=a799ecf6.html" target="_top"><img alt="" border="0" src="../_/https/www.artima.com/zcr/adview.html$/what=zone:9&amp;n=a0587811.html"/></a></noscript>
</div>
</td>
</tr>
</table>
<br/>
<div class="vegies">
<div class="tc">
<span class="sts">Notes from Underfoot</span><br>
<span class="ts">The Sum of Ant</span><br/>
<span class="as">by Ken Arnold</span><br/>
<span class="pd">July 14, 2003</span><br/>
</br></div>
<blockquote>
<b>Summary</b><br/>
...Wherein we examine what ant fundamentally lacks, and
possible ways to address the important problem of build control...

</blockquote>
<hr align="left" width="90%"/>
<table align="right">
<tr>
<td>
<div class="adnotice">
Advertisement
</div>
<center>
<script language="JavaScript" src="../_/https/www.artima.com/zcr/adx.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
if (!document.phpAds_used) document.phpAds_used = ',';
phpAds_random = new String (Math.random()); phpAds_random = phpAds_random.substring(2,11);
document.write ("<" + "script language='JavaScript' type='text/javascript' src='");
document.write ("../_/https/www.artima.com/zcr/adjs.html$/n=.html" + phpAds_random);
document.write ("&amp;what=zone:2");
document.write ("&amp;exclude=" + document.phpAds_used);
if (document.referrer)
document.write ("&amp;referer=" + escape(document.referrer));
document.write ("'><" + "/script>");
//-->
</script><noscript><a href="../_/https/www.artima.com/zcr/adclick.html$/n=a74ab060.html" target="_blank"><img alt="" border="0" src="../_/https/www.artima.com/zcr/adview.html$/what=zone:2&amp;n=a74ab060.html"/></a></noscript>
</center>
</td>
</tr>
</table>
<p>
<p> In a previous blog on <a href="../_/http/weblogs.java.net/pub/wlg/197/index.html">today.java.net</a> I
said some fairly strong things about ant, and I think I ought to
say something more, both good and bad.  This seems like the place
to do it.

<p> First, let us give ant its due.  <a href="../_/http/ant.apache.org/index.html">Ant</a> is designed to be a portable
way to replace make.  Ant was to be platform independent, so the
obvious implementation choice was Java, which is fine, mostly.
And the obvious data format for the project description -- saying
what needs to be built -- was XML, which is <em>not</em> fine, as
we shall see.

<p> Ant performs this task with some power, if little aplomb.  One
can build ant files that will compile Java, C, and many other
languages; perform CVS and FTP tasks; build jar files and EJB
deployments, and so forth.  Ant can run the same configuration
without modification, no matter the platform.  This is no mean
feat. There is a reason why it has been winning many awards.

<p> But when I say it is "with little aplomb", I mean it.  Nobody
can accuse XML of being an easy read, of course, but if that were
ant's worst problem, well, ant is hardly alone in this sin.  XML
abuse is rampant, and ant is far, <em>far</em> from the worst
offender.  Given the limitations of XML syntax, ant does pretty
well.  To see it really suck, try reading <a href="../_/http/www.rdb.com/demo/XML/index.html"> Graydon
Hoare's essay on XML abuse</a>.  (Ignore the odd section headings
and stick to the content.)

<p> The real problem is the one I talked about in my brief <a href="../_/http/weblogs.java.net/pub/wlg/197/index.html">java.net</a> blog:

<blockquote><em> Ant is nothing more than the sum of its parts
</em></blockquote>

By this I mean that ant has not learned the basic power of composition,
building things out smaller parts.  This was the great insight that
our Unix forbearers bequeathed us toolsmiths, and it's pretty sad
to see it forgotten.  In Unix this is done with pipes -- the output
of one program can become the input of another.  Along with
conventions about program output, this allows you to build up
something that is more than the sum of its parts.  A utility that
finds file in the file system can generate a list of files for
<em>any</em> purpose: removal, editing, rebuilding, copying,
printing, ...

<p> Ant has <a href="../_/http/ant.apache.org/manual/tasksoverview.html">many
kinds of tasks</a>.  These are portable because they are written
in Java, and these task implementations can rely upon operating
system abstractions in the underlying ant platform.

<p> But they almost never work together.  There are some common
tools for building up lists of files, but if you want a list of
files from any other source, good luck.  This is why there are two
different tasks (one optional) that calculate list of Java class
dependencies, and they are incompatible.  And if you want a list
of Java class dependencies for a task that one of these two tasks
can't handle, good luck.

<p> A common quote in our biz is the observation that a good software
tool will do things the author never expected<sup><a href="#fn1">1</a></sup>.  I doubt that writers
of ant tasks are very often surprised.

<p> In fact, I will assume that the value of composable tools is
so obvious, I will not belabor it further.  Unless you ask...

<p> My experience is that the primary legibility problem with
Makefiles are strings and variables.  The string operations are
primitive, ugly, and limited.  So to do anything at all interesting
requires cryptic and hobbled work.  After that, the next worst problem
is the lack of flow control.  Loops are put into the shell commands
because make doesn't have loops, or (shudder) people use recursion
as a replacement.  Ugh.

<p> The primary portability problem is obvious: Different system
have different commands, and make just executes commands.

<p> So where would one go to leverage existing tools that already
know how to do these things well?  Scripting languages, of course.
Perl, python/jython, tcl, and so on live, breath, eat, and excrete
strings for a living, and they are programming languages with real
logic.  They are ported to every platform that matters (more than
Java runs on).

<p> All they are missing are tools to express dependencies and how
to apply them to building things.  One of the responses to my post
pointed me at <a href="../_/http/scons.sourceforge.net/index.html">scons,</a>
which does this in Python.   It seems just the right direction,
although I haven't had a chance to do more than play with scons.
I don't claim it <em>is</em> the right answer, but it sure is moving
down the right path.

<p> Jonathan Simon's <a href="../_/http/today.java.net/pub/a/today/2003/06/10/jython.html">
blog entry about how to use ant tasks from jython </a> points
towards some hope that we can reuse all the work these folks put
into ant tasks.  This has often been non-trivial effort, and it
would be good to keep this work viable.

<p> One could pick any language, of course, and choosing a winner
here would antagonize folks who would just prove they could do it
better in the "right" language.  I have my preferred scripting
languages, but compared to scripting in XML itself (which is where
the ant folks seem to be going), no major possibility is worse.

<p> I intend to poke harder at scons, and if it looks good, dive
in fully to find out.  You'll be seeing a blog here about scons
and the lessons to learn from <em>it.</em>
<hr/>
<p> <a name="fn1">[1]</a> Google has failed me.  Can the death of
the internet be far behind?  I cannot find an attribution for this
quote, despite the obvious set of words and the fact that it's a
computer quote that I've heard a billion times.

[Note: URL for Graydon Hoare's XML writeup has been updated; 7/1/2005]

<h1>Talk Back!</h1>
<p>
Have an opinion?


Readers have already posted

<a href="../_/https/www.artima.com/forums/flat.html$/forum=106&amp;thread=7435.html">11

comments</a>
about this weblog entry. Why not

<a href="../_/https/www.artima.com/forums/post.html$/forum=106&amp;thread=7435&amp;reply=true.html">add yours</a>?


<h1>RSS Feed</h1>
<p>
If you'd like to be notified whenever Ken Arnold adds a new entry to <a href="../index.html$/blogger=arnold.html">his weblog</a>, subscribe to his <a href="../feeds/bloggers/arnold.rss">RSS feed</a>.

<center>
<div class="sociallinks">
<a href="../_/http/digg.com/submit$/phase=2&amp;url=http%3A%2F%2Fwww.artima.com%2Fweblogs%2Fviewpost.jsp%3Fthread%3D7435&amp;title=The+Sum+of+Ant&amp;bodytext=_Wherein+we+examine+what+ant+fundamentally+lacks%2C+and%0D%0Apossible+ways+to+address+the+important+problem+of+build+control_&amp;topic=programming">
<img alt="Digg" border="0" height="14" hspace="8" src="../_/https/www.artima.com/images/digg.gif" width="16">Digg
  </img></a>
  |
  <a href="../_/http/del.icio.us/post$/url=http%3A%2F%2Fwww.artima.com%2Fweblogs%2Fviewpost.jsp%3Fthread%3D7435&amp;title=The+Sum+of+Ant">
<img alt="del.icio.us" border="0" height="16" hspace="8" src="../_/https/www.artima.com/images/delicious.gif" vspace="1" width="16">del.icio.us
  </img></a>
  |
  <a href="../_/http/programming.reddit.com/submit$/url=http%3A%2F%2Fwww.artima.com%2Fweblogs%2Fviewpost.jsp%3Fthread%3D7435&amp;title=The+Sum+of+Ant">
<img alt="Reddit" border="0" height="18" hspace="8" src="../_/https/www.artima.com/images/reddit.gif" width="18"/>Reddit
  </a>
</div>
</center>
<h1>About the Blogger</h1>
<p>
<table><tr valign="bottom"><td><img align="right" src="../_/https/www.artima.com/images/kenarnold.jpg"/></td><td>Ken Arnold is a recognized loose cannon in the software business, whose previous fusilades include being an inventor of Jini, designing JavaSpaces, writing books on Java and distributed systems, helping design CORBA 1.0, and (while at Berkeley on the BSD project) the curses library package, co-authoring rogue, and generally enjoying himself.  His interests include designing APIs and programming languages using general principles of human factors design because of his radical hypothesis that programmers are human, and other applications of this same principle to software design, management, and production.</td></tr></table><p>
<div class="sp">This weblog entry is Copyright © 2003 Ken Arnold. All rights reserved.</div>
</p></p></p></p></p></p></p></p></p></p></p></p></p></p></p></p></p></p></p></p></p></p></div>

<hr width="100%">
<table align="center" width="50%">
<tr>
<td>
<div class="horizontaltextadbox">
<div class="adheadline">Sponsored Links</div>
<div id="sponsoredlinks">
</div>
</div>
</td>
</tr>
</table>
<hr width="100%">
<center>
<script type="text/javascript"><!--
google_ad_client = "pub-3911176865765226";
google_alternate_color = "ffffff";
google_ad_width = 728;
google_ad_height = 15;
google_ad_format = "728x15_0ads_al";
google_ad_channel = "";
google_color_border = "ffffff";
google_color_bg = "FFFFFF";
google_color_link = "003090";
google_color_text = "000000";
google_color_url = "666666";
//--></script>
<script src="../_/https/pagead2.googlesyndication.com/pagead/show_ads.js" type="text/javascript">
</script>
<br>
<br/>
<!-- SiteSearch Google -->
<form action="../_/https/www.google.com/custom/index.html" method="get">
<table bgcolor="#ffffff" border="0">
<tr><td align="left" height="32" nowrap="nowrap" valign="top">
<a href="../_/https/www.google.com/index.html">
<img alt="Google" border="0" src="../_/https/www.google.com/logos/Logo_25wht.gif"/></a>
</td>
<td nowrap="nowrap">
<input name="domains" type="hidden" value="Artima.com"/>
<input maxlength="255" name="q" size="31" type="text" value=""/>
<input name="sa" type="submit" value="Search"/>
</td></tr>
<tr>
<td> </td>
<td nowrap="nowrap">
<font color="#000000" size="-1">
<input name="sitesearch" type="radio" value=""/> Web
<input checked="checked" name="sitesearch" type="radio" value="Artima.com"/>Artima.com
</font>  
<input name="client" type="hidden" value="pub-3911176865765226"/>
<input name="forid" type="hidden" value="1"/>
<input name="ie" type="hidden" value="ISO-8859-1"/>
<input name="oe" type="hidden" value="ISO-8859-1"/>
<input name="cof" type="hidden" value="GALT:#008000;GL:1;DIV:#336699;VLC:663399;AH:center;BGC:FFFFFF;LBGC:FFFFFF;ALC:0000FF;LC:0000FF;T:000000;GFNT:0000FF;GIMP:0000FF;LH:50;LW:150;L:https://www.artima.com/images/artima150.gif;S:https://www.artima.com;FORID:1;"/>
<input name="hl" type="hidden" value="en"/>
</td></tr></table>
</form>
<!-- SiteSearch Google -->
</br></center>
<br/>
<div class="sp">
<div style="text-align: center;">
<a href="../_/https/www.artima.com/copyright.html">Copyright</a> © 1996-2019 Artima, Inc. All Rights Reserved. - <a href="../_/https/www.artima.com/privacy.html">Privacy Policy</a> - <a href="../_/https/www.artima.com/termsofuse.html">Terms of Use</a>
</div>
</div>
<br/>
<script language="JavaScript" type="text/javascript">
<!--
function initBannerVarForZone(zone) {
        initBannerVarForZoneWithScript(zone, 'adjs_modified');
}

function initBannerVarForZoneWithScript(zone, phpScript) {

        if (!document.phpAds_used) document.phpAds_used = ',';
        phpAds_random = new String (Math.random());
        phpAds_random = phpAds_random.substring(2,11);

        var nextScriptSrc = '../_/https/www.artima.com/zcr/index.html' + phpScript + '.php?n=' +
                phpAds_random  +
                '&amp;what=zone:' + zone + '&amp;target=_top&amp;block=1&amp;blockcampaign=1' +
                '&amp;exclude=' + document.phpAds_used;

        document.write("<script language='JavaScript' type='text/javascript' src='");
        document.write(nextScriptSrc);
        document.write("'><\/script>");

}

function replaceDiv(divID) {
        document.getElementById(divID).innerHTML = phpadsbanner;
}
-->
</script>
<script language="JavaScript" type="text/javascript">
<!--
initBannerVarForZone(3);
-->
</script>
<script language="JavaScript" type="text/javascript">
<!--
replaceDiv('leftskyscraper');
-->
</script>
<script language="JavaScript" type="text/javascript">
<!--
initBannerVarForZoneWithScript(4, 'textman');
-->
</script>
<script language="JavaScript" type="text/javascript">
<!--
replaceDiv('sponsoredlinks');
-->
</script>
</hr></hr><a href="https://dafoster.net/projects/crystal-web-archiver/" id="cr-footer-banner" style="border-top: 2px #B40010 solid;background: #FFFAE1;font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;font-variant: initial;font-weight: initial;text-transform: none;font-size: 14px;color: #6c757d;line-height: 2.0;cursor: pointer;display: flex;align-items: center;justify-content: center;gap: 4px;clear: both;" target="_blank"><img height="24" onerror="this.style['display'] = 'none';" src="../_/crystal/resources/appicon.png" width="24"/><span>This page was archived with Crystal</span><script>window.addEventListener('load', function() { const $1 = document.querySelector('#cr-footer-banner'); if (!$1) { return; } if (window !== window.top) { let $2 = false; if (window.name) { const $3 = window.parent.document.getElementsByName(window.name); if ($3.length === 1) { const $4 = $3[0]; if ($4.tagName === 'FRAME' && $4.parentElement.tagName === 'FRAMESET') { let $5 = $4; while (true) { if ($5.parentElement.tagName !== 'FRAMESET') { $2 = true; break; } if ($5.parentElement.attributes['rows'] !== undefined) { const $6 = $5.parentElement.children; if ($5 === $6[$6.length - 1]) { $5 = $5.parentElement; continue; } else { break; } } else if ($5.parentElement.attributes['cols'] !== undefined) { const $7 = Array.from($5.parentElement.children); const $8 = $7.indexOf($5); if ($8 === -1) { break; } const $9 = $5.parentElement.attributes['cols'].value.split(','); const $10 = $9.map((s) => parseInt(s.trim())); if ($9[$8].trim() === '*' || $10[$8] === Math.max.apply(null, $10)) { $5 = $5.parentElement; continue; } else { break; } } else { break; } } } } } if (!$2) { $1.style['display'] = 'none'; } } const $11 = $1.getBoundingClientRect(); const $12 = ($11.y < window.innerHeight - $11.height); if ($12) { $1.style['position'] = 'fixed'; $1.style['bottom'] = '0'; $1.style['left'] = '0'; $1.style['right'] = '0'; $1.style['z-index'] = '9999'; } const $13 = ( document.body.getBoundingClientRect().height < $11.height * 2 ); if ($13) { $1.style['display'] = 'none'; }
});</script></a></body>
</html>
