
<!DOCTYPE html>

<html>
<head><meta content="noindex,nofollow" name="robots"/>
<title>Django vs. Cheetah: 1-0</title>
<meta charset="utf-8"/>
<meta content="Guido van van Rossum" name="author">
<link href="../_/https/www.artima.com/artima.css" rel="stylesheet" type="text/css"/>
<link href="../_/https/www.artima.com/favicon.ico" rel="shortcut icon"/>
</meta></head>
<body><table cellspacing="0" width="100%">
<tr>
<td align="left" valign="bottom">
<a href="../_/https/www.artima.com/index.html"><img alt="The Artima Developer Community" border="0" height="43" src="../_/https/www.artima.com/images/a7.gif" width="550"/></a>
</td>
</tr></table>
<table bgcolor="#333333" width="100%">
<tr>
<td align="center">
<div class="ml">
<a class="hl" href="../_/https/www.artima.com/articles/index.html">Articles</a> |
<a class="hl" href="../_/https/www.artima.com/news/index.html">News</a> |
<a class="hl" href="../index.html">Weblogs</a> |
<a class="hl" href="../_/https/www.artima.com/shop/catalog/index.html">Books</a> |
<a class="hl" href="../_/https/www.artima.com/forums/index.html">Forums</a>
</div>
</td>
</tr>
</table>
<table bgcolor="#AACCFF" width="100%">
<tr>
<td align="center">
<div class="sc">
<a href="../index.html">Artima Weblogs</a> | 

<a href="../index.html$/blogger=guido.html">Guido van van Rossum's Weblog</a> | 

<a href="../_/https/www.artima.com/forums/flat.html$/forum=106&amp;thread=146606.html">Discuss</a> | 
<a href="mailto:?subject=Django vs. Cheetah: 1-0&amp;body= %0AArtima Weblogs %0ADjango vs. Cheetah: 1-0 %0Aby Guido van van Rossum %0A%0Ahttps://www.artima.com/weblogs/viewpost.jsp?thread=146606">Email</a> | 
<a href="../viewpostP.html$/thread=146606.html">Print</a> | 
<a href="../bloggers.html">Bloggers</a> | 
<a class="sl" href="thread=146503.html" title="Web Framework Redux">Previous</a> | 
<a class="sl" href="thread=146647.html" title="Which Part of  &quot;No XML&quot; Don't You Understand?">Next</a>
</div>
</td>
</tr>
</table>
<table bgcolor="#EEEEEE" width="100%">
<tr>
<td align="center">
<div class="sc">
<span style="color: #555555;">Sponsored Link</span> <span style="color: #888888;">•</span>
<script language="JavaScript" src="../_/https/www.artima.com/zcr/adx.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
   if (!document.phpAds_used) document.phpAds_used = ',';
   phpAds_random = new String (Math.random()); phpAds_random = phpAds_random.substring(2,11);
   
   document.write ("<" + "script language='JavaScript' type='text/javascript' src='");
   document.write ("../_/https/www.artima.com/zcr/adjs.html$/n=.html" + phpAds_random);
   document.write ("&amp;what=zone:9&amp;target=_top");   document.write ("&amp;exclude=" + document.phpAds_used);
   if (document.referrer)
      document.write ("&amp;referer=" + escape(document.referrer));
   document.write ("'><" + "/script>");
//-->
</script><noscript><a href="../_/https/www.artima.com/zcr/adclick.html$/n=a799ecf6.html" target="_top"><img alt="" border="0" src="../_/https/www.artima.com/zcr/adview.html$/what=zone:9&amp;n=a0587811.html"/></a></noscript>
</div>
</td>
</tr>
</table>
<br/>
<div class="vegies">
<div class="tc">
<span class="sts">All Things Pythonic</span><br>
<span class="ts">Django vs. Cheetah: 1-0</span><br/>
<span class="as">by Guido van van Rossum</span><br/>
<span class="pd">January 31, 2006</span><br/>
</br></div>
<blockquote>
<b>Summary</b><br/>
I finally got some time to play with Cheetah and Django templates.  After maybe an hour with each, I like Django best.  Hopefully people are still watching this space...

</blockquote>
<hr align="left" width="90%"/>
<table align="right">
<tr>
<td>
<div class="adnotice">
Advertisement
</div>
<center>
<script language="JavaScript" src="../_/https/www.artima.com/zcr/adx.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
if (!document.phpAds_used) document.phpAds_used = ',';
phpAds_random = new String (Math.random()); phpAds_random = phpAds_random.substring(2,11);
document.write ("<" + "script language='JavaScript' type='text/javascript' src='");
document.write ("../_/https/www.artima.com/zcr/adjs.html$/n=.html" + phpAds_random);
document.write ("&amp;what=zone:2");
document.write ("&amp;exclude=" + document.phpAds_used);
if (document.referrer)
document.write ("&amp;referer=" + escape(document.referrer));
document.write ("'><" + "/script>");
//-->
</script><noscript><a href="../_/https/www.artima.com/zcr/adclick.html$/n=a74ab060.html" target="_blank"><img alt="" border="0" src="../_/https/www.artima.com/zcr/adview.html$/what=zone:2&amp;n=a74ab060.html"/></a></noscript>
</center>
</td>
</tr>
</table>
<p>
<p>Encouraged by Fredrik Lundh, I took a look at Django templating, separate from the rest of Django.  This works fine, except there's a mysterious environment variable DJANGO_SETTINGS_MODULE that is somehow <em>required</em>.  That may be fine for framework users, but it's a bit harsh if all you want to do is use the templating library.  Setting it to empty didn't help.  I ended up uing this hack:</p>
<pre class="literal-block">
import os
os.environ["DJANGO_SETTINGS_MODULE"] = "__main__"

from django.core.template import Template
</pre>
<p>With that out of the way, I managed to run this program:</p>
<pre class="literal-block">
t = Template("&lt;h1&gt;Hello {{name}}&lt;/h1&gt;")
print t.render({"name": "Phillip"})
print t.render({"name": "Adrian"})
</pre>
<p>This is nice!  The output of course is:</p>
<pre class="literal-block">
&lt;h1&gt;Hello Phillip&lt;/h1&gt;
&lt;h1&gt;Hello Adrian&lt;/h1&gt;
</pre>
<p>Unfortunately I had trouble installing Django for the Python 2.5 alpha that I've got installed; it uses the fancy new ez_install stuff, which is great when it works, but there's no Python 2.5 download of setuptools on PyPI yet, so it doesn't.</p>
<p>I tried the same exercise using Cheetah.  Not too different:</p>
<pre class="literal-block">
from Cheetah.Template import Template
names = {"name": "Tavis"}
t = Template("&lt;h1&gt;Hello $name&lt;/h1&gt;", searchList=[names])
print t
names["name"] = "Ian"
print t
</pre>
<p>with the following output:</p>
<pre class="literal-block">
&lt;h1&gt;Hello Tavis&lt;/h1&gt;
&lt;h1&gt;Hello Ian&lt;/h1&gt;
</pre>
<p>(Ironically, Cheetah also failed under Python 2.5 -- Python 2.5 inadvertently (I believe) changes the syntax that's allowed before "from __future__ import ..." to disallow assignment to __author__ and __version__.  That was easier to fix though -- commenting out the "from __future__ ..." line was sufficient.)</p>
<div class="section" id="side-by-side-comparison">
<h1><a name="side-by-side-comparison">Side-by-side Comparison</a></h1>
<p>(<strong>BEWARE!</strong> I haven't used either system to build a real website yet.  I'm just looking at the API and templating language designs.)</p>
<p>Django definitely feels more "modern" than Cheetah.  The templating languages are fairly similar, with Django writing {{foo.bar}} where Cheetah writes $foo.bar or ${foo.bar} for variable interpolation (== substitution).  The biggest difference is that Cheetah allows pretty much arbitrary Python call syntax, e.g. ${foo.bar('hello', $name, 42+42)}.  Yes, you have to prefix variable references in the argument list with another $, and there are confusing rules about when the $ is optional. Django only allows names separated by dots, using the old Zope trick of trying x['y'], x.y and x.y() when the input is {{x.y}}.  When y looks like a number, it'll even try a sequence index, e.g. {{x.4}} means x[4].</p>
<p>(Aside: something similar is also found in web.py, but there it bothers me, because it's invoked from normal-looking Python code.  E.g. foo["x"] and foo.x are equivalent, when foo is a "Storage" object.  But this leaves me wondering, what does foo.keys mean?  The keys method or the value stored under "keys"?  Zope 2 was similarly confusing with implicit acquisition.)</p>
<p>A big difference: if Django doesn't find a name, it inserts nothing; but Cheetah raises an exception.  ISTM that Django is more user-friendly here, even if its approach could be considered error-prone (typos are easily missed since they simply suppress a small bit of output).  In my experience, missing variables are very common in substitution data, and Cheetah requires you to provide explicit default values in this case.</p>
<p>Both templating languages also have a "statement" syntax to complement their "expression" interpolating syntax.  In Django, this is written as {% keyword %} while in Cheetah you use #keyword.  Here I initially found Cheetah a bit more readable, since it resembles C preprocessor syntax:</p>
<pre class="literal-block">
#if $name
&lt;h1&gt;Hello $name&lt;/h1&gt;
#else
&lt;h1.Hello there&lt;/h1&gt;
#end if
</pre>
<p>This is written in Django as:</p>
<pre class="literal-block">
{%if name%}
&lt;h1&gt;Hello {{name}}&lt;/h1&gt;
{%else%}
&lt;h1&gt;Hello There&lt;/h1&gt;
{%endif%}
</pre>
<p>which is harder on the eyes and prints more unnecessary whitespace.</p>
<p>But then I stumbled upon Cheeta's inline form, which is pretty unreadable due to the symmetric delimiters:</p>
<pre class="literal-block">
# if $name # &lt;h1&gt;Hello $name&lt;/h1&gt; # else # &lt;h1&gt;Hello There&lt;/h1&gt; # end if #
</pre>
<p>Both languages have tons of other statement-level constructs, to do loops, set variables, invoke other templates, define blocks that can be used by other templates, and more.  I haven't explored this much yet, but they both seem to cover a similar terrain.  I guess this is what template authors actually need; or perhaps it points to some common ancestor in PHP or JSP?</p>
<p>If you need your variable interpolations to be HTML-escaped (replacing "&lt;" with "&amp;lt;" and so on), Cheetah lets you specify a default filter in the template (#filter) or when the template is created in Python code.  In Django you must add a pipeline to the interpolation syntax, like this: ${foo.bar|escape}.  Both support various other filters as well, with Django really going wild.  I'm somehow surprised that HTML-escaping isn't the default -- failing to HTML-escape data is the number one vulnerability leading to XSS attacks.  And in theory you should almost never need to provide HTML for interpolation: you're supposed to invoke HTML fragments using #include or {%include%}.  Cheetah at least provides a way to make HTML-escaping the default filter throughout a template.</p>
<div class="section" id="python-api">
<h2><a name="python-api">Python API</a></h2>
<p>See the examples near the top.  I like Django's version better: you pass the variable bindings in to the render() method.  Cheetah lets you specify multiple dictionaries with variable bindings, which are searched one after another, but it bothers me that these all have to be passed to the Template() constructor instead of to the render method (which is called __str__() in Cheetah :-).</p>
<p>Django's template compilation is much simpler and IMO more elegant than Cheetah: Django parses the template text into nodes of various types using a big regular expression, and each node has an appropriate render() method.  Rendering the template in a given context simply concatenates the results of rendering each node in that context.  I imagine this could easily be turned into a generator compatible with WSGI.</p>
<p>Cheetah, OTOH, compiles each template to a Python class!  This is much slower, and in my experience brittle -- on my first attempt I introduced a syntax error in the template that caused a Python syntax error in the resulting Python class, which was hard to debug.  It also seems overkill, and I worry that it might cause security problems -- given that the compiler isn't too smart (see above) I could see a malicious template author "breaking out" of the templating languages and invoking unauthorized Python code.  Now, I wouldn't let people I don't trust edit templates on my website anyway, but it appears to be a common pattern that certain people are allowed to edit templates but not code.  Cheetah blurs the distinction a little too much for my comfort.</p>
</div>
</div>
<div class="section" id="other-templating-solutions">
<h1><a name="other-templating-solutions">Other Templating Solutions</a></h1>
<p>I guess we're closer than I thought to the mix-and-match approach that I requested in my previous blog.  Cheetah is <em>just</em> a templating engine, and several web frameworks use or recommend it, e.g. web.py and Subway.  (Is Subway dead?  The website is super-incomplete and it still downloads an old Cheetah version.)  Django's templates are almost usable independent from the rest of Django; I expect the situation will improve once they release the magic-removal branch.</p>
<p>I didn't find too many other templating solutions.  TurboGears uses Kid which XML-based, like Nevow, TAL etc.   IMO these are no contenders because they are XML-based.  As the Django folks mention, they use templates to generate non-HTML text files as well.  And even if they could be used for this, the verbosity of the XML syntax and the inability to do a proper if-then-else in XML make template writing using XML a non-starter.</p>
</div>
<div class="section" id="final-thought">
<h1><a name="final-thought">Final Thought</a></h1>
<p>Django and Cheetah both define a 'Template' class.  Python's standard library also has a Template class (in string.py), which serves a similar purpose (but with only a fraction of the functionality).  All these have different APIs.  But are the differences important?  It seems pretty arbitrary whether to use <tt class="literal"><span class="pre">Template("...").render(locals())</span></tt> (Django), or <tt class="literal"><span class="pre">str(Template("...",</span> <span class="pre">searchList=[locals()]))`</span> <span class="pre">(Cheetah)</span> <span class="pre">or</span> <span class="pre">``Template("...").substitute(locals())</span></tt> (string.py).  Perhaps we could attempt some standardization here similar to WSGI?</p>
</div>
<h1>Talk Back!</h1>
<p>
Have an opinion?


Readers have already posted

<a href="../_/https/www.artima.com/forums/flat.html$/forum=106&amp;thread=146606.html">86

comments</a>
about this weblog entry. Why not

<a href="../_/https/www.artima.com/forums/post.html$/forum=106&amp;thread=146606&amp;reply=true.html">add yours</a>?


<h1>RSS Feed</h1>
<p>
If you'd like to be notified whenever Guido van van Rossum adds a new entry to <a href="../index.html$/blogger=guido.html">his weblog</a>, subscribe to his <a href="../feeds/bloggers/guido.rss">RSS feed</a>.

<center>
<div class="sociallinks">
<a href="../_/http/digg.com/submit$/phase=2&amp;url=http%3A%2F%2Fwww.artima.com%2Fweblogs%2Fviewpost.jsp%3Fthread%3D146606&amp;title=Django+vs.+Cheetah%3A+1-0&amp;bodytext=I+finally+got+some+time+to+play+with+Cheetah+and+Django+templates.++After+maybe+an+hour+with+each%2C+I+like+Django+best.++Hopefully+people+are+still+watching+this+space_&amp;topic=programming">
<img alt="Digg" border="0" height="14" hspace="8" src="../_/https/www.artima.com/images/digg.gif" width="16">Digg
  </img></a>
  |
  <a href="../_/http/del.icio.us/post$/url=http%3A%2F%2Fwww.artima.com%2Fweblogs%2Fviewpost.jsp%3Fthread%3D146606&amp;title=Django+vs.+Cheetah%3A+1-0">
<img alt="del.icio.us" border="0" height="16" hspace="8" src="../_/https/www.artima.com/images/delicious.gif" vspace="1" width="16">del.icio.us
  </img></a>
  |
  <a href="../_/http/programming.reddit.com/submit$/url=http%3A%2F%2Fwww.artima.com%2Fweblogs%2Fviewpost.jsp%3Fthread%3D146606&amp;title=Django+vs.+Cheetah%3A+1-0">
<img alt="Reddit" border="0" height="18" hspace="8" src="../_/https/www.artima.com/images/reddit.gif" width="18"/>Reddit
  </a>
</div>
</center>
<h1>About the Blogger</h1>
<p>
<table><tr valign="bottom"><td><img align="right" src="../_/https/www.artima.com/images/guido.jpg"/></td><td>Guido van Rossum is the creator of Python, one of the major
programming languages on and off the web. The Python community refers to him as the BDFL (Benevolent Dictator For Life), a title straight
from a Monty Python skit. He moved from the Netherlands to the USA in
1995, where he met his wife. Until July 2003 they lived in the
northern Virginia suburbs of Washington, DC with their son Orlijn, who
was born in 2001. They then moved to Silicon Valley where Guido now works for Google
(spending 50% of his time on Python!).</td></tr></table><p>
<div class="sp">This weblog entry is Copyright © 2006 Guido van van Rossum. All rights reserved.</div>
</p></p></p></p></p></div>

<hr width="100%">
<table align="center" width="50%">
<tr>
<td>
<div class="horizontaltextadbox">
<div class="adheadline">Sponsored Links</div>
<div id="sponsoredlinks">
</div>
</div>
</td>
</tr>
</table>
<hr width="100%"/>
<center>
<script type="text/javascript"><!--
google_ad_client = "pub-3911176865765226";
google_alternate_color = "ffffff";
google_ad_width = 728;
google_ad_height = 15;
google_ad_format = "728x15_0ads_al";
google_ad_channel = "";
google_color_border = "ffffff";
google_color_bg = "FFFFFF";
google_color_link = "003090";
google_color_text = "000000";
google_color_url = "666666";
//--></script>
<script src="../_/https/pagead2.googlesyndication.com/pagead/show_ads.js" type="text/javascript">
</script>
<br>
<br/>
<!-- SiteSearch Google -->
<form action="../_/https/www.google.com/custom/index.html" method="get">
<table bgcolor="#ffffff" border="0">
<tr><td align="left" height="32" nowrap="nowrap" valign="top">
<a href="../_/https/www.google.com/index.html">
<img alt="Google" border="0" src="../_/https/www.google.com/logos/Logo_25wht.gif"/></a>
</td>
<td nowrap="nowrap">
<input name="domains" type="hidden" value="Artima.com"/>
<input maxlength="255" name="q" size="31" type="text" value=""/>
<input name="sa" type="submit" value="Search"/>
</td></tr>
<tr>
<td> </td>
<td nowrap="nowrap">
<font color="#000000" size="-1">
<input name="sitesearch" type="radio" value=""/> Web
<input checked="checked" name="sitesearch" type="radio" value="Artima.com"/>Artima.com
</font>  
<input name="client" type="hidden" value="pub-3911176865765226"/>
<input name="forid" type="hidden" value="1"/>
<input name="ie" type="hidden" value="ISO-8859-1"/>
<input name="oe" type="hidden" value="ISO-8859-1"/>
<input name="cof" type="hidden" value="GALT:#008000;GL:1;DIV:#336699;VLC:663399;AH:center;BGC:FFFFFF;LBGC:FFFFFF;ALC:0000FF;LC:0000FF;T:000000;GFNT:0000FF;GIMP:0000FF;LH:50;LW:150;L:https://www.artima.com/images/artima150.gif;S:https://www.artima.com;FORID:1;"/>
<input name="hl" type="hidden" value="en"/>
</td></tr></table>
</form>
<!-- SiteSearch Google -->
</br></center>
<br/>
<div class="sp">
<div style="text-align: center;">
<a href="../_/https/www.artima.com/copyright.html">Copyright</a> © 1996-2019 Artima, Inc. All Rights Reserved. - <a href="../_/https/www.artima.com/privacy.html">Privacy Policy</a> - <a href="../_/https/www.artima.com/termsofuse.html">Terms of Use</a>
</div>
</div>
<br/>
<script language="JavaScript" type="text/javascript">
<!--
function initBannerVarForZone(zone) {
        initBannerVarForZoneWithScript(zone, 'adjs_modified');
}

function initBannerVarForZoneWithScript(zone, phpScript) {

        if (!document.phpAds_used) document.phpAds_used = ',';
        phpAds_random = new String (Math.random());
        phpAds_random = phpAds_random.substring(2,11);

        var nextScriptSrc = '../_/https/www.artima.com/zcr/index.html' + phpScript + '.php?n=' +
                phpAds_random  +
                '&amp;what=zone:' + zone + '&amp;target=_top&amp;block=1&amp;blockcampaign=1' +
                '&amp;exclude=' + document.phpAds_used;

        document.write("<script language='JavaScript' type='text/javascript' src='");
        document.write(nextScriptSrc);
        document.write("'><\/script>");

}

function replaceDiv(divID) {
        document.getElementById(divID).innerHTML = phpadsbanner;
}
-->
</script>
<script language="JavaScript" type="text/javascript">
<!--
initBannerVarForZone(3);
-->
</script>
<script language="JavaScript" type="text/javascript">
<!--
replaceDiv('leftskyscraper');
-->
</script>
<script language="JavaScript" type="text/javascript">
<!--
initBannerVarForZoneWithScript(4, 'textman');
-->
</script>
<script language="JavaScript" type="text/javascript">
<!--
replaceDiv('sponsoredlinks');
-->
</script>
</hr><a href="https://dafoster.net/projects/crystal-web-archiver/" id="cr-footer-banner" style="border-top: 2px #B40010 solid;background: #FFFAE1;font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;font-variant: initial;font-weight: initial;text-transform: none;font-size: 14px;color: #6c757d;line-height: 2.0;cursor: pointer;display: flex;align-items: center;justify-content: center;gap: 4px;clear: both;" target="_blank"><img height="24" onerror="this.style['display'] = 'none';" src="../_/crystal/resources/appicon.png" width="24"/><span>This page was archived with Crystal</span><script>window.addEventListener('load', function() { const $1 = document.querySelector('#cr-footer-banner'); if (!$1) { return; } if (window !== window.top) { let $2 = false; if (window.name) { const $3 = window.parent.document.getElementsByName(window.name); if ($3.length === 1) { const $4 = $3[0]; if ($4.tagName === 'FRAME' && $4.parentElement.tagName === 'FRAMESET') { let $5 = $4; while (true) { if ($5.parentElement.tagName !== 'FRAMESET') { $2 = true; break; } if ($5.parentElement.attributes['rows'] !== undefined) { const $6 = $5.parentElement.children; if ($5 === $6[$6.length - 1]) { $5 = $5.parentElement; continue; } else { break; } } else if ($5.parentElement.attributes['cols'] !== undefined) { const $7 = Array.from($5.parentElement.children); const $8 = $7.indexOf($5); if ($8 === -1) { break; } const $9 = $5.parentElement.attributes['cols'].value.split(','); const $10 = $9.map((s) => parseInt(s.trim())); if ($9[$8].trim() === '*' || $10[$8] === Math.max.apply(null, $10)) { $5 = $5.parentElement; continue; } else { break; } } else { break; } } } } } if (!$2) { $1.style['display'] = 'none'; } } const $11 = $1.getBoundingClientRect(); const $12 = ($11.y < window.innerHeight - $11.height); if ($12) { $1.style['position'] = 'fixed'; $1.style['bottom'] = '0'; $1.style['left'] = '0'; $1.style['right'] = '0'; $1.style['z-index'] = '9999'; } const $13 = ( document.body.getBoundingClientRect().height < $11.height * 2 ); if ($13) { $1.style['display'] = 'none'; }
});</script></a></body>
</html>
