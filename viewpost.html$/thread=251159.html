
<!DOCTYPE html>

<html>
<head><meta content="noindex,nofollow" name="robots"/>
<title>The Adventures of a Pythonista in Schemeland/18</title>
<meta charset="utf-8"/>
<meta content="Michele Simionato" name="author">
<link href="../_/https/www.artima.com/artima.css" rel="stylesheet" type="text/css"/>
<link href="../_/https/www.artima.com/favicon.ico" rel="shortcut icon"/>
</meta></head>
<body><table cellspacing="0" width="100%">
<tr>
<td align="left" valign="bottom">
<a href="../_/https/www.artima.com/index.html"><img alt="The Artima Developer Community" border="0" height="43" src="../_/https/www.artima.com/images/a7.gif" width="550"/></a>
</td>
</tr></table>
<table bgcolor="#333333" width="100%">
<tr>
<td align="center">
<div class="ml">
<a class="hl" href="../_/https/www.artima.com/articles/index.html">Articles</a> |
<a class="hl" href="../_/https/www.artima.com/news/index.html">News</a> |
<a class="hl" href="../index.html">Weblogs</a> |
<a class="hl" href="../_/https/www.artima.com/shop/catalog/index.html">Books</a> |
<a class="hl" href="../_/https/www.artima.com/forums/index.html">Forums</a>
</div>
</td>
</tr>
</table>
<table bgcolor="#CCCCCC" width="100%">
<tr>
<td align="center">
<div class="sc">
<a href="../index.html">Artima Weblogs</a> | 

<a href="../index.html$/blogger=micheles.html">Michele Simionato's Weblog</a> | 

<a href="../_/https/www.artima.com/forums/flat.html$/forum=106&amp;thread=251159.html">Discuss</a> | 
<a href="mailto:?subject=The Adventures of a Pythonista in Schemeland/18&amp;body= %0AArtima Weblogs %0AThe Adventures of a Pythonista in Schemeland/18 %0Aby Michele Simionato %0A%0Ahttps://www.artima.com/weblogs/viewpost.jsp?thread=251159">Email</a> | 
<a href="../viewpostP.html$/thread=251159.html">Print</a> | 
<a href="../bloggers.html">Bloggers</a> | 
<a class="sl" href="thread=251156.html" title="The Adventures of a Pythonista in Schemeland/17">Previous</a> | 
<a class="sl" href="thread=251474.html" title="The Adventures of a Pythonista in Schemeland: Table of Contents">Next</a>
</div>
</td>
</tr>
</table>
<table bgcolor="#EEEEEE" width="100%">
<tr>
<td align="center">
<div class="sc">
<span style="color: #555555;">Sponsored Link</span> <span style="color: #888888;">•</span>
<script language="JavaScript" src="../_/https/www.artima.com/zcr/adx.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
   if (!document.phpAds_used) document.phpAds_used = ',';
   phpAds_random = new String (Math.random()); phpAds_random = phpAds_random.substring(2,11);
   
   document.write ("<" + "script language='JavaScript' type='text/javascript' src='");
   document.write ("../_/https/www.artima.com/zcr/adjs.html$/n=.html" + phpAds_random);
   document.write ("&amp;what=zone:9&amp;target=_top");   document.write ("&amp;exclude=" + document.phpAds_used);
   if (document.referrer)
      document.write ("&amp;referer=" + escape(document.referrer));
   document.write ("'><" + "/script>");
//-->
</script><noscript><a href="../_/https/www.artima.com/zcr/adclick.html$/n=a799ecf6.html" target="_top"><img alt="" border="0" src="../_/https/www.artima.com/zcr/adview.html$/what=zone:9&amp;n=a0587811.html"/></a></noscript>
</div>
</td>
</tr>
</table>
<br/>
<div class="vegies">
<div class="tc">
<span class="sts">The Explorer</span><br>
<span class="ts">The Adventures of a Pythonista in Schemeland/18</span><br/>
<span class="as">by Michele Simionato</span><br/>
<span class="pd">March 9, 2009</span><br/>
</br></div>
<blockquote>
<b>Summary</b><br/>
This episode is about streams, a typical data structure of functional languages. The differences between functional streams and imperative iterators are discussed. En passant, I give a solution of the classic eight queens problem.

</blockquote>
<hr align="left" width="90%"/>
<table align="right">
<tr>
<td>
<div class="adnotice">
Advertisement
</div>
<center>
<script language="JavaScript" src="../_/https/www.artima.com/zcr/adx.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
if (!document.phpAds_used) document.phpAds_used = ',';
phpAds_random = new String (Math.random()); phpAds_random = phpAds_random.substring(2,11);
document.write ("<" + "script language='JavaScript' type='text/javascript' src='");
document.write ("../_/https/www.artima.com/zcr/adjs.html$/n=.html" + phpAds_random);
document.write ("&amp;what=zone:2");
document.write ("&amp;exclude=" + document.phpAds_used);
if (document.referrer)
document.write ("&amp;referer=" + escape(document.referrer));
document.write ("'><" + "/script>");
//-->
</script><noscript><a href="../_/https/www.artima.com/zcr/adclick.html$/n=a74ab060.html" target="_blank"><img alt="" border="0" src="../_/https/www.artima.com/zcr/adview.html$/what=zone:2&amp;n=a74ab060.html"/></a></noscript>
</center>
</td>
</tr>
</table>
<p>
<h1 class="title">Streams</h1>
<p>This episode is about streams, a typical data structure of functional
languages. The differences between functional streams and imperative
iterators are discussed. En passant, I give a solution of the classic
eight queens problem.</p>
<div class="section">
<h1><a id="the-eight-queens-puzzle" name="the-eight-queens-puzzle">The eight queens puzzle</a></h1>
<p>Before starting the analysis of streams, I want to close the
discussion about list comprehension. Last week I had no time to discuss one
of the conveniences of the <tt class="docutils literal"><span class="pre">list-of</span></tt> macro, i.e. the ability to define
internal variables with a <tt class="docutils literal"><span class="pre">(name</span> <span class="pre">is</span> <span class="pre">value)</span></tt> syntax.
To give an example of that, I have decided to show you a solution
of the infamous <a class="reference" href="../_/http/en.wikipedia.org/wiki/Eight_queens_puzzle/index.html">eight-queens puzzle</a> that you
will find in all the theoretical textbooks about programming.</p>
<p>In my opinion the eight queens
puzzle is not so interesting, however, if you want to study Scheme,
you will find this kind of academical examples everywhere, so I made my concession to the
tradition. In particular, the official document about streams in R6RS
Scheme, i.e. <a class="reference" href="../_/http/srfi.schemers.org/srfi-41/srfi-41.html">SRFI-41</a>,  contains a solution of the eight queens puzzle
by using the same algorithm I am presenting here, but with
streams instead of lists. You may want
to compare the list solution to the stream solution.</p>
<div class="figure">
<img alt="../_/http/www.phyast.pitt.edu/~micheles/scheme/http:/upload.wikimedia.org/wikipedia/commons/1/1f/Eight-queens-animation.gif" src="../_/http/www.phyast.pitt.edu/~micheles/scheme/http:/upload.wikimedia.org/wikipedia/commons/1/1f/Eight-queens-animation.gif">
<p class="caption">Animation taken from Wikipedia</p>
</img></div>
<p>The algorithm is based on a clever trick which is quite common in the
mathematical sciences: to introduce an additional degrees of freedom
which apparently makes the problem harder, but actually gives us a fast
lane towards the solution. Here the clever idea is to change the question and
to considered not a single square chessboard, but a family of rectangular
chessboards with <em>n</em> rows and <em>N</em> columns (with <em>n&lt;=N</em> and <em>N=8</em>). Of course
we are interested in the <em>n=8</em> solution; however, keeping <em>n</em> generic
helps, since an easy solution can be found for small <em>n</em> (in particular
for <em>n=1</em>) and we can figure out a recursive algorithm to build the <em>n+1</em>
solution starting from the <em>n=1</em> solution, until we reach <em>n=8</em>.</p>
<p>Let us express a solution as a list of column positions for the queens,
indexed by row. We will enumerate rows and columns starting from zero,
as usual. The case <em>n=1</em>
(putting a queen on a <em>1x8</em> chessboard) has 8 solutions, expressible as
the list of lists <tt class="docutils literal"><span class="pre">'((0)(1)(2)(3)(4)(5)(6)(7))</span></tt> - the first (and only)
queen will be at row 0 and columns 0, 1, 2, 3, 4, 5, 6 or 7. If there are two
queens (<em>n=2</em>) one has more solutions; for instance the first
queen (i.e. the one at row 0) could be at column 0 and the second
queen (i.e. the one at row 1) at column 2, and a solution is <tt class="docutils literal"><span class="pre">(0</span>
<span class="pre">2)</span></tt>. The solutions for the <em>n</em>-queens problem are found by looking at
the possible new configurations, starting from the solutions of the
<em>n-1</em>-queens problem and by discarding the forbidden ones.</p>
<p>A configuration
is forbidden if two queens are on the same column (by construction
they cannot be in the same row, since they are indexed by row) or
on the same diagonal. The condition <em>being on the same diagonal</em>
translates into <em>the difference between the row coordinates
is the same as the difference between the column coordinates, in absolute
value</em>. Here is the condition expressed in Scheme and making use of <tt class="docutils literal"><span class="pre">list-of</span></tt>
and of the <tt class="docutils literal"><span class="pre">is</span></tt> syntax, where <tt class="docutils literal"><span class="pre">new-row</span></tt> and <tt class="docutils literal"><span class="pre">new-col</span></tt> is the tentative
position of the <em>n</em>-th queen and <tt class="docutils literal"><span class="pre">safe-config</span></tt> is a solution of the
<em>n-1</em>-queen problem:</p>
<pre class="literal-block">
(define (all-true lst) ;; a Python-like all, true if all elements are true
  (for-all (lambda (x) x) lst))

(define (safe-queen? new-row new-col safe-config)
  ;; same-col? and same-diag? are boolean inner variables
  (all-true (list-of (not (or same-col? same-diag?))
               ((row col) in (enumerate safe-config))
               (same-col? is (= col new-col))
               (same-diag? is (= (abs (- col new-col)) (abs (- row new-row))))
               )))
</pre>
<p><tt class="docutils literal"><span class="pre">safe-queen?</span></tt> checks that the new configuration is safe by looking
at all the queens already placed. We can find all the solutions with a
recursive function:</p>
<pre class="literal-block">
(define (queens n N)
  (if (zero? n) '(())
      (list-of (append safe-config (list col))
               (n-1 is (- n 1)); inner variable
               (safe-config in (queens n-1 N))
               (col in (range N))
               (safe-queen? n-1 col safe-config)
               )))
</pre>
<p>In particular we can check that the <em>n=8</em> problem has 92 solutions:</p>
<pre class="literal-block">
&gt; (length (queens 8 8))
92
</pre>
<p>I refer you to Wikipedia for nice drawings of the solutions.</p>
</div>
<div class="section">
<h1><a id="iterators-and-streams" name="iterators-and-streams">Iterators and streams</a></h1>
<p>Python programmers are well acquainted with generators and iterators,
and they know everything about lazyness. In particular
they know that the Python iterator</p>
<blockquote>
<pre class="doctest-block">
&gt;&gt;&gt; it123 = iter(range(1, 4))
</pre>
</blockquote>
<p>is left unevaluated until its elements are requested. However, the
Python way is only superficially similar to the truly functional way,
found in Haskell or in Scheme. Actually, when Python
copies from functional languages, it does so in an imperative way.
Here the iterator <tt class="docutils literal"><span class="pre">it123</span></tt>
is an object with an internal state; there is a <tt class="docutils literal"><span class="pre">next</span></tt> method which
allows to change the state. In particular, if you call <tt class="docutils literal"><span class="pre">.next()</span></tt> twice,
the same iterator returns different values:</p>
<blockquote>
<pre class="doctest-block">
&gt;&gt;&gt; it123.next()
1
&gt;&gt;&gt; it123.next()
2
</pre>
</blockquote>
<p>Thus, Python iterators <em>are not functional</em>.  Functional languages
such as Scheme, ML and Haskell have no imperative iterators: they have
<em>streams</em> instead.  Ikarus comes with a built-in stream
library, so that I can give a concrete example right now (of course
you can use streams in other implementations simply by using the
reference implementation described in <a class="reference" href="../_/http/srfi.schemers.org/srfi-41/srfi-41.html">SRFI-41</a>).  Here is how to define
a stream on the numbers 1,2,3:</p>
<pre class="literal-block">
&gt; (import (streams))
&gt; (define str123 (stream-range 1 4))
</pre>
<p>There is no equivalent of the <tt class="docutils literal"><span class="pre">next</span></tt> method for streams, since there is
no concept of internal state of a stream. However, there is a
<tt class="docutils literal"><span class="pre">stream-car</span></tt> procedure which takes the first element of a stream,
and a <tt class="docutils literal"><span class="pre">stream-cdr</span></tt> procedure returning another stream which
lacks the first element. Both procedures are functional, i.e. they
act without mutating the original
stream object in any way. In particular, if you apply <tt class="docutils literal"><span class="pre">stream-car</span></tt> twice, you
get always the same result:</p>
<pre class="literal-block">
&gt; (stream-car str123)
1
&gt; (stream-car str123)
1
</pre>
<p>In Python, looping on an iterator exhausts it, and running twice the same
loop can have unexpected results:</p>
<blockquote>
<pre class="doctest-block">
&gt;&gt;&gt; chars = iter('abc')
&gt;&gt;&gt; for c in chars: print c,
...
a b c
&gt;&gt;&gt; for c in chars: print c,
...
</pre>
</blockquote>
<p>The first time the loop prints "a b c", but the second time it
does not print anything. In a functional language the same code
must have the same effect, it cannot depend from the inner state
of the stream. Actually, this is what happens:</p>
<pre class="literal-block">
&gt; (define chars (stream #\a #\b #\c))
&gt; (stream-for-each display chars)
abc&gt; (stream-for-each display chars)
abc&gt;
</pre>
<p><tt class="docutils literal"><span class="pre">stream-for-each</span></tt> is an utility from <a class="reference" href="../_/http/srfi.schemers.org/srfi-41/srfi-41.html">SRFI-41</a>, with obvious meaning.
Actually <a class="reference" href="../_/http/srfi.schemers.org/srfi-41/srfi-41.html">SRFI-41</a> offers a series of convenient features. The most
useful one is stream comprehension, which is very similar to
list comprehension. Since I copied the list comprehensions syntax
from the work of <a class="reference" href="../_/http/schemephil.googlepages.com/index.html">Phil Bewig</a>, which is the author of the stream
library, it is not surprising that the syntax looks the same.
The difference between list comprehensions and stream comprehension
is that stream comprehension is lazy and can be infinite. This is
similar to Python generator expressions (<em>genexps</em>).
For instance, in Python we can express the
infinite set of the even number as a genexp</p>
<blockquote>
<pre class="doctest-block">
&gt;&gt;&gt; import itertools
&gt;&gt;&gt; even = (i for i in itertools.count(0) if i % 2 == 0)
</pre>
</blockquote>
<p>whereas in Scheme we can express it as a stream:</p>
<pre class="literal-block">
&gt; (define even (stream-of i (i in (stream-from 0)) (zero? (modulo i 2))))
</pre>
<p>However the Scheme stream is immutable, whereas the Python genexp is not.
It is possible to loop over a stream with <tt class="docutils literal"><span class="pre">stream-for-each</span></tt>,
<tt class="docutils literal"><span class="pre">stream-map</span></tt> and <tt class="docutils literal"><span class="pre">stream-fold</span></tt>; such higher order functions work as
they counterparts for lists, but they return streams. There is also a
<tt class="docutils literal"><span class="pre">stream-let</span></tt> syntax, which is stream version
of named let, useful when applying the accumulator pattern to streams,
and a function <tt class="docutils literal"><span class="pre">stream-&gt;list</span></tt> with does the obvious.</p>
<p>I am not explaining all the fine details, since the documentations of
the SRFI is pretty good and exhaustive. As I anticipated, there is
also a solution of the eight queen problem using streams that you may
look at.  The difference between the stream solution and the list
comprehension solution is that the first one is lazy, i.e. you get one
solution at the time, on demand, whereas the second one is eager: it
computes all the solutions in a single bunch, and returns them
together.</p>
</div>
<div class="section">
<h1><a id="lazyness-is-a-virtue" name="lazyness-is-a-virtue">Lazyness is a virtue</a></h1>
<p>The basic feature of streams, apart from immutability, is true lazyness.
Streams are truly lazy since they perform work only when forced - i.e.
only when an element is explicitly requested -  and even there if
they had already accomplished a task they do not perform it again
- i.e. they <em>memoize</em> the elements already computed (and this is <em>not</em>
the case for Python iterators). An example should make these two points clear.
Let us define a <tt class="docutils literal"><span class="pre">work</span></tt> procedure which protests when called:</p>
<pre class="literal-block">
&gt; (define (work i)
    (display "Life is hard!\n") i)
</pre>
<p>The protest is expressed an a side effect;
other than that, the function, does not perform too much, since it
just returns the parameter got in input, but, you know, there is no
limit to lazyness!</p>
<p>Now let me define a stream which invokes the function <tt class="docutils literal"><span class="pre">work</span></tt> three times:</p>
<pre class="literal-block">
&gt; (define work-work-work (stream-of (work i) (i in (stream-range 1 4))))
</pre>
<p>Since the stream is lazy, it does not perform any work at definition
time. It starts working only when elements are expressly required:</p>
<pre class="literal-block">
&gt; (stream-&gt;list work-work-work)
Life is hard!
Life is hard!
Life is hard!
(1 2 3)
</pre>
<p>Now the values 1, 2, 3 have been memoized: if we try to loop again on the
stream, it will return the precomputed values:</p>
<pre class="literal-block">
&gt; (stream-&gt;list work-work-work)
(1 2 3)
</pre>
<p>This shows clearly that the function <tt class="docutils literal"><span class="pre">work</span></tt> is not called twice.
It is also clear that, had <tt class="docutils literal"><span class="pre">work</span></tt> some useful side effect (such as writing
a log message) then using a stream would not be a good idea,
since you could loose some message. Streams are a functional data
structure and it is good practice to use only pure functions with them, i.e.
functions without side effects. Moreover, I should also notice that the
memoization property implies that a stream can take an unbound
amount of memory, whereas an imperative iterator has no such issue.</p>
<p>I could say more. In particular, there are lots of caveats
about streams, which are explained in detail in the <a class="reference" href="../_/http/srfi.schemers.org/srfi-41/srfi-41.html">SRFI-41</a> documentation
(so many caveats that I personally do not feel confident with
streams).  I am also sure that Pythonistas would be even more
interested in true generator-expressions and generators, which can be
definite in Scheme by using continuations.  However, investigating
that direction will astray us away from our path. The intention of this
third cycle of <em>Adventures</em> was just to give a feeling of what does it
mean to be a true functional language, versus being an imperative
language with a few functional-looking constructs.</p>
<p>With this episode this cycle of our <em>Adventures</em> ends, but a new one
will begin shortly. Stay tuned!</p>
</div>
<h1>Talk Back!</h1>
<p>
Have an opinion?


Be the first to

<a href="../_/https/www.artima.com/forums/post.html$/forum=106&amp;thread=251159&amp;reply=true.html">post a comment</a> about
this weblog entry.


<h1>RSS Feed</h1>
<p>
If you'd like to be notified whenever Michele Simionato adds a new entry to <a href="../index.html$/blogger=micheles.html">his weblog</a>, subscribe to his <a href="../feeds/bloggers/micheles.rss">RSS feed</a>.

<center>
<div class="sociallinks">
<a href="../_/http/digg.com/submit$/phase=2&amp;url=http%3A%2F%2Fwww.artima.com%2Fweblogs%2Fviewpost.jsp%3Fthread%3D251159&amp;title=The+Adventures+of+a+Pythonista+in+Schemeland%2F18&amp;bodytext=This+episode+is+about+streams%2C+a+typical+data+structure+of+functional+languages.+The+differences+between+functional+streams+and+imperative+iterators+are+discussed.+En+passant%2C+I+give+a+solution+of+the+classic+eight+queens+problem.&amp;topic=programming">
<img alt="Digg" border="0" height="14" hspace="8" src="../_/https/www.artima.com/images/digg.gif" width="16">Digg
  </img></a>
  |
  <a href="../_/http/del.icio.us/post$/url=http%3A%2F%2Fwww.artima.com%2Fweblogs%2Fviewpost.jsp%3Fthread%3D251159&amp;title=The+Adventures+of+a+Pythonista+in+Schemeland%2F18">
<img alt="del.icio.us" border="0" height="16" hspace="8" src="../_/https/www.artima.com/images/delicious.gif" vspace="1" width="16"/>del.icio.us
  </a>
  |
  <a href="../_/http/programming.reddit.com/submit$/url=http%3A%2F%2Fwww.artima.com%2Fweblogs%2Fviewpost.jsp%3Fthread%3D251159&amp;title=The+Adventures+of+a+Pythonista+in+Schemeland%2F18">
<img alt="Reddit" border="0" height="18" hspace="8" src="../_/https/www.artima.com/images/reddit.gif" width="18"/>Reddit
  </a>
</div>
</center>
<h1>About the Blogger</h1>
<p>
<table><tr valign="bottom"><td><img align="right" src="../_/https/www.artima.com/images/micheleSimionato.jpg"/></td><td>Michele Simionato started his career as a Theoretical Physicist, working in Italy, France and the U.S. He turned to programming in 2003; since then he has been working professionally as a Python developer and now he lives in Milan, Italy. Michele is well known in the Python community for his posts in the newsgroup(s), his articles and his Open Source libraries and recipes. His interests include object oriented programming, functional programming, and in general programming metodologies that enable us to manage the complexity of modern software developement.</td></tr></table><p>
<div class="sp">This weblog entry is Copyright © 2009 Michele Simionato. All rights reserved.</div>
</p></p></p></p></p></div>

<hr width="100%">
<table align="center" width="50%">
<tr>
<td>
<div class="horizontaltextadbox">
<div class="adheadline">Sponsored Links</div>
<div id="sponsoredlinks">
</div>
</div>
</td>
</tr>
</table>
<hr width="100%"/>
<center>
<script type="text/javascript"><!--
google_ad_client = "pub-3911176865765226";
google_alternate_color = "ffffff";
google_ad_width = 728;
google_ad_height = 15;
google_ad_format = "728x15_0ads_al";
google_ad_channel = "";
google_color_border = "ffffff";
google_color_bg = "FFFFFF";
google_color_link = "003090";
google_color_text = "000000";
google_color_url = "666666";
//--></script>
<script src="../_/https/pagead2.googlesyndication.com/pagead/show_ads.js" type="text/javascript">
</script>
<br>
<br/>
<!-- SiteSearch Google -->
<form action="../_/https/www.google.com/custom/index.html" method="get">
<table bgcolor="#ffffff" border="0">
<tr><td align="left" height="32" nowrap="nowrap" valign="top">
<a href="../_/https/www.google.com/index.html">
<img alt="Google" border="0" src="../_/https/www.google.com/logos/Logo_25wht.gif"/></a>
</td>
<td nowrap="nowrap">
<input name="domains" type="hidden" value="Artima.com"/>
<input maxlength="255" name="q" size="31" type="text" value=""/>
<input name="sa" type="submit" value="Search"/>
</td></tr>
<tr>
<td> </td>
<td nowrap="nowrap">
<font color="#000000" size="-1">
<input name="sitesearch" type="radio" value=""/> Web
<input checked="checked" name="sitesearch" type="radio" value="Artima.com"/>Artima.com
</font>  
<input name="client" type="hidden" value="pub-3911176865765226"/>
<input name="forid" type="hidden" value="1"/>
<input name="ie" type="hidden" value="ISO-8859-1"/>
<input name="oe" type="hidden" value="ISO-8859-1"/>
<input name="cof" type="hidden" value="GALT:#008000;GL:1;DIV:#336699;VLC:663399;AH:center;BGC:FFFFFF;LBGC:FFFFFF;ALC:0000FF;LC:0000FF;T:000000;GFNT:0000FF;GIMP:0000FF;LH:50;LW:150;L:https://www.artima.com/images/artima150.gif;S:https://www.artima.com;FORID:1;"/>
<input name="hl" type="hidden" value="en"/>
</td></tr></table>
</form>
<!-- SiteSearch Google -->
</br></center>
<br/>
<div class="sp">
<div style="text-align: center;">
<a href="../_/https/www.artima.com/copyright.html">Copyright</a> © 1996-2019 Artima, Inc. All Rights Reserved. - <a href="../_/https/www.artima.com/privacy.html">Privacy Policy</a> - <a href="../_/https/www.artima.com/termsofuse.html">Terms of Use</a>
</div>
</div>
<br/>
<script language="JavaScript" type="text/javascript">
<!--
function initBannerVarForZone(zone) {
        initBannerVarForZoneWithScript(zone, 'adjs_modified');
}

function initBannerVarForZoneWithScript(zone, phpScript) {

        if (!document.phpAds_used) document.phpAds_used = ',';
        phpAds_random = new String (Math.random());
        phpAds_random = phpAds_random.substring(2,11);

        var nextScriptSrc = '../_/https/www.artima.com/zcr/index.html' + phpScript + '.php?n=' +
                phpAds_random  +
                '&amp;what=zone:' + zone + '&amp;target=_top&amp;block=1&amp;blockcampaign=1' +
                '&amp;exclude=' + document.phpAds_used;

        document.write("<script language='JavaScript' type='text/javascript' src='");
        document.write(nextScriptSrc);
        document.write("'><\/script>");

}

function replaceDiv(divID) {
        document.getElementById(divID).innerHTML = phpadsbanner;
}
-->
</script>
<script language="JavaScript" type="text/javascript">
<!--
initBannerVarForZone(3);
-->
</script>
<script language="JavaScript" type="text/javascript">
<!--
replaceDiv('leftskyscraper');
-->
</script>
<script language="JavaScript" type="text/javascript">
<!--
initBannerVarForZoneWithScript(4, 'textman');
-->
</script>
<script language="JavaScript" type="text/javascript">
<!--
replaceDiv('sponsoredlinks');
-->
</script>
</hr><a href="https://dafoster.net/projects/crystal-web-archiver/" id="cr-footer-banner" style="border-top: 2px #B40010 solid;background: #FFFAE1;font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;font-variant: initial;font-weight: initial;text-transform: none;font-size: 14px;color: #6c757d;line-height: 2.0;cursor: pointer;display: flex;align-items: center;justify-content: center;gap: 4px;clear: both;" target="_blank"><img height="24" onerror="this.style['display'] = 'none';" src="../_/crystal/resources/appicon.png" width="24"/><span>This page was archived with Crystal</span><script>window.addEventListener('load', function() { const $1 = document.querySelector('#cr-footer-banner'); if (!$1) { return; } if (window !== window.top) { let $2 = false; if (window.name) { const $3 = window.parent.document.getElementsByName(window.name); if ($3.length === 1) { const $4 = $3[0]; if ($4.tagName === 'FRAME' && $4.parentElement.tagName === 'FRAMESET') { let $5 = $4; while (true) { if ($5.parentElement.tagName !== 'FRAMESET') { $2 = true; break; } if ($5.parentElement.attributes['rows'] !== undefined) { const $6 = $5.parentElement.children; if ($5 === $6[$6.length - 1]) { $5 = $5.parentElement; continue; } else { break; } } else if ($5.parentElement.attributes['cols'] !== undefined) { const $7 = Array.from($5.parentElement.children); const $8 = $7.indexOf($5); if ($8 === -1) { break; } const $9 = $5.parentElement.attributes['cols'].value.split(','); const $10 = $9.map((s) => parseInt(s.trim())); if ($9[$8].trim() === '*' || $10[$8] === Math.max.apply(null, $10)) { $5 = $5.parentElement; continue; } else { break; } } else { break; } } } } } if (!$2) { $1.style['display'] = 'none'; } } const $11 = $1.getBoundingClientRect(); const $12 = ($11.y < window.innerHeight - $11.height); if ($12) { $1.style['position'] = 'fixed'; $1.style['bottom'] = '0'; $1.style['left'] = '0'; $1.style['right'] = '0'; $1.style['z-index'] = '9999'; } const $13 = ( document.body.getBoundingClientRect().height < $11.height * 2 ); if ($13) { $1.style['display'] = 'none'; }
});</script></a></body>
</html>
