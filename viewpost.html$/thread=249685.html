
<!DOCTYPE html>

<html>
<head><meta content="noindex,nofollow" name="robots"/>
<title>The Adventures of a Pythonista in Schemeland/16</title>
<meta charset="utf-8"/>
<meta content="Michele Simionato" name="author">
<link href="../_/https/www.artima.com/artima.css" rel="stylesheet" type="text/css"/>
<link href="../_/https/www.artima.com/favicon.ico" rel="shortcut icon"/>
</meta></head>
<body><table cellspacing="0" width="100%">
<tr>
<td align="left" valign="bottom">
<a href="../_/https/www.artima.com/index.html"><img alt="The Artima Developer Community" border="0" height="43" src="../_/https/www.artima.com/images/a7.gif" width="550"/></a>
</td>
</tr></table>
<table bgcolor="#333333" width="100%">
<tr>
<td align="center">
<div class="ml">
<a class="hl" href="../_/https/www.artima.com/articles/index.html">Articles</a> |
<a class="hl" href="../_/https/www.artima.com/news/index.html">News</a> |
<a class="hl" href="../index.html">Weblogs</a> |
<a class="hl" href="../_/https/www.artima.com/shop/catalog/index.html">Books</a> |
<a class="hl" href="../_/https/www.artima.com/forums/index.html">Forums</a>
</div>
</td>
</tr>
</table>
<table bgcolor="#CCCCCC" width="100%">
<tr>
<td align="center">
<div class="sc">
<a href="../index.html">Artima Weblogs</a> | 

<a href="../index.html$/blogger=micheles.html">Michele Simionato's Weblog</a> | 

<a href="../_/https/www.artima.com/forums/flat.html$/forum=106&amp;thread=249685.html">Discuss</a> | 
<a href="mailto:?subject=The Adventures of a Pythonista in Schemeland/16&amp;body= %0AArtima Weblogs %0AThe Adventures of a Pythonista in Schemeland/16 %0Aby Michele Simionato %0A%0Ahttps://www.artima.com/weblogs/viewpost.jsp?thread=249685">Email</a> | 
<a href="../viewpostP.html$/thread=249685.html">Print</a> | 
<a href="../bloggers.html">Bloggers</a> | 
<a class="sl" href="thread=249681.html" title="The Adventures of a Pythonista in Schemeland/15">Previous</a> | 
<a class="sl" href="thread=248750.html" title="PyConTre Italy">Next</a>
</div>
</td>
</tr>
</table>
<table bgcolor="#EEEEEE" width="100%">
<tr>
<td align="center">
<div class="sc">
<span style="color: #555555;">Sponsored Link</span> <span style="color: #888888;">•</span>
<script language="JavaScript" src="../_/https/www.artima.com/zcr/adx.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
   if (!document.phpAds_used) document.phpAds_used = ',';
   phpAds_random = new String (Math.random()); phpAds_random = phpAds_random.substring(2,11);
   
   document.write ("<" + "script language='JavaScript' type='text/javascript' src='");
   document.write ("../_/https/www.artima.com/zcr/adjs.html$/n=.html" + phpAds_random);
   document.write ("&amp;what=zone:9&amp;target=_top");   document.write ("&amp;exclude=" + document.phpAds_used);
   if (document.referrer)
      document.write ("&amp;referer=" + escape(document.referrer));
   document.write ("'><" + "/script>");
//-->
</script><noscript><a href="../_/https/www.artima.com/zcr/adclick.html$/n=a799ecf6.html" target="_top"><img alt="" border="0" src="../_/https/www.artima.com/zcr/adview.html$/what=zone:9&amp;n=a0587811.html"/></a></noscript>
</div>
</td>
</tr>
</table>
<br/>
<div class="vegies">
<div class="tc">
<span class="sts">The Explorer</span><br>
<span class="ts">The Adventures of a Pythonista in Schemeland/16</span><br/>
<span class="as">by Michele Simionato</span><br/>
<span class="pd">February 17, 2009</span><br/>
</br></div>
<blockquote>
<b>Summary</b><br/>
This episode is a direct continuation of latest issue: it gives example of use of the destructuring bind form
let+ introduced there. I also discuss multiple values, unary functions and functions with optional arguments.

</blockquote>
<hr align="left" width="90%"/>
<table align="right">
<tr>
<td>
<div class="adnotice">
Advertisement
</div>
<center>
<script language="JavaScript" src="../_/https/www.artima.com/zcr/adx.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
if (!document.phpAds_used) document.phpAds_used = ',';
phpAds_random = new String (Math.random()); phpAds_random = phpAds_random.substring(2,11);
document.write ("<" + "script language='JavaScript' type='text/javascript' src='");
document.write ("../_/https/www.artima.com/zcr/adjs.html$/n=.html" + phpAds_random);
document.write ("&amp;what=zone:2");
document.write ("&amp;exclude=" + document.phpAds_used);
if (document.referrer)
document.write ("&amp;referer=" + escape(document.referrer));
document.write ("'><" + "/script>");
//-->
</script><noscript><a href="../_/https/www.artima.com/zcr/adclick.html$/n=a74ab060.html" target="_blank"><img alt="" border="0" src="../_/https/www.artima.com/zcr/adview.html$/what=zone:2&amp;n=a74ab060.html"/></a></noscript>
</center>
</td>
</tr>
</table>
<p>
<div class="section">
<h1><a id="list-destructuring-versus-let-values" name="list-destructuring-versus-let-values">list destructuring versus let-values</a></h1>
<p>There is a feature of Scheme that I never liked, i.e. the fact that
functions (more in general continuations) can return multiple values.
Multiple values are a relatively late addition to Scheme - they entered in the
standard with the R5RS report - and there has always been some opposition
against them (see for instance <a class="reference" href="../_/http/groups.google.com/group/comp.lang.scheme/msg/7335da47820deff4$/hl=en/index.html">this old post</a> by Jeffrey Susskind).
I personally see multiple values as a wart of Scheme, a useless complication
motivated by premature optimization concerns.</p>
<p>It is possible to define functions
returning multiple values as follows:</p>
<pre class="literal-block">
&gt; (define (return-three-values)
    (values 1 2 3))
&gt; (return-three-values)
1
2
3
</pre>
<p>In order to receive the values a
special syntax is needed, and you cannot do things like the following:</p>
<pre class="literal-block">
&gt; (apply + (return-three-values))
Unhandled exception
 Condition components:
   1. &amp;assertion
   2. &amp;who: apply
   3. &amp;message: "incorrect number of values returned to single value context"
   4. &amp;irritants: ((1 2 3))
</pre>
<p>Instead, you are forced to use <tt class="docutils literal"><span class="pre">let-values</span></tt> or other constructs which
are able to accept values:</p>
<pre class="literal-block">
&gt; (let-values (((x y z) (return-three-values))) (+ x y z))
6
</pre>
<p>In this series I will never use functions returning multiple values,
except the ones in the Scheme standard library (this is why I am
forced to talk about <tt class="docutils literal"><span class="pre">let-values</span></tt>). Instead of using multiple
values, I will return a list of values and I will destructure it
with <tt class="docutils literal"><span class="pre">let+</span></tt>. For instance, I will write</p>
<pre class="literal-block">
&gt; (let+ ((a b) (list 1 2)) (cons a b))
(1 . 2)
</pre>
<p>instead of</p>
<pre class="literal-block">
&gt; (let-values (((a b) (values 1 2))) (cons a b))
(1 . 2)
</pre>
<p><tt class="docutils literal"><span class="pre">let+</span></tt> is more elegant and more general than <tt class="docutils literal"><span class="pre">let-values</span></tt>:
everything <tt class="docutils literal"><span class="pre">let-values</span></tt> can do, <tt class="docutils literal"><span class="pre">let+</span></tt> can do too.  <tt class="docutils literal"><span class="pre">let+</span></tt> can
even faster - in some implementations and in some cases.
Here is a benchmark in Ikarus Scheme:</p>
<pre class="literal-block">
running stats for (repeat 10000000 (let-values (((x y z) (values 1 2 3))) 'dummy)):
    no collections
    276 ms elapsed cpu time, including 0 ms collecting
    277 ms elapsed real time, including 0 ms collecting
    0 bytes allocated

running stats for (repeat 10000000 (let+ ((x y z) (list 1 2 3)) 'dummy)):
    58 collections
    211 ms elapsed cpu time, including 42 ms collecting
    213 ms elapsed real time, including 43 ms collecting
    240016384 bytes allocated
</pre>
<p>As you see, <tt class="docutils literal"><span class="pre">let+</span></tt> takes only 211 ms to unpack a list of three elements
ten million times; <tt class="docutils literal"><span class="pre">let-values</span></tt> would take 276 ms instead.
On the other hand, <tt class="docutils literal"><span class="pre">let+</span></tt> involves garbage collection
(in our example 24 bytes are allocate per cycle, and thats means 240
million of bytes) and depending on the situations and the implementation
this may cause a serious slowdown. You may find much better benchmarks
than mine in <a class="reference" href="../_/http/groups.google.com/group/comp.lang.scheme/browse_frm/thread/ba8873b2f955af67/index.html">this thread</a> on comp.lang.scheme and you will see that
you can get any kind of results. <tt class="docutils literal"><span class="pre">let-values</span></tt> seems to be slow in
Ikarus and in Ypsilon with the default optimization options; it can be
faster in other implementations, or in the same implementations with
different options or in different releases.</p>
<p>However, those are implementation
details.
The important thing in my view is the conceptual relevance of a language
construct. Conceptually I think the introduction of multiple values
in Scheme was a mistake, since it added nothing that could not be done
better with containers. I think functions should <em>always</em> return
a single value, possibly a composite one (a list, a vector, or anything
else). Actually, I am even more radical than that and I think that functions
should take a <em>single value</em>, as in SML and Haskell.</p>
</div>
<div class="section">
<h1><a id="variadic-functions-from-unary-functions" name="variadic-functions-from-unary-functions">Variadic functions from unary functions</a></h1>
<p>If you have a minimalistic mindset (as I have) you will recognize that
multiple argument functions are useless since they can be implemented
as unary functions performing destructuring.
Here is a simple implementation of the idea:</p>
<pre class="literal-block">
(def-syntax (fn (arg ... . rest) body body* ...)
  #'(lambda (x)
      (let+ ((arg ... . rest) x)
        (begin body body* ...))))

(def-syntax (define/fn (name arg ... . rest) body body* ...)
  #'(define name (fn (arg ... . rest) body body* ...)))
</pre>
<p>Here are a few examples of usage:</p>
<pre class="literal-block">
&gt; (define/fn (double x) (* 2 x))
&gt; (double '(1))
2

&gt; (define/fn (sum . vals) (apply + vals))
&gt; (sum '(1 2 3))
6

&gt; (define/fn (sum-2D (x1 y1) (x2 y2)) (list (+ x1 x2) (+ y1 y2)))
&gt; (sum-2D '((1 2)(3 4)))
(4 6)
</pre>
<p>All the functions defined via <tt class="docutils literal"><span class="pre">define/fn</span></tt> take a single argument, a list,
which is then destructured according to the declared structure.
<tt class="docutils literal"><span class="pre">double</span></tt> expects a list with a single element named <tt class="docutils literal"><span class="pre">x</span></tt>; <tt class="docutils literal"><span class="pre">sum</span></tt> expects
a list with a variable number of elements <tt class="docutils literal"><span class="pre">val</span></tt>; <tt class="docutils literal"><span class="pre">sum-2D</span></tt> expects
a two-element lists made of two-element lists named <tt class="docutils literal"><span class="pre">(x1</span> <span class="pre">y1)</span></tt> and
<tt class="docutils literal"><span class="pre">(x2</span> <span class="pre">y2)</span></tt> respectively. You can easily imagine more complex examples
with deeply nested lists.</p>
<img alt="../_/http/www.phyast.pitt.edu/~micheles/scheme/unpacking.png" src="../_/http/www.phyast.pitt.edu/~micheles/scheme/unpacking.png">
<p>It is interesting to notice that Python has the
list destructuring/tuple unpacking functionality built-in:</p>
<pre class="doctest-block">
&gt;&gt;&gt; def sum2D((x1, y1), (x2, y2)):
...     return x1 + x2, y1 + y2
...
&gt;&gt;&gt; sum2D((1,2),(3,4))
(4, 6)
</pre>
<p>This is valid Python code in all versions of Python before Python 3.0.
However, in Python 3X this functionality has been removed for lack of use
(<em>sic</em>).</p>
<p>The advantage of unary functions is that they are easier to compose,
and many functional patterns (including currying described in
<a class="reference" href="../_/http/www.artima.com/weblogs/viewpost.html$/thread=249198.html">episode #14</a>) becomes possible. However, Scheme is not ML or Haskell, so
let us accept functions with multiple arguments and let us take advantage
of them to implement optional arguments. This is the subject of the
next paragraph.</p>
</img></div>
<div class="section">
<h1><a id="further-examples-of-destructuring-opt-lambda" name="further-examples-of-destructuring-opt-lambda">Further examples of destructuring: opt-lambda</a></h1>
<p>A weekness of standard Scheme is the lack of functions with default
arguments and keyword arguments. In practice, this is a minor weakness
since there many libraries implementing the functionality, although in
different ways, as usual. I recommend you to look at <a class="reference" href="../_/http/srfi.schemers.org/srfi-88/srfi-88.html">SRFI-88</a> and
<a class="reference" href="../_/http/srfi.schemers.org/srfi-89/srfi-89.html">SRFI-89</a> for more context. Here I will implement equivalent
functionality from scratch,
as yet another exercise to show the power of
<tt class="docutils literal"><span class="pre">let+</span></tt>. Let me start from an example, to make clear the intended
functionality. Let me define a function <tt class="docutils literal"><span class="pre">f</span></tt> with optional arguments
as follows:</p>
<pre class="literal-block">
(define/opt (f x y (opt (u 1) (v 2)) . rest)
   (printf "Required: ~a Optional: ~a Other: ~a\n"
      (list x y) (list u v) rest))
</pre>
<p>Here <tt class="docutils literal"><span class="pre">x</span></tt> and <tt class="docutils literal"><span class="pre">y</span></tt> are required arguments, <tt class="docutils literal"><span class="pre">u</span></tt> and <tt class="docutils literal"><span class="pre">v</span></tt>
are optional arguments and <tt class="docutils literal"><span class="pre">rest</span></tt> are variadic arguments.
If you do not provide an optional argument, its default value is
be used instead, and <tt class="docutils literal"><span class="pre">f</span></tt> behaves as follows:</p>
<pre class="literal-block">
&gt; (f 'a 'b 'c 'd 'e 'f)
Required: (a b) Optional: (c d) Other: (e f)
&gt; (f 'a 'b 'c)
Required: (a b) Optional: (c 2) Other: ()
&gt; (f 'a 'b)
Required: (a b) Optional: (1 2) Other: ()
&gt; (f 'a)
Unhandled exception
 Condition components:
   1. &amp;assertion
   2. &amp;who: apply
   3. &amp;message: "incorrect number of arguments"
   4. &amp;irritants: (#&lt;procedure f&gt; 1)
</pre>
<p>It is clear that in order to implement the functionality the trick
is to override the defaults of the optional argument with the passed
arguments, if any. To this aim we will need the following helper
function:</p>
<pre class="literal-block">
;;(override-with '(a b) '(1 2 3)) =&gt; '(a b 3)
(define (override-with winner loser)
  (let ((w (length winner)) (l (length loser)))
    (if (&gt;= w l)
        winner ; winner completely overrides loser
        (append winner (list-tail loser w)))))
</pre>
<p>(we introduced the <tt class="docutils literal"><span class="pre">list-tail</span></tt> function in <a class="reference" href="../_/http/www.artima.com/weblogs/viewpost.html$/thread=248953.html">episode #13</a>).
At this point it is easy to define an <tt class="docutils literal"><span class="pre">opt-lambda</span></tt> macro doing the
job:</p>
<pre class="literal-block">
(def-syntax opt-lambda
  (syntax-match (opt)
    (sub (opt-lambda (r1 ... (opt (o1 d1) ...) . rest) body1 body2 ...)
    #'(lambda (r1 ... . args)
        (let+ ((o1 ... . rest) (override-with args (list d1 ...)))
              (begin body1 body2 ...))))))
</pre>
<p><tt class="docutils literal"><span class="pre">define/opt</span></tt> is just sugar over <tt class="docutils literal"><span class="pre">opt-lambda</span></tt>:</p>
<pre class="literal-block">
(def-syntax (define/opt (name . args) body1 body2 ...)
  #'(define name (opt-lambda args body1 body2 ...)))
</pre>
<p>I should notice that strictly speaking you do not need a full
restructuring form to implement <tt class="docutils literal"><span class="pre">opt-lambda</span></tt>: since <tt class="docutils literal"><span class="pre">override-with-args</span></tt>
returns a flat list, a form which is able to destructure flat list is
enough. You could implement it easily enough:</p>
<pre class="literal-block">
(def-syntax (let- (name ... . rest) lst expr)
  #'(apply (lambda (name ... . rest) expr) lst))
</pre>
<p>However <tt class="docutils literal"><span class="pre">let+</span></tt> subsumes the functionality of <tt class="docutils literal"><span class="pre">let-</span></tt> and I do not
see the point of introducing yet another binding form, except for sake
of the exercise. Strangely enough, <tt class="docutils literal"><span class="pre">let-</span></tt> looks even slower than <tt class="docutils literal"><span class="pre">let+</span></tt>
in Ikarus:</p>
<pre class="literal-block">
running stats for (repeat 10000000 (let- (x y z) (list 1 2 3) 'dummy)):
   58 collections
   324 ms elapsed cpu time, including 16 ms collecting
   324 ms elapsed real time, including 22 ms collecting
   240004096 bytes allocated
</pre>
<p>But please don't trust benchmarks! ;)</p>
</div>
<h1>Talk Back!</h1>
<p>
Have an opinion?


Readers have already posted

<a href="../_/https/www.artima.com/forums/flat.html$/forum=106&amp;thread=249685.html">3

comments</a>
about this weblog entry. Why not

<a href="../_/https/www.artima.com/forums/post.html$/forum=106&amp;thread=249685&amp;reply=true.html">add yours</a>?


<h1>RSS Feed</h1>
<p>
If you'd like to be notified whenever Michele Simionato adds a new entry to <a href="../index.html$/blogger=micheles.html">his weblog</a>, subscribe to his <a href="../feeds/bloggers/micheles.rss">RSS feed</a>.

<center>
<div class="sociallinks">
<a href="../_/http/digg.com/submit$/phase=2&amp;url=http%3A%2F%2Fwww.artima.com%2Fweblogs%2Fviewpost.jsp%3Fthread%3D249685&amp;title=The+Adventures+of+a+Pythonista+in+Schemeland%2F16&amp;bodytext=This+episode+is+a+direct+continuation+of+latest+issue%3A+it+gives+example+of+use+of+the+destructuring+bind+form%0D%0Alet%2B+introduced+there.+I+also+discuss+multiple+values%2C+unary+functions+and+functions+with+optional+arguments.&amp;topic=programming">
<img alt="Digg" border="0" height="14" hspace="8" src="../_/https/www.artima.com/images/digg.gif" width="16">Digg
  </img></a>
  |
  <a href="../_/http/del.icio.us/post$/url=http%3A%2F%2Fwww.artima.com%2Fweblogs%2Fviewpost.jsp%3Fthread%3D249685&amp;title=The+Adventures+of+a+Pythonista+in+Schemeland%2F16">
<img alt="del.icio.us" border="0" height="16" hspace="8" src="../_/https/www.artima.com/images/delicious.gif" vspace="1" width="16"/>del.icio.us
  </a>
  |
  <a href="../_/http/programming.reddit.com/submit$/url=http%3A%2F%2Fwww.artima.com%2Fweblogs%2Fviewpost.jsp%3Fthread%3D249685&amp;title=The+Adventures+of+a+Pythonista+in+Schemeland%2F16">
<img alt="Reddit" border="0" height="18" hspace="8" src="../_/https/www.artima.com/images/reddit.gif" width="18"/>Reddit
  </a>
</div>
</center>
<h1>About the Blogger</h1>
<p>
<table><tr valign="bottom"><td><img align="right" src="../_/https/www.artima.com/images/micheleSimionato.jpg"/></td><td>Michele Simionato started his career as a Theoretical Physicist, working in Italy, France and the U.S. He turned to programming in 2003; since then he has been working professionally as a Python developer and now he lives in Milan, Italy. Michele is well known in the Python community for his posts in the newsgroup(s), his articles and his Open Source libraries and recipes. His interests include object oriented programming, functional programming, and in general programming metodologies that enable us to manage the complexity of modern software developement.</td></tr></table><p>
<div class="sp">This weblog entry is Copyright © 2009 Michele Simionato. All rights reserved.</div>
</p></p></p></p></p></div>

<hr width="100%">
<table align="center" width="50%">
<tr>
<td>
<div class="horizontaltextadbox">
<div class="adheadline">Sponsored Links</div>
<div id="sponsoredlinks">
</div>
</div>
</td>
</tr>
</table>
<hr width="100%"/>
<center>
<script type="text/javascript"><!--
google_ad_client = "pub-3911176865765226";
google_alternate_color = "ffffff";
google_ad_width = 728;
google_ad_height = 15;
google_ad_format = "728x15_0ads_al";
google_ad_channel = "";
google_color_border = "ffffff";
google_color_bg = "FFFFFF";
google_color_link = "003090";
google_color_text = "000000";
google_color_url = "666666";
//--></script>
<script src="../_/https/pagead2.googlesyndication.com/pagead/show_ads.js" type="text/javascript">
</script>
<br>
<br/>
<!-- SiteSearch Google -->
<form action="../_/https/www.google.com/custom/index.html" method="get">
<table bgcolor="#ffffff" border="0">
<tr><td align="left" height="32" nowrap="nowrap" valign="top">
<a href="../_/https/www.google.com/index.html">
<img alt="Google" border="0" src="../_/https/www.google.com/logos/Logo_25wht.gif"/></a>
</td>
<td nowrap="nowrap">
<input name="domains" type="hidden" value="Artima.com"/>
<input maxlength="255" name="q" size="31" type="text" value=""/>
<input name="sa" type="submit" value="Search"/>
</td></tr>
<tr>
<td> </td>
<td nowrap="nowrap">
<font color="#000000" size="-1">
<input name="sitesearch" type="radio" value=""/> Web
<input checked="checked" name="sitesearch" type="radio" value="Artima.com"/>Artima.com
</font>  
<input name="client" type="hidden" value="pub-3911176865765226"/>
<input name="forid" type="hidden" value="1"/>
<input name="ie" type="hidden" value="ISO-8859-1"/>
<input name="oe" type="hidden" value="ISO-8859-1"/>
<input name="cof" type="hidden" value="GALT:#008000;GL:1;DIV:#336699;VLC:663399;AH:center;BGC:FFFFFF;LBGC:FFFFFF;ALC:0000FF;LC:0000FF;T:000000;GFNT:0000FF;GIMP:0000FF;LH:50;LW:150;L:https://www.artima.com/images/artima150.gif;S:https://www.artima.com;FORID:1;"/>
<input name="hl" type="hidden" value="en"/>
</td></tr></table>
</form>
<!-- SiteSearch Google -->
</br></center>
<br/>
<div class="sp">
<div style="text-align: center;">
<a href="../_/https/www.artima.com/copyright.html">Copyright</a> © 1996-2019 Artima, Inc. All Rights Reserved. - <a href="../_/https/www.artima.com/privacy.html">Privacy Policy</a> - <a href="../_/https/www.artima.com/termsofuse.html">Terms of Use</a>
</div>
</div>
<br/>
<script language="JavaScript" type="text/javascript">
<!--
function initBannerVarForZone(zone) {
        initBannerVarForZoneWithScript(zone, 'adjs_modified');
}

function initBannerVarForZoneWithScript(zone, phpScript) {

        if (!document.phpAds_used) document.phpAds_used = ',';
        phpAds_random = new String (Math.random());
        phpAds_random = phpAds_random.substring(2,11);

        var nextScriptSrc = '../_/https/www.artima.com/zcr/index.html' + phpScript + '.php?n=' +
                phpAds_random  +
                '&amp;what=zone:' + zone + '&amp;target=_top&amp;block=1&amp;blockcampaign=1' +
                '&amp;exclude=' + document.phpAds_used;

        document.write("<script language='JavaScript' type='text/javascript' src='");
        document.write(nextScriptSrc);
        document.write("'><\/script>");

}

function replaceDiv(divID) {
        document.getElementById(divID).innerHTML = phpadsbanner;
}
-->
</script>
<script language="JavaScript" type="text/javascript">
<!--
initBannerVarForZone(3);
-->
</script>
<script language="JavaScript" type="text/javascript">
<!--
replaceDiv('leftskyscraper');
-->
</script>
<script language="JavaScript" type="text/javascript">
<!--
initBannerVarForZoneWithScript(4, 'textman');
-->
</script>
<script language="JavaScript" type="text/javascript">
<!--
replaceDiv('sponsoredlinks');
-->
</script>
</hr><a href="https://dafoster.net/projects/crystal-web-archiver/" id="cr-footer-banner" style="border-top: 2px #B40010 solid;background: #FFFAE1;font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;font-variant: initial;font-weight: initial;text-transform: none;font-size: 14px;color: #6c757d;line-height: 2.0;cursor: pointer;display: flex;align-items: center;justify-content: center;gap: 4px;clear: both;" target="_blank"><img height="24" onerror="this.style['display'] = 'none';" src="../_/crystal/resources/appicon.png" width="24"/><span>This page was archived with Crystal</span><script>window.addEventListener('load', function() { const $1 = document.querySelector('#cr-footer-banner'); if (!$1) { return; } if (window !== window.top) { let $2 = false; if (window.name) { const $3 = window.parent.document.getElementsByName(window.name); if ($3.length === 1) { const $4 = $3[0]; if ($4.tagName === 'FRAME' && $4.parentElement.tagName === 'FRAMESET') { let $5 = $4; while (true) { if ($5.parentElement.tagName !== 'FRAMESET') { $2 = true; break; } if ($5.parentElement.attributes['rows'] !== undefined) { const $6 = $5.parentElement.children; if ($5 === $6[$6.length - 1]) { $5 = $5.parentElement; continue; } else { break; } } else if ($5.parentElement.attributes['cols'] !== undefined) { const $7 = Array.from($5.parentElement.children); const $8 = $7.indexOf($5); if ($8 === -1) { break; } const $9 = $5.parentElement.attributes['cols'].value.split(','); const $10 = $9.map((s) => parseInt(s.trim())); if ($9[$8].trim() === '*' || $10[$8] === Math.max.apply(null, $10)) { $5 = $5.parentElement; continue; } else { break; } } else { break; } } } } } if (!$2) { $1.style['display'] = 'none'; } } const $11 = $1.getBoundingClientRect(); const $12 = ($11.y < window.innerHeight - $11.height); if ($12) { $1.style['position'] = 'fixed'; $1.style['bottom'] = '0'; $1.style['left'] = '0'; $1.style['right'] = '0'; $1.style['z-index'] = '9999'; } const $13 = ( document.body.getBoundingClientRect().height < $11.height * 2 ); if ($13) { $1.style['display'] = 'none'; }
});</script></a></body>
</html>
